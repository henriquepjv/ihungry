  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "active_storage_attachments"[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (15.3ms)[0m  [1m[35mCREATE TABLE "active_storage_attachments" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar NOT NULL, "record_type" varchar NOT NULL, "record_id" integer NOT NULL, "blob_id" integer NOT NULL, "created_at" datetime NOT NULL)[0m
  [1m[35m (17.5ms)[0m  [1m[35mCREATE  INDEX "index_active_storage_attachments_on_blob_id" ON "active_storage_attachments" ("blob_id")[0m
  [1m[35m (17.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_active_storage_attachments_uniqueness" ON "active_storage_attachments" ("record_type", "record_id", "name", "blob_id")[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE IF EXISTS "active_storage_blobs"[0m
  [1m[35m (15.6ms)[0m  [1m[35mCREATE TABLE "active_storage_blobs" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "key" varchar NOT NULL, "filename" varchar NOT NULL, "content_type" varchar, "metadata" text, "byte_size" bigint NOT NULL, "checksum" varchar NOT NULL, "created_at" datetime NOT NULL)[0m
  [1m[35m (18.4ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_active_storage_blobs_on_key" ON "active_storage_blobs" ("key")[0m
  [1m[35m (0.4ms)[0m  [1m[35mDROP TABLE IF EXISTS "categories"[0m
  [1m[35m (16.1ms)[0m  [1m[35mCREATE TABLE "categories" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "order_products"[0m
  [1m[35m (18.2ms)[0m  [1m[35mCREATE TABLE "order_products" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "quantity" integer, "comment" text, "order_id" integer, "product_id" integer, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (17.1ms)[0m  [1m[35mCREATE  INDEX "index_order_products_on_order_id" ON "order_products" ("order_id")[0m
  [1m[35m (17.8ms)[0m  [1m[35mCREATE  INDEX "index_order_products_on_product_id" ON "order_products" ("product_id")[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "orders"[0m
  [1m[35m (16.2ms)[0m  [1m[35mCREATE TABLE "orders" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "phone_number" varchar, "total_value" float, "address" varchar, "status" integer DEFAULT 0, "restaurant_id" integer, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (18.5ms)[0m  [1m[35mCREATE  INDEX "index_orders_on_restaurant_id" ON "orders" ("restaurant_id")[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "product_categories"[0m
  [1m[35m (16.3ms)[0m  [1m[35mCREATE TABLE "product_categories" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar, "restaurant_id" integer, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (18.0ms)[0m  [1m[35mCREATE  INDEX "index_product_categories_on_restaurant_id" ON "product_categories" ("restaurant_id")[0m
  [1m[35m (0.4ms)[0m  [1m[35mDROP TABLE IF EXISTS "products"[0m
  [1m[35m (17.0ms)[0m  [1m[35mCREATE TABLE "products" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "description" text, "price" float, "product_category_id" integer, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (19.0ms)[0m  [1m[35mCREATE  INDEX "index_products_on_product_category_id" ON "products" ("product_category_id")[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "restaurants"[0m
  [1m[35m (16.3ms)[0m  [1m[35mCREATE TABLE "restaurants" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "description" text, "status" integer, "delivery_tax" float, "state" varchar, "city" varchar, "street" varchar, "neighborhood" varchar, "number" varchar, "complement" varchar, "reference" varchar, "cep" varchar, "latitude" float, "longitude" float, "category_id" integer, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (18.4ms)[0m  [1m[35mCREATE  INDEX "index_restaurants_on_category_id" ON "restaurants" ("category_id")[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "reviews"[0m
  [1m[35m (16.3ms)[0m  [1m[35mCREATE TABLE "reviews" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "value" integer, "restaurant_id" integer, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (17.9ms)[0m  [1m[35mCREATE  INDEX "index_reviews_on_restaurant_id" ON "reviews" ("restaurant_id")[0m
  [1m[35m (31.2ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (12.7ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20190505191505)[0m
  [1m[35m (12.6ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20190505184651),
(20190505184849),
(20190505184831),
(20190505184629),
(20190505184841),
(20190505184909),
(20190505184902);

[0m
  [1m[35m (15.7ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.2ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2020-04-05 13:56:59.628971"], ["updated_at", "2020-04-05 13:56:59.628971"]]
  [1m[35m (12.4ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Creating scope :open. Overwriting existing method Restaurant.open.
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "product_categories"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "order_products"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "orders"[0m
  [1m[36mFixture Delete (0.0ms)[0m  [1m[31mDELETE FROM "reviews"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "restaurants"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "categories"[0m
  [1m[36mFixture Delete (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "product_categories" ("title", "created_at", "updated_at", "id", "restaurant_id") VALUES ('MyString', '2020-04-05 13:56:59.742221', '2020-04-05 13:56:59.742221', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.0ms)[0m  [1m[32mINSERT INTO "product_categories" ("title", "created_at", "updated_at", "id", "restaurant_id") VALUES ('MyString', '2020-04-05 13:56:59.742221', '2020-04-05 13:56:59.742221', 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "order_products" ("quantity", "comment", "created_at", "updated_at", "id", "order_id", "product_id") VALUES (1, 'MyText', '2020-04-05 13:56:59.743792', '2020-04-05 13:56:59.743792', 980190962, 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.0ms)[0m  [1m[32mINSERT INTO "order_products" ("quantity", "comment", "created_at", "updated_at", "id", "order_id", "product_id") VALUES (1, 'MyText', '2020-04-05 13:56:59.743792', '2020-04-05 13:56:59.743792', 298486374, 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "orders" ("name", "phone_number", "total_value", "address", "status", "created_at", "updated_at", "id", "restaurant_id") VALUES ('MyString', 'MyString', 1.5, 'MyString', 1, '2020-04-05 13:56:59.745478', '2020-04-05 13:56:59.745478', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "orders" ("name", "phone_number", "total_value", "address", "status", "created_at", "updated_at", "id", "restaurant_id") VALUES ('MyString', 'MyString', 1.5, 'MyString', 1, '2020-04-05 13:56:59.745478', '2020-04-05 13:56:59.745478', 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.0ms)[0m  [1m[32mINSERT INTO "reviews" ("value", "created_at", "updated_at", "id", "restaurant_id") VALUES (1, '2020-04-05 13:56:59.747030', '2020-04-05 13:56:59.747030', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.0ms)[0m  [1m[32mINSERT INTO "reviews" ("value", "created_at", "updated_at", "id", "restaurant_id") VALUES (1, '2020-04-05 13:56:59.747030', '2020-04-05 13:56:59.747030', 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "restaurants" ("name", "description", "status", "delivery_tax", "state", "city", "street", "neighborhood", "number", "complement", "reference", "cep", "latitude", "longitude", "created_at", "updated_at", "id", "category_id") VALUES ('MyString', 'MyText', 1, 1.5, 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 1.5, 1.5, '2020-04-05 13:56:59.747988', '2020-04-05 13:56:59.747988', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "restaurants" ("name", "description", "status", "delivery_tax", "state", "city", "street", "neighborhood", "number", "complement", "reference", "cep", "latitude", "longitude", "created_at", "updated_at", "id", "category_id") VALUES ('MyString', 'MyText', 1, 1.5, 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 1.5, 1.5, '2020-04-05 13:56:59.747988', '2020-04-05 13:56:59.747988', 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.0ms)[0m  [1m[32mINSERT INTO "categories" ("title", "created_at", "updated_at", "id") VALUES ('MyString', '2020-04-05 13:56:59.749541', '2020-04-05 13:56:59.749541', 980190962)[0m
  [1m[36mFixture Insert (0.0ms)[0m  [1m[32mINSERT INTO "categories" ("title", "created_at", "updated_at", "id") VALUES ('MyString', '2020-04-05 13:56:59.749541', '2020-04-05 13:56:59.749541', 298486374)[0m
  [1m[36mFixture Insert (0.0ms)[0m  [1m[32mINSERT INTO "products" ("name", "description", "price", "created_at", "updated_at", "id", "product_category_id") VALUES ('MyString', 'MyText', 1.5, '2020-04-05 13:56:59.750359', '2020-04-05 13:56:59.750359', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.0ms)[0m  [1m[32mINSERT INTO "products" ("name", "description", "price", "created_at", "updated_at", "id", "product_category_id") VALUES ('MyString', 'MyText', 1.5, '2020-04-05 13:56:59.750359', '2020-04-05 13:56:59.750359', 298486374, 298486374)[0m
  [1m[35m (13.8ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
RestaurantsControllerTest: test_should_get_index
------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------
RestaurantsControllerTest: test_should_get_show
-----------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------
RestaurantsControllerTest: test_should_get_search
-------------------------------------------------
Started GET "/restaurants/search" for 127.0.0.1 at 2020-04-05 10:57:00 -0300
Processing by RestaurantsController#search as HTML
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
[active_model_serializers]   [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("reviews"."value") FROM "reviews" WHERE "reviews"."restaurant_id" = ?[0m  [["restaurant_id", 298486374]]
[active_model_serializers]   [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT  "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 298486374], ["record_type", "Restaurant"], ["name", "image"], ["LIMIT", 1]]
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Json (21.04ms)
Completed 500 Internal Server Error in 63ms (ActiveRecord: 0.6ms)
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
OrdersControllerTest: test_should_get_show
------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
OrdersControllerTest: test_should_get_create
--------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------
CategoriesControllerTest: test_should_get_index
-----------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Creating scope :open. Overwriting existing method Restaurant.open.
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "product_categories"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "order_products"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "orders"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "reviews"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "restaurants"[0m
  [1m[36mFixture Delete (0.0ms)[0m  [1m[31mDELETE FROM "categories"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "product_categories" ("title", "created_at", "updated_at", "id", "restaurant_id") VALUES ('MyString', '2020-04-05 14:25:01.848972', '2020-04-05 14:25:01.848972', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "product_categories" ("title", "created_at", "updated_at", "id", "restaurant_id") VALUES ('MyString', '2020-04-05 14:25:01.848972', '2020-04-05 14:25:01.848972', 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "order_products" ("quantity", "comment", "created_at", "updated_at", "id", "order_id", "product_id") VALUES (1, 'MyText', '2020-04-05 14:25:01.850636', '2020-04-05 14:25:01.850636', 980190962, 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "order_products" ("quantity", "comment", "created_at", "updated_at", "id", "order_id", "product_id") VALUES (1, 'MyText', '2020-04-05 14:25:01.850636', '2020-04-05 14:25:01.850636', 298486374, 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "orders" ("name", "phone_number", "total_value", "address", "status", "created_at", "updated_at", "id", "restaurant_id") VALUES ('MyString', 'MyString', 1.5, 'MyString', 1, '2020-04-05 14:25:01.851831', '2020-04-05 14:25:01.851831', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "orders" ("name", "phone_number", "total_value", "address", "status", "created_at", "updated_at", "id", "restaurant_id") VALUES ('MyString', 'MyString', 1.5, 'MyString', 1, '2020-04-05 14:25:01.851831', '2020-04-05 14:25:01.851831', 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "reviews" ("value", "created_at", "updated_at", "id", "restaurant_id") VALUES (1, '2020-04-05 14:25:01.853059', '2020-04-05 14:25:01.853059', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.0ms)[0m  [1m[32mINSERT INTO "reviews" ("value", "created_at", "updated_at", "id", "restaurant_id") VALUES (1, '2020-04-05 14:25:01.853059', '2020-04-05 14:25:01.853059', 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "restaurants" ("name", "description", "status", "delivery_tax", "state", "city", "street", "neighborhood", "number", "complement", "reference", "cep", "latitude", "longitude", "created_at", "updated_at", "id", "category_id") VALUES ('MyString', 'MyText', 1, 1.5, 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 1.5, 1.5, '2020-04-05 14:25:01.854042', '2020-04-05 14:25:01.854042', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "restaurants" ("name", "description", "status", "delivery_tax", "state", "city", "street", "neighborhood", "number", "complement", "reference", "cep", "latitude", "longitude", "created_at", "updated_at", "id", "category_id") VALUES ('MyString', 'MyText', 1, 1.5, 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 1.5, 1.5, '2020-04-05 14:25:01.854042', '2020-04-05 14:25:01.854042', 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.0ms)[0m  [1m[32mINSERT INTO "categories" ("title", "created_at", "updated_at", "id") VALUES ('MyString', '2020-04-05 14:25:01.855561', '2020-04-05 14:25:01.855561', 980190962)[0m
  [1m[36mFixture Insert (0.0ms)[0m  [1m[32mINSERT INTO "categories" ("title", "created_at", "updated_at", "id") VALUES ('MyString', '2020-04-05 14:25:01.855561', '2020-04-05 14:25:01.855561', 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "products" ("name", "description", "price", "created_at", "updated_at", "id", "product_category_id") VALUES ('MyString', 'MyText', 1.5, '2020-04-05 14:25:01.856515', '2020-04-05 14:25:01.856515', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.0ms)[0m  [1m[32mINSERT INTO "products" ("name", "description", "price", "created_at", "updated_at", "id", "product_category_id") VALUES ('MyString', 'MyText', 1.5, '2020-04-05 14:25:01.856515', '2020-04-05 14:25:01.856515', 298486374, 298486374)[0m
  [1m[35m (13.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------
CategoriesControllerTest: test_should_get_index
-----------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Creating scope :open. Overwriting existing method Restaurant.open.
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "product_categories"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "order_products"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "orders"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "reviews"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "restaurants"[0m
  [1m[36mFixture Delete (0.0ms)[0m  [1m[31mDELETE FROM "categories"[0m
  [1m[36mFixture Delete (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "product_categories" ("title", "created_at", "updated_at", "id", "restaurant_id") VALUES ('MyString', '2020-04-05 14:25:35.782202', '2020-04-05 14:25:35.782202', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "product_categories" ("title", "created_at", "updated_at", "id", "restaurant_id") VALUES ('MyString', '2020-04-05 14:25:35.782202', '2020-04-05 14:25:35.782202', 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "order_products" ("quantity", "comment", "created_at", "updated_at", "id", "order_id", "product_id") VALUES (1, 'MyText', '2020-04-05 14:25:35.783496', '2020-04-05 14:25:35.783496', 980190962, 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.0ms)[0m  [1m[32mINSERT INTO "order_products" ("quantity", "comment", "created_at", "updated_at", "id", "order_id", "product_id") VALUES (1, 'MyText', '2020-04-05 14:25:35.783496', '2020-04-05 14:25:35.783496', 298486374, 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "orders" ("name", "phone_number", "total_value", "address", "status", "created_at", "updated_at", "id", "restaurant_id") VALUES ('MyString', 'MyString', 1.5, 'MyString', 1, '2020-04-05 14:25:35.784479', '2020-04-05 14:25:35.784479', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "orders" ("name", "phone_number", "total_value", "address", "status", "created_at", "updated_at", "id", "restaurant_id") VALUES ('MyString', 'MyString', 1.5, 'MyString', 1, '2020-04-05 14:25:35.784479', '2020-04-05 14:25:35.784479', 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.0ms)[0m  [1m[32mINSERT INTO "reviews" ("value", "created_at", "updated_at", "id", "restaurant_id") VALUES (1, '2020-04-05 14:25:35.785539', '2020-04-05 14:25:35.785539', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.0ms)[0m  [1m[32mINSERT INTO "reviews" ("value", "created_at", "updated_at", "id", "restaurant_id") VALUES (1, '2020-04-05 14:25:35.785539', '2020-04-05 14:25:35.785539', 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "restaurants" ("name", "description", "status", "delivery_tax", "state", "city", "street", "neighborhood", "number", "complement", "reference", "cep", "latitude", "longitude", "created_at", "updated_at", "id", "category_id") VALUES ('MyString', 'MyText', 1, 1.5, 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 1.5, 1.5, '2020-04-05 14:25:35.786403', '2020-04-05 14:25:35.786403', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "restaurants" ("name", "description", "status", "delivery_tax", "state", "city", "street", "neighborhood", "number", "complement", "reference", "cep", "latitude", "longitude", "created_at", "updated_at", "id", "category_id") VALUES ('MyString', 'MyText', 1, 1.5, 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 1.5, 1.5, '2020-04-05 14:25:35.786403', '2020-04-05 14:25:35.786403', 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.0ms)[0m  [1m[32mINSERT INTO "categories" ("title", "created_at", "updated_at", "id") VALUES ('MyString', '2020-04-05 14:25:35.787696', '2020-04-05 14:25:35.787696', 980190962)[0m
  [1m[36mFixture Insert (0.0ms)[0m  [1m[32mINSERT INTO "categories" ("title", "created_at", "updated_at", "id") VALUES ('MyString', '2020-04-05 14:25:35.787696', '2020-04-05 14:25:35.787696', 298486374)[0m
  [1m[36mFixture Insert (0.0ms)[0m  [1m[32mINSERT INTO "products" ("name", "description", "price", "created_at", "updated_at", "id", "product_category_id") VALUES ('MyString', 'MyText', 1.5, '2020-04-05 14:25:35.788500', '2020-04-05 14:25:35.788500', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "products" ("name", "description", "price", "created_at", "updated_at", "id", "product_category_id") VALUES ('MyString', 'MyText', 1.5, '2020-04-05 14:25:35.788500', '2020-04-05 14:25:35.788500', 298486374, 298486374)[0m
  [1m[35m (12.9ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------
CategoriesControllerTest: test_should_get_index
-----------------------------------------------
  [1m[36mCategory Load (0.2ms)[0m  [1m[34mSELECT  "categories".* FROM "categories" WHERE "categories"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mCategory Load (0.1ms)[0m  [1m[34mSELECT  "categories".* FROM "categories" WHERE "categories"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Creating scope :open. Overwriting existing method Restaurant.open.
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "product_categories"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "order_products"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "orders"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "reviews"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "restaurants"[0m
  [1m[36mFixture Delete (0.0ms)[0m  [1m[31mDELETE FROM "categories"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "product_categories" ("title", "created_at", "updated_at", "id", "restaurant_id") VALUES ('MyString', '2020-04-05 14:25:46.512342', '2020-04-05 14:25:46.512342', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "product_categories" ("title", "created_at", "updated_at", "id", "restaurant_id") VALUES ('MyString', '2020-04-05 14:25:46.512342', '2020-04-05 14:25:46.512342', 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "order_products" ("quantity", "comment", "created_at", "updated_at", "id", "order_id", "product_id") VALUES (1, 'MyText', '2020-04-05 14:25:46.514666', '2020-04-05 14:25:46.514666', 980190962, 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "order_products" ("quantity", "comment", "created_at", "updated_at", "id", "order_id", "product_id") VALUES (1, 'MyText', '2020-04-05 14:25:46.514666', '2020-04-05 14:25:46.514666', 298486374, 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "orders" ("name", "phone_number", "total_value", "address", "status", "created_at", "updated_at", "id", "restaurant_id") VALUES ('MyString', 'MyString', 1.5, 'MyString', 1, '2020-04-05 14:25:46.516751', '2020-04-05 14:25:46.516751', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "orders" ("name", "phone_number", "total_value", "address", "status", "created_at", "updated_at", "id", "restaurant_id") VALUES ('MyString', 'MyString', 1.5, 'MyString', 1, '2020-04-05 14:25:46.516751', '2020-04-05 14:25:46.516751', 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "reviews" ("value", "created_at", "updated_at", "id", "restaurant_id") VALUES (1, '2020-04-05 14:25:46.519672', '2020-04-05 14:25:46.519672', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "reviews" ("value", "created_at", "updated_at", "id", "restaurant_id") VALUES (1, '2020-04-05 14:25:46.519672', '2020-04-05 14:25:46.519672', 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "restaurants" ("name", "description", "status", "delivery_tax", "state", "city", "street", "neighborhood", "number", "complement", "reference", "cep", "latitude", "longitude", "created_at", "updated_at", "id", "category_id") VALUES ('MyString', 'MyText', 1, 1.5, 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 1.5, 1.5, '2020-04-05 14:25:46.522350', '2020-04-05 14:25:46.522350', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "restaurants" ("name", "description", "status", "delivery_tax", "state", "city", "street", "neighborhood", "number", "complement", "reference", "cep", "latitude", "longitude", "created_at", "updated_at", "id", "category_id") VALUES ('MyString', 'MyText', 1, 1.5, 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 1.5, 1.5, '2020-04-05 14:25:46.522350', '2020-04-05 14:25:46.522350', 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.7ms)[0m  [1m[32mINSERT INTO "categories" ("title", "created_at", "updated_at", "id") VALUES ('MyString', '2020-04-05 14:25:46.525430', '2020-04-05 14:25:46.525430', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "categories" ("title", "created_at", "updated_at", "id") VALUES ('MyString', '2020-04-05 14:25:46.525430', '2020-04-05 14:25:46.525430', 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "products" ("name", "description", "price", "created_at", "updated_at", "id", "product_category_id") VALUES ('MyString', 'MyText', 1.5, '2020-04-05 14:25:46.527120', '2020-04-05 14:25:46.527120', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "products" ("name", "description", "price", "created_at", "updated_at", "id", "product_category_id") VALUES ('MyString', 'MyText', 1.5, '2020-04-05 14:25:46.527120', '2020-04-05 14:25:46.527120', 298486374, 298486374)[0m
  [1m[35m (12.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------
CategoriesControllerTest: test_should_get_index
-----------------------------------------------
Started GET "/categories" for 127.0.0.1 at 2020-04-05 11:25:46 -0300
Processing by CategoriesController#index as HTML
  [1m[36mCategory Load (0.2ms)[0m  [1m[34mSELECT "categories".* FROM "categories" ORDER BY "categories"."title" ASC[0m
[active_model_serializers]   [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT  "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 298486374], ["record_type", "Category"], ["name", "image"], ["LIMIT", 1]]
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Json (6.3ms)
Completed 500 Internal Server Error in 12ms (ActiveRecord: 0.6ms)
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Creating scope :open. Overwriting existing method Restaurant.open.
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "product_categories"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "order_products"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "orders"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "reviews"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "restaurants"[0m
  [1m[36mFixture Delete (0.0ms)[0m  [1m[31mDELETE FROM "categories"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "product_categories" ("title", "created_at", "updated_at", "id", "restaurant_id") VALUES ('MyString', '2020-04-05 14:26:18.013233', '2020-04-05 14:26:18.013233', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "product_categories" ("title", "created_at", "updated_at", "id", "restaurant_id") VALUES ('MyString', '2020-04-05 14:26:18.013233', '2020-04-05 14:26:18.013233', 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "order_products" ("quantity", "comment", "created_at", "updated_at", "id", "order_id", "product_id") VALUES (1, 'MyText', '2020-04-05 14:26:18.014614', '2020-04-05 14:26:18.014614', 980190962, 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "order_products" ("quantity", "comment", "created_at", "updated_at", "id", "order_id", "product_id") VALUES (1, 'MyText', '2020-04-05 14:26:18.014614', '2020-04-05 14:26:18.014614', 298486374, 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "orders" ("name", "phone_number", "total_value", "address", "status", "created_at", "updated_at", "id", "restaurant_id") VALUES ('MyString', 'MyString', 1.5, 'MyString', 1, '2020-04-05 14:26:18.015691', '2020-04-05 14:26:18.015691', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "orders" ("name", "phone_number", "total_value", "address", "status", "created_at", "updated_at", "id", "restaurant_id") VALUES ('MyString', 'MyString', 1.5, 'MyString', 1, '2020-04-05 14:26:18.015691', '2020-04-05 14:26:18.015691', 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.0ms)[0m  [1m[32mINSERT INTO "reviews" ("value", "created_at", "updated_at", "id", "restaurant_id") VALUES (1, '2020-04-05 14:26:18.016864', '2020-04-05 14:26:18.016864', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.0ms)[0m  [1m[32mINSERT INTO "reviews" ("value", "created_at", "updated_at", "id", "restaurant_id") VALUES (1, '2020-04-05 14:26:18.016864', '2020-04-05 14:26:18.016864', 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "restaurants" ("name", "description", "status", "delivery_tax", "state", "city", "street", "neighborhood", "number", "complement", "reference", "cep", "latitude", "longitude", "created_at", "updated_at", "id", "category_id") VALUES ('MyString', 'MyText', 1, 1.5, 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 1.5, 1.5, '2020-04-05 14:26:18.017821', '2020-04-05 14:26:18.017821', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "restaurants" ("name", "description", "status", "delivery_tax", "state", "city", "street", "neighborhood", "number", "complement", "reference", "cep", "latitude", "longitude", "created_at", "updated_at", "id", "category_id") VALUES ('MyString', 'MyText', 1, 1.5, 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 1.5, 1.5, '2020-04-05 14:26:18.017821', '2020-04-05 14:26:18.017821', 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.0ms)[0m  [1m[32mINSERT INTO "categories" ("title", "created_at", "updated_at", "id") VALUES ('MyString', '2020-04-05 14:26:18.020370', '2020-04-05 14:26:18.020370', 980190962)[0m
  [1m[36mFixture Insert (0.0ms)[0m  [1m[32mINSERT INTO "categories" ("title", "created_at", "updated_at", "id") VALUES ('MyString', '2020-04-05 14:26:18.020370', '2020-04-05 14:26:18.020370', 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "products" ("name", "description", "price", "created_at", "updated_at", "id", "product_category_id") VALUES ('MyString', 'MyText', 1.5, '2020-04-05 14:26:18.021459', '2020-04-05 14:26:18.021459', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.0ms)[0m  [1m[32mINSERT INTO "products" ("name", "description", "price", "created_at", "updated_at", "id", "product_category_id") VALUES ('MyString', 'MyText', 1.5, '2020-04-05 14:26:18.021459', '2020-04-05 14:26:18.021459', 298486374, 298486374)[0m
  [1m[35m (13.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------
CategoriesControllerTest: test_should_get_index
-----------------------------------------------
Started GET "/categories" for 127.0.0.1 at 2020-04-05 11:26:18 -0300
Processing by CategoriesController#index as HTML
  [1m[36mCategory Load (0.2ms)[0m  [1m[34mSELECT "categories".* FROM "categories" ORDER BY "categories"."title" ASC[0m
[active_model_serializers]   [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT  "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 298486374], ["record_type", "Category"], ["name", "image"], ["LIMIT", 1]]
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Json (6.15ms)
Completed 500 Internal Server Error in 12ms (ActiveRecord: 0.5ms)
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Creating scope :open. Overwriting existing method Restaurant.open.
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "product_categories"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "order_products"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "orders"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "reviews"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "restaurants"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "categories"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "product_categories" ("title", "created_at", "updated_at", "id", "restaurant_id") VALUES ('MyString', '2020-04-05 14:27:06.457590', '2020-04-05 14:27:06.457590', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "product_categories" ("title", "created_at", "updated_at", "id", "restaurant_id") VALUES ('MyString', '2020-04-05 14:27:06.457590', '2020-04-05 14:27:06.457590', 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "order_products" ("quantity", "comment", "created_at", "updated_at", "id", "order_id", "product_id") VALUES (1, 'MyText', '2020-04-05 14:27:06.459328', '2020-04-05 14:27:06.459328', 980190962, 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "order_products" ("quantity", "comment", "created_at", "updated_at", "id", "order_id", "product_id") VALUES (1, 'MyText', '2020-04-05 14:27:06.459328', '2020-04-05 14:27:06.459328', 298486374, 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "orders" ("name", "phone_number", "total_value", "address", "status", "created_at", "updated_at", "id", "restaurant_id") VALUES ('MyString', 'MyString', 1.5, 'MyString', 1, '2020-04-05 14:27:06.460757', '2020-04-05 14:27:06.460757', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "orders" ("name", "phone_number", "total_value", "address", "status", "created_at", "updated_at", "id", "restaurant_id") VALUES ('MyString', 'MyString', 1.5, 'MyString', 1, '2020-04-05 14:27:06.460757', '2020-04-05 14:27:06.460757', 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "reviews" ("value", "created_at", "updated_at", "id", "restaurant_id") VALUES (1, '2020-04-05 14:27:06.462325', '2020-04-05 14:27:06.462325', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "reviews" ("value", "created_at", "updated_at", "id", "restaurant_id") VALUES (1, '2020-04-05 14:27:06.462325', '2020-04-05 14:27:06.462325', 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "restaurants" ("name", "description", "status", "delivery_tax", "state", "city", "street", "neighborhood", "number", "complement", "reference", "cep", "latitude", "longitude", "created_at", "updated_at", "id", "category_id") VALUES ('MyString', 'MyText', 1, 1.5, 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 1.5, 1.5, '2020-04-05 14:27:06.463509', '2020-04-05 14:27:06.463509', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "restaurants" ("name", "description", "status", "delivery_tax", "state", "city", "street", "neighborhood", "number", "complement", "reference", "cep", "latitude", "longitude", "created_at", "updated_at", "id", "category_id") VALUES ('MyString', 'MyText', 1, 1.5, 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 1.5, 1.5, '2020-04-05 14:27:06.463509', '2020-04-05 14:27:06.463509', 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "categories" ("title", "created_at", "updated_at", "id") VALUES ('MyString', '2020-04-05 14:27:06.465333', '2020-04-05 14:27:06.465333', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "categories" ("title", "created_at", "updated_at", "id") VALUES ('MyString', '2020-04-05 14:27:06.465333', '2020-04-05 14:27:06.465333', 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "products" ("name", "description", "price", "created_at", "updated_at", "id", "product_category_id") VALUES ('MyString', 'MyText', 1.5, '2020-04-05 14:27:06.466337', '2020-04-05 14:27:06.466337', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "products" ("name", "description", "price", "created_at", "updated_at", "id", "product_category_id") VALUES ('MyString', 'MyText', 1.5, '2020-04-05 14:27:06.466337', '2020-04-05 14:27:06.466337', 298486374, 298486374)[0m
  [1m[35m (13.8ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------
CategoriesControllerTest: test_should_get_index
-----------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/categories" for 127.0.0.1 at 2020-04-05 11:27:06 -0300
Processing by CategoriesController#index as HTML
  [1m[36mCategory Load (0.2ms)[0m  [1m[34mSELECT "categories".* FROM "categories" ORDER BY "categories"."title" ASC[0m
[active_model_serializers]   [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT  "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 298486374], ["record_type", "Category"], ["name", "image"], ["LIMIT", 1]]
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Json (7.2ms)
Completed 500 Internal Server Error in 11ms (ActiveRecord: 0.6ms)
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Creating scope :open. Overwriting existing method Restaurant.open.
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "product_categories"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "order_products"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "orders"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "reviews"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "restaurants"[0m
  [1m[36mFixture Delete (0.0ms)[0m  [1m[31mDELETE FROM "categories"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "product_categories" ("title", "created_at", "updated_at", "id", "restaurant_id") VALUES ('MyString', '2020-04-05 14:30:19.749945', '2020-04-05 14:30:19.749945', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "product_categories" ("title", "created_at", "updated_at", "id", "restaurant_id") VALUES ('MyString', '2020-04-05 14:30:19.749945', '2020-04-05 14:30:19.749945', 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "order_products" ("quantity", "comment", "created_at", "updated_at", "id", "order_id", "product_id") VALUES (1, 'MyText', '2020-04-05 14:30:19.751367', '2020-04-05 14:30:19.751367', 980190962, 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "order_products" ("quantity", "comment", "created_at", "updated_at", "id", "order_id", "product_id") VALUES (1, 'MyText', '2020-04-05 14:30:19.751367', '2020-04-05 14:30:19.751367', 298486374, 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "orders" ("name", "phone_number", "total_value", "address", "status", "created_at", "updated_at", "id", "restaurant_id") VALUES ('MyString', 'MyString', 1.5, 'MyString', 1, '2020-04-05 14:30:19.752420', '2020-04-05 14:30:19.752420', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "orders" ("name", "phone_number", "total_value", "address", "status", "created_at", "updated_at", "id", "restaurant_id") VALUES ('MyString', 'MyString', 1.5, 'MyString', 1, '2020-04-05 14:30:19.752420', '2020-04-05 14:30:19.752420', 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.0ms)[0m  [1m[32mINSERT INTO "reviews" ("value", "created_at", "updated_at", "id", "restaurant_id") VALUES (1, '2020-04-05 14:30:19.753500', '2020-04-05 14:30:19.753500', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "reviews" ("value", "created_at", "updated_at", "id", "restaurant_id") VALUES (1, '2020-04-05 14:30:19.753500', '2020-04-05 14:30:19.753500', 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "restaurants" ("name", "description", "status", "delivery_tax", "state", "city", "street", "neighborhood", "number", "complement", "reference", "cep", "latitude", "longitude", "created_at", "updated_at", "id", "category_id") VALUES ('MyString', 'MyText', 1, 1.5, 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 1.5, 1.5, '2020-04-05 14:30:19.754348', '2020-04-05 14:30:19.754348', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "restaurants" ("name", "description", "status", "delivery_tax", "state", "city", "street", "neighborhood", "number", "complement", "reference", "cep", "latitude", "longitude", "created_at", "updated_at", "id", "category_id") VALUES ('MyString', 'MyText', 1, 1.5, 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 1.5, 1.5, '2020-04-05 14:30:19.754348', '2020-04-05 14:30:19.754348', 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.0ms)[0m  [1m[32mINSERT INTO "categories" ("title", "created_at", "updated_at", "id") VALUES ('MyString', '2020-04-05 14:30:19.755720', '2020-04-05 14:30:19.755720', 980190962)[0m
  [1m[36mFixture Insert (0.0ms)[0m  [1m[32mINSERT INTO "categories" ("title", "created_at", "updated_at", "id") VALUES ('MyString', '2020-04-05 14:30:19.755720', '2020-04-05 14:30:19.755720', 298486374)[0m
  [1m[36mFixture Insert (0.0ms)[0m  [1m[32mINSERT INTO "products" ("name", "description", "price", "created_at", "updated_at", "id", "product_category_id") VALUES ('MyString', 'MyText', 1.5, '2020-04-05 14:30:19.765197', '2020-04-05 14:30:19.765197', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.0ms)[0m  [1m[32mINSERT INTO "products" ("name", "description", "price", "created_at", "updated_at", "id", "product_category_id") VALUES ('MyString', 'MyText', 1.5, '2020-04-05 14:30:19.765197', '2020-04-05 14:30:19.765197', 298486374, 298486374)[0m
  [1m[35m (13.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------
CategoriesControllerTest: test_should_get_index
-----------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCategory Create (0.2ms)[0m  [1m[32mINSERT INTO "categories" ("id", "title", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["id", 1], ["title", "mexicana"], ["created_at", "2020-04-05 14:30:19.809511"], ["updated_at", "2020-04-05 14:30:19.809511"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Creating scope :open. Overwriting existing method Restaurant.open.
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "product_categories"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "order_products"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "orders"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "reviews"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "restaurants"[0m
  [1m[36mFixture Delete (0.0ms)[0m  [1m[31mDELETE FROM "categories"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "product_categories" ("title", "created_at", "updated_at", "id", "restaurant_id") VALUES ('MyString', '2020-04-05 14:31:02.128052', '2020-04-05 14:31:02.128052', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "product_categories" ("title", "created_at", "updated_at", "id", "restaurant_id") VALUES ('MyString', '2020-04-05 14:31:02.128052', '2020-04-05 14:31:02.128052', 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "order_products" ("quantity", "comment", "created_at", "updated_at", "id", "order_id", "product_id") VALUES (1, 'MyText', '2020-04-05 14:31:02.129381', '2020-04-05 14:31:02.129381', 980190962, 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "order_products" ("quantity", "comment", "created_at", "updated_at", "id", "order_id", "product_id") VALUES (1, 'MyText', '2020-04-05 14:31:02.129381', '2020-04-05 14:31:02.129381', 298486374, 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "orders" ("name", "phone_number", "total_value", "address", "status", "created_at", "updated_at", "id", "restaurant_id") VALUES ('MyString', 'MyString', 1.5, 'MyString', 1, '2020-04-05 14:31:02.130428', '2020-04-05 14:31:02.130428', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "orders" ("name", "phone_number", "total_value", "address", "status", "created_at", "updated_at", "id", "restaurant_id") VALUES ('MyString', 'MyString', 1.5, 'MyString', 1, '2020-04-05 14:31:02.130428', '2020-04-05 14:31:02.130428', 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "reviews" ("value", "created_at", "updated_at", "id", "restaurant_id") VALUES (1, '2020-04-05 14:31:02.131511', '2020-04-05 14:31:02.131511', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "reviews" ("value", "created_at", "updated_at", "id", "restaurant_id") VALUES (1, '2020-04-05 14:31:02.131511', '2020-04-05 14:31:02.131511', 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "restaurants" ("name", "description", "status", "delivery_tax", "state", "city", "street", "neighborhood", "number", "complement", "reference", "cep", "latitude", "longitude", "created_at", "updated_at", "id", "category_id") VALUES ('MyString', 'MyText', 1, 1.5, 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 1.5, 1.5, '2020-04-05 14:31:02.132486', '2020-04-05 14:31:02.132486', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "restaurants" ("name", "description", "status", "delivery_tax", "state", "city", "street", "neighborhood", "number", "complement", "reference", "cep", "latitude", "longitude", "created_at", "updated_at", "id", "category_id") VALUES ('MyString', 'MyText', 1, 1.5, 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 1.5, 1.5, '2020-04-05 14:31:02.132486', '2020-04-05 14:31:02.132486', 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "categories" ("title", "created_at", "updated_at", "id") VALUES ('MyString', '2020-04-05 14:31:02.133795', '2020-04-05 14:31:02.133795', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "categories" ("title", "created_at", "updated_at", "id") VALUES ('MyString', '2020-04-05 14:31:02.133795', '2020-04-05 14:31:02.133795', 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "products" ("name", "description", "price", "created_at", "updated_at", "id", "product_category_id") VALUES ('MyString', 'MyText', 1.5, '2020-04-05 14:31:02.134612', '2020-04-05 14:31:02.134612', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "products" ("name", "description", "price", "created_at", "updated_at", "id", "product_category_id") VALUES ('MyString', 'MyText', 1.5, '2020-04-05 14:31:02.134612', '2020-04-05 14:31:02.134612', 298486374, 298486374)[0m
  [1m[35m (12.9ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------
CategoriesControllerTest: test_should_get_index
-----------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCategory Create (0.2ms)[0m  [1m[32mINSERT INTO "categories" ("id", "title", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["id", 1], ["title", "mexicana"], ["created_at", "2020-04-05 14:31:02.194173"], ["updated_at", "2020-04-05 14:31:02.194173"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT  "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Category"], ["name", "image"], ["LIMIT", 1]]
[36m  Disk Storage (0.8ms) [0m[32mUploaded file to key: xNZfuqAjpGCrwCUTd4Qt1Rwy (checksum: GQF9otxCszErHnwhJPtaXQ==)[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mActiveStorage::Blob Create (0.1ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["key", "xNZfuqAjpGCrwCUTd4Qt1Rwy"], ["filename", "mexican.jpg"], ["content_type", "image/jpeg"], ["metadata", "{\"identified\":true}"], ["byte_size", 164392], ["checksum", "GQF9otxCszErHnwhJPtaXQ=="], ["created_at", "2020-04-05 14:31:02.306258"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mActiveStorage::Attachment Create (0.2ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "image"], ["record_type", "Category"], ["record_id", 1], ["blob_id", 1], ["created_at", "2020-04-05 14:31:02.314931"]]
  [1m[36mCategory Update (0.1ms)[0m  [1m[33mUPDATE "categories" SET "updated_at" = ? WHERE "categories"."id" = ?[0m  [["updated_at", "2020-04-05 14:31:02.315725"], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: 41227bf7-c726-4011-be73-9c6288fe87ab) to Async(default) with arguments: #<GlobalID:0x000055ded2084268 @uri=#<URI::GID gid://ihungry/ActiveStorage::Blob/1>>
Started GET "/categories" for 127.0.0.1 at 2020-04-05 11:31:02 -0300
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT  "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [41227bf7-c726-4011-be73-9c6288fe87ab] Performing ActiveStorage::AnalyzeJob (Job ID: 41227bf7-c726-4011-be73-9c6288fe87ab) from Async(default) with arguments: #<GlobalID:0x00007f1360063040 @uri=#<URI::GID gid://ihungry/ActiveStorage::Blob/1>>
[ActiveJob] [ActiveStorage::AnalyzeJob] [41227bf7-c726-4011-be73-9c6288fe87ab] [36m  Disk Storage (0.2ms) [0m[34mDownloaded file from key: xNZfuqAjpGCrwCUTd4Qt1Rwy[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [41227bf7-c726-4011-be73-9c6288fe87ab] Skipping image analysis because the mini_magick gem isn't installed
[ActiveJob] [ActiveStorage::AnalyzeJob] [41227bf7-c726-4011-be73-9c6288fe87ab]   [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [41227bf7-c726-4011-be73-9c6288fe87ab]   [1m[36mActiveStorage::Blob Update (0.1ms)[0m  [1m[33mUPDATE "active_storage_blobs" SET "metadata" = ? WHERE "active_storage_blobs"."id" = ?[0m  [["metadata", "{\"identified\":true,\"analyzed\":true}"], ["id", 1]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [41227bf7-c726-4011-be73-9c6288fe87ab]   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [41227bf7-c726-4011-be73-9c6288fe87ab] Performed ActiveStorage::AnalyzeJob (Job ID: 41227bf7-c726-4011-be73-9c6288fe87ab) from Async(default) in 4.73ms
Processing by CategoriesController#index as HTML
  [1m[36mCategory Load (0.1ms)[0m  [1m[34mSELECT "categories".* FROM "categories" ORDER BY "categories"."title" ASC[0m
[active_model_serializers]   [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT  "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 298486374], ["record_type", "Category"], ["name", "image"], ["LIMIT", 1]]
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Json (2.66ms)
Completed 500 Internal Server Error in 6ms (ActiveRecord: 0.2ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Creating scope :open. Overwriting existing method Restaurant.open.
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "product_categories"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "order_products"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "orders"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "reviews"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "restaurants"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "categories"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "product_categories" ("title", "created_at", "updated_at", "id", "restaurant_id") VALUES ('MyString', '2020-04-05 14:31:22.418869', '2020-04-05 14:31:22.418869', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "product_categories" ("title", "created_at", "updated_at", "id", "restaurant_id") VALUES ('MyString', '2020-04-05 14:31:22.418869', '2020-04-05 14:31:22.418869', 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "order_products" ("quantity", "comment", "created_at", "updated_at", "id", "order_id", "product_id") VALUES (1, 'MyText', '2020-04-05 14:31:22.420168', '2020-04-05 14:31:22.420168', 980190962, 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "order_products" ("quantity", "comment", "created_at", "updated_at", "id", "order_id", "product_id") VALUES (1, 'MyText', '2020-04-05 14:31:22.420168', '2020-04-05 14:31:22.420168', 298486374, 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "orders" ("name", "phone_number", "total_value", "address", "status", "created_at", "updated_at", "id", "restaurant_id") VALUES ('MyString', 'MyString', 1.5, 'MyString', 1, '2020-04-05 14:31:22.421126', '2020-04-05 14:31:22.421126', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "orders" ("name", "phone_number", "total_value", "address", "status", "created_at", "updated_at", "id", "restaurant_id") VALUES ('MyString', 'MyString', 1.5, 'MyString', 1, '2020-04-05 14:31:22.421126', '2020-04-05 14:31:22.421126', 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "reviews" ("value", "created_at", "updated_at", "id", "restaurant_id") VALUES (1, '2020-04-05 14:31:22.422206', '2020-04-05 14:31:22.422206', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "reviews" ("value", "created_at", "updated_at", "id", "restaurant_id") VALUES (1, '2020-04-05 14:31:22.422206', '2020-04-05 14:31:22.422206', 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "restaurants" ("name", "description", "status", "delivery_tax", "state", "city", "street", "neighborhood", "number", "complement", "reference", "cep", "latitude", "longitude", "created_at", "updated_at", "id", "category_id") VALUES ('MyString', 'MyText', 1, 1.5, 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 1.5, 1.5, '2020-04-05 14:31:22.423039', '2020-04-05 14:31:22.423039', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "restaurants" ("name", "description", "status", "delivery_tax", "state", "city", "street", "neighborhood", "number", "complement", "reference", "cep", "latitude", "longitude", "created_at", "updated_at", "id", "category_id") VALUES ('MyString', 'MyText', 1, 1.5, 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 1.5, 1.5, '2020-04-05 14:31:22.423039', '2020-04-05 14:31:22.423039', 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "categories" ("title", "created_at", "updated_at", "id") VALUES ('MyString', '2020-04-05 14:31:22.424421', '2020-04-05 14:31:22.424421', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "categories" ("title", "created_at", "updated_at", "id") VALUES ('MyString', '2020-04-05 14:31:22.424421', '2020-04-05 14:31:22.424421', 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "products" ("name", "description", "price", "created_at", "updated_at", "id", "product_category_id") VALUES ('MyString', 'MyText', 1.5, '2020-04-05 14:31:22.425230', '2020-04-05 14:31:22.425230', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "products" ("name", "description", "price", "created_at", "updated_at", "id", "product_category_id") VALUES ('MyString', 'MyText', 1.5, '2020-04-05 14:31:22.425230', '2020-04-05 14:31:22.425230', 298486374, 298486374)[0m
  [1m[35m (12.8ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------
CategoriesControllerTest: test_should_get_index
-----------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCategory Create (0.2ms)[0m  [1m[32mINSERT INTO "categories" ("id", "title", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["id", 1], ["title", "mexicana"], ["created_at", "2020-04-05 14:31:22.490991"], ["updated_at", "2020-04-05 14:31:22.490991"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT  "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Category"], ["name", "image"], ["LIMIT", 1]]
[36m  Disk Storage (0.9ms) [0m[32mUploaded file to key: RiR55h9BHT24RVd2DaVKwBHF (checksum: GQF9otxCszErHnwhJPtaXQ==)[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mActiveStorage::Blob Create (0.2ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["key", "RiR55h9BHT24RVd2DaVKwBHF"], ["filename", "mexican.jpg"], ["content_type", "image/jpeg"], ["metadata", "{\"identified\":true}"], ["byte_size", 164392], ["checksum", "GQF9otxCszErHnwhJPtaXQ=="], ["created_at", "2020-04-05 14:31:22.562098"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mActiveStorage::Attachment Create (0.1ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "image"], ["record_type", "Category"], ["record_id", 1], ["blob_id", 1], ["created_at", "2020-04-05 14:31:22.569775"]]
  [1m[36mCategory Update (0.1ms)[0m  [1m[33mUPDATE "categories" SET "updated_at" = ? WHERE "categories"."id" = ?[0m  [["updated_at", "2020-04-05 14:31:22.570544"], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: a7ce5698-ebe3-43c4-9ccb-769dceb026f9) to Async(default) with arguments: #<GlobalID:0x000055ded080ddb0 @uri=#<URI::GID gid://ihungry/ActiveStorage::Blob/1>>
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT  "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [a7ce5698-ebe3-43c4-9ccb-769dceb026f9] Performing ActiveStorage::AnalyzeJob (Job ID: a7ce5698-ebe3-43c4-9ccb-769dceb026f9) from Async(default) with arguments: #<GlobalID:0x000055ded0950bf0 @uri=#<URI::GID gid://ihungry/ActiveStorage::Blob/1>>
[ActiveJob] [ActiveStorage::AnalyzeJob] [a7ce5698-ebe3-43c4-9ccb-769dceb026f9] [36m  Disk Storage (4.3ms) [0m[34mDownloaded file from key: RiR55h9BHT24RVd2DaVKwBHF[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [a7ce5698-ebe3-43c4-9ccb-769dceb026f9] Skipping image analysis because the mini_magick gem isn't installed
[ActiveJob] [ActiveStorage::AnalyzeJob] [a7ce5698-ebe3-43c4-9ccb-769dceb026f9]   [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [a7ce5698-ebe3-43c4-9ccb-769dceb026f9]   [1m[36mActiveStorage::Blob Update (0.1ms)[0m  [1m[33mUPDATE "active_storage_blobs" SET "metadata" = ? WHERE "active_storage_blobs"."id" = ?[0m  [["metadata", "{\"identified\":true,\"analyzed\":true}"], ["id", 1]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [a7ce5698-ebe3-43c4-9ccb-769dceb026f9]   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [a7ce5698-ebe3-43c4-9ccb-769dceb026f9] Performed ActiveStorage::AnalyzeJob (Job ID: a7ce5698-ebe3-43c4-9ccb-769dceb026f9) from Async(default) in 12.37ms
Started GET "/categories" for 127.0.0.1 at 2020-04-05 11:31:29 -0300
Processing by CategoriesController#index as HTML
  [1m[36mCategory Load (0.2ms)[0m  [1m[34mSELECT "categories".* FROM "categories" ORDER BY "categories"."title" ASC[0m
[active_model_serializers]   [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT  "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 298486374], ["record_type", "Category"], ["name", "image"], ["LIMIT", 1]]
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Json (3.24ms)
Completed 500 Internal Server Error in 7ms (ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Creating scope :open. Overwriting existing method Restaurant.open.
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "product_categories"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "order_products"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "orders"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "reviews"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "restaurants"[0m
  [1m[36mFixture Delete (0.0ms)[0m  [1m[31mDELETE FROM "categories"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "product_categories" ("title", "created_at", "updated_at", "id", "restaurant_id") VALUES ('MyString', '2020-04-05 14:32:51.953350', '2020-04-05 14:32:51.953350', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "product_categories" ("title", "created_at", "updated_at", "id", "restaurant_id") VALUES ('MyString', '2020-04-05 14:32:51.953350', '2020-04-05 14:32:51.953350', 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "order_products" ("quantity", "comment", "created_at", "updated_at", "id", "order_id", "product_id") VALUES (1, 'MyText', '2020-04-05 14:32:51.954830', '2020-04-05 14:32:51.954830', 980190962, 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "order_products" ("quantity", "comment", "created_at", "updated_at", "id", "order_id", "product_id") VALUES (1, 'MyText', '2020-04-05 14:32:51.954830', '2020-04-05 14:32:51.954830', 298486374, 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "orders" ("name", "phone_number", "total_value", "address", "status", "created_at", "updated_at", "id", "restaurant_id") VALUES ('MyString', 'MyString', 1.5, 'MyString', 1, '2020-04-05 14:32:51.955896', '2020-04-05 14:32:51.955896', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "orders" ("name", "phone_number", "total_value", "address", "status", "created_at", "updated_at", "id", "restaurant_id") VALUES ('MyString', 'MyString', 1.5, 'MyString', 1, '2020-04-05 14:32:51.955896', '2020-04-05 14:32:51.955896', 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.0ms)[0m  [1m[32mINSERT INTO "reviews" ("value", "created_at", "updated_at", "id", "restaurant_id") VALUES (1, '2020-04-05 14:32:51.957237', '2020-04-05 14:32:51.957237', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.0ms)[0m  [1m[32mINSERT INTO "reviews" ("value", "created_at", "updated_at", "id", "restaurant_id") VALUES (1, '2020-04-05 14:32:51.957237', '2020-04-05 14:32:51.957237', 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "restaurants" ("name", "description", "status", "delivery_tax", "state", "city", "street", "neighborhood", "number", "complement", "reference", "cep", "latitude", "longitude", "created_at", "updated_at", "id", "category_id") VALUES ('MyString', 'MyText', 1, 1.5, 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 1.5, 1.5, '2020-04-05 14:32:51.958966', '2020-04-05 14:32:51.958966', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "restaurants" ("name", "description", "status", "delivery_tax", "state", "city", "street", "neighborhood", "number", "complement", "reference", "cep", "latitude", "longitude", "created_at", "updated_at", "id", "category_id") VALUES ('MyString', 'MyText', 1, 1.5, 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 1.5, 1.5, '2020-04-05 14:32:51.958966', '2020-04-05 14:32:51.958966', 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "categories" ("title", "created_at", "updated_at", "id") VALUES ('MyString', '2020-04-05 14:32:51.962002', '2020-04-05 14:32:51.962002', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "categories" ("title", "created_at", "updated_at", "id") VALUES ('MyString', '2020-04-05 14:32:51.962002', '2020-04-05 14:32:51.962002', 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "products" ("name", "description", "price", "created_at", "updated_at", "id", "product_category_id") VALUES ('MyString', 'MyText', 1.5, '2020-04-05 14:32:51.963218', '2020-04-05 14:32:51.963218', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "products" ("name", "description", "price", "created_at", "updated_at", "id", "product_category_id") VALUES ('MyString', 'MyText', 1.5, '2020-04-05 14:32:51.963218', '2020-04-05 14:32:51.963218', 298486374, 298486374)[0m
  [1m[35m (13.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------
CategoriesControllerTest: test_should_get_index
-----------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCategory Create (0.2ms)[0m  [1m[32mINSERT INTO "categories" ("id", "title", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["id", 1], ["title", "mexicana"], ["created_at", "2020-04-05 14:32:52.029900"], ["updated_at", "2020-04-05 14:32:52.029900"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT  "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Category"], ["name", "image"], ["LIMIT", 1]]
[36m  Disk Storage (0.8ms) [0m[32mUploaded file to key: iM7ew4xHpJtn3sjLGSohp7Em (checksum: GQF9otxCszErHnwhJPtaXQ==)[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mActiveStorage::Blob Create (0.2ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["key", "iM7ew4xHpJtn3sjLGSohp7Em"], ["filename", "mexican.jpg"], ["content_type", "image/jpeg"], ["metadata", "{\"identified\":true}"], ["byte_size", 164392], ["checksum", "GQF9otxCszErHnwhJPtaXQ=="], ["created_at", "2020-04-05 14:32:52.082013"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mActiveStorage::Attachment Create (0.2ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "image"], ["record_type", "Category"], ["record_id", 1], ["blob_id", 1], ["created_at", "2020-04-05 14:32:52.089092"]]
  [1m[36mCategory Update (0.1ms)[0m  [1m[33mUPDATE "categories" SET "updated_at" = ? WHERE "categories"."id" = ?[0m  [["updated_at", "2020-04-05 14:32:52.090116"], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: ac346473-4304-4faa-959c-beb28bc8c6b4) to Async(default) with arguments: #<GlobalID:0x00007f1368196860 @uri=#<URI::GID gid://ihungry/ActiveStorage::Blob/1>>
  [1m[36mActiveStorage::Blob Load (10.6ms)[0m  [1m[34mSELECT  "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [ac346473-4304-4faa-959c-beb28bc8c6b4] Performing ActiveStorage::AnalyzeJob (Job ID: ac346473-4304-4faa-959c-beb28bc8c6b4) from Async(default) with arguments: #<GlobalID:0x000055ded1207208 @uri=#<URI::GID gid://ihungry/ActiveStorage::Blob/1>>
[ActiveJob] [ActiveStorage::AnalyzeJob] [ac346473-4304-4faa-959c-beb28bc8c6b4] [36m  Disk Storage (1.0ms) [0m[34mDownloaded file from key: iM7ew4xHpJtn3sjLGSohp7Em[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [ac346473-4304-4faa-959c-beb28bc8c6b4] Skipping image analysis because the mini_magick gem isn't installed
[ActiveJob] [ActiveStorage::AnalyzeJob] [ac346473-4304-4faa-959c-beb28bc8c6b4]   [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [ac346473-4304-4faa-959c-beb28bc8c6b4]   [1m[36mActiveStorage::Blob Update (1.3ms)[0m  [1m[33mUPDATE "active_storage_blobs" SET "metadata" = ? WHERE "active_storage_blobs"."id" = ?[0m  [["metadata", "{\"identified\":true,\"analyzed\":true}"], ["id", 1]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [ac346473-4304-4faa-959c-beb28bc8c6b4]   [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [ac346473-4304-4faa-959c-beb28bc8c6b4] Performed ActiveStorage::AnalyzeJob (Job ID: ac346473-4304-4faa-959c-beb28bc8c6b4) from Async(default) in 6849.82ms
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "categories"[0m
Started GET "/categories" for 127.0.0.1 at 2020-04-05 11:33:34 -0300
Processing by CategoriesController#index as HTML
  [1m[36mCategory Load (0.2ms)[0m  [1m[34mSELECT "categories".* FROM "categories" ORDER BY "categories"."title" ASC[0m
[active_model_serializers]   [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT  "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 298486374], ["record_type", "Category"], ["name", "image"], ["LIMIT", 1]]
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Json (3.01ms)
Completed 500 Internal Server Error in 7ms (ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Creating scope :open. Overwriting existing method Restaurant.open.
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "product_categories"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "order_products"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "orders"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "reviews"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "restaurants"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "categories"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "product_categories" ("title", "created_at", "updated_at", "id", "restaurant_id") VALUES ('MyString', '2020-04-05 14:34:04.985197', '2020-04-05 14:34:04.985197', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "product_categories" ("title", "created_at", "updated_at", "id", "restaurant_id") VALUES ('MyString', '2020-04-05 14:34:04.985197', '2020-04-05 14:34:04.985197', 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "order_products" ("quantity", "comment", "created_at", "updated_at", "id", "order_id", "product_id") VALUES (1, 'MyText', '2020-04-05 14:34:04.986512', '2020-04-05 14:34:04.986512', 980190962, 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "order_products" ("quantity", "comment", "created_at", "updated_at", "id", "order_id", "product_id") VALUES (1, 'MyText', '2020-04-05 14:34:04.986512', '2020-04-05 14:34:04.986512', 298486374, 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "orders" ("name", "phone_number", "total_value", "address", "status", "created_at", "updated_at", "id", "restaurant_id") VALUES ('MyString', 'MyString', 1.5, 'MyString', 1, '2020-04-05 14:34:04.987467', '2020-04-05 14:34:04.987467', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "orders" ("name", "phone_number", "total_value", "address", "status", "created_at", "updated_at", "id", "restaurant_id") VALUES ('MyString', 'MyString', 1.5, 'MyString', 1, '2020-04-05 14:34:04.987467', '2020-04-05 14:34:04.987467', 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "reviews" ("value", "created_at", "updated_at", "id", "restaurant_id") VALUES (1, '2020-04-05 14:34:04.988629', '2020-04-05 14:34:04.988629', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "reviews" ("value", "created_at", "updated_at", "id", "restaurant_id") VALUES (1, '2020-04-05 14:34:04.988629', '2020-04-05 14:34:04.988629', 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "restaurants" ("name", "description", "status", "delivery_tax", "state", "city", "street", "neighborhood", "number", "complement", "reference", "cep", "latitude", "longitude", "created_at", "updated_at", "id", "category_id") VALUES ('MyString', 'MyText', 1, 1.5, 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 1.5, 1.5, '2020-04-05 14:34:04.989485', '2020-04-05 14:34:04.989485', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "restaurants" ("name", "description", "status", "delivery_tax", "state", "city", "street", "neighborhood", "number", "complement", "reference", "cep", "latitude", "longitude", "created_at", "updated_at", "id", "category_id") VALUES ('MyString', 'MyText', 1, 1.5, 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 1.5, 1.5, '2020-04-05 14:34:04.989485', '2020-04-05 14:34:04.989485', 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "categories" ("title", "created_at", "updated_at", "id") VALUES ('MyString', '2020-04-05 14:34:04.990794', '2020-04-05 14:34:04.990794', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "categories" ("title", "created_at", "updated_at", "id") VALUES ('MyString', '2020-04-05 14:34:04.990794', '2020-04-05 14:34:04.990794', 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "products" ("name", "description", "price", "created_at", "updated_at", "id", "product_category_id") VALUES ('MyString', 'MyText', 1.5, '2020-04-05 14:34:04.991607', '2020-04-05 14:34:04.991607', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "products" ("name", "description", "price", "created_at", "updated_at", "id", "product_category_id") VALUES ('MyString', 'MyText', 1.5, '2020-04-05 14:34:04.991607', '2020-04-05 14:34:04.991607', 298486374, 298486374)[0m
  [1m[35m (15.1ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------
CategoriesControllerTest: test_should_get_index
-----------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCategory Create (0.2ms)[0m  [1m[32mINSERT INTO "categories" ("id", "title", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["id", 1], ["title", "mexicana"], ["created_at", "2020-04-05 14:34:05.047683"], ["updated_at", "2020-04-05 14:34:05.047683"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT  "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Category"], ["name", "image"], ["LIMIT", 1]]
[36m  Disk Storage (0.8ms) [0m[32mUploaded file to key: SzxTrFRrwDtcZZJnTVYxhEJG (checksum: GQF9otxCszErHnwhJPtaXQ==)[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mActiveStorage::Blob Create (0.2ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["key", "SzxTrFRrwDtcZZJnTVYxhEJG"], ["filename", "mexican.jpg"], ["content_type", "image/jpeg"], ["metadata", "{\"identified\":true}"], ["byte_size", 164392], ["checksum", "GQF9otxCszErHnwhJPtaXQ=="], ["created_at", "2020-04-05 14:34:05.111159"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mActiveStorage::Attachment Create (0.1ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "image"], ["record_type", "Category"], ["record_id", 1], ["blob_id", 1], ["created_at", "2020-04-05 14:34:05.118343"]]
  [1m[36mCategory Update (0.1ms)[0m  [1m[33mUPDATE "categories" SET "updated_at" = ? WHERE "categories"."id" = ?[0m  [["updated_at", "2020-04-05 14:34:05.119135"], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: b0649f90-95a8-4a64-8419-96237a2eee77) to Async(default) with arguments: #<GlobalID:0x000055ded080fef8 @uri=#<URI::GID gid://ihungry/ActiveStorage::Blob/1>>
Started GET "/categories" for 127.0.0.1 at 2020-04-05 11:34:05 -0300
  [1m[36mActiveStorage::Blob Load (10.0ms)[0m  [1m[34mSELECT  "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [b0649f90-95a8-4a64-8419-96237a2eee77] Performing ActiveStorage::AnalyzeJob (Job ID: b0649f90-95a8-4a64-8419-96237a2eee77) from Async(default) with arguments: #<GlobalID:0x00007f1368184160 @uri=#<URI::GID gid://ihungry/ActiveStorage::Blob/1>>
[ActiveJob] [ActiveStorage::AnalyzeJob] [b0649f90-95a8-4a64-8419-96237a2eee77] [36m  Disk Storage (0.2ms) [0m[34mDownloaded file from key: SzxTrFRrwDtcZZJnTVYxhEJG[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [b0649f90-95a8-4a64-8419-96237a2eee77] Skipping image analysis because the mini_magick gem isn't installed
[ActiveJob] [ActiveStorage::AnalyzeJob] [b0649f90-95a8-4a64-8419-96237a2eee77]   [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [b0649f90-95a8-4a64-8419-96237a2eee77]   [1m[36mActiveStorage::Blob Update (0.1ms)[0m  [1m[33mUPDATE "active_storage_blobs" SET "metadata" = ? WHERE "active_storage_blobs"."id" = ?[0m  [["metadata", "{\"identified\":true,\"analyzed\":true}"], ["id", 1]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [b0649f90-95a8-4a64-8419-96237a2eee77]   [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [b0649f90-95a8-4a64-8419-96237a2eee77] Performed ActiveStorage::AnalyzeJob (Job ID: b0649f90-95a8-4a64-8419-96237a2eee77) from Async(default) in 5.14ms
Processing by CategoriesController#index as HTML
  [1m[36mCategory Load (0.1ms)[0m  [1m[34mSELECT "categories".* FROM "categories" ORDER BY "categories"."title" ASC[0m
[active_model_serializers]   [1m[36mActiveStorage::Attachment Load (0.4ms)[0m  [1m[34mSELECT  "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 298486374], ["record_type", "Category"], ["name", "image"], ["LIMIT", 1]]
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Json (399698.64ms)
Completed 500 Internal Server Error in 399707ms (ActiveRecord: 0.5ms)
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Creating scope :open. Overwriting existing method Restaurant.open.
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "product_categories"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "order_products"[0m
  [1m[36mFixture Delete (0.0ms)[0m  [1m[31mDELETE FROM "orders"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "reviews"[0m
  [1m[36mFixture Delete (0.0ms)[0m  [1m[31mDELETE FROM "restaurants"[0m
  [1m[36mFixture Delete (0.0ms)[0m  [1m[31mDELETE FROM "categories"[0m
  [1m[36mFixture Delete (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "product_categories" ("title", "created_at", "updated_at", "id", "restaurant_id") VALUES ('MyString', '2020-04-05 14:40:46.147625', '2020-04-05 14:40:46.147625', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.0ms)[0m  [1m[32mINSERT INTO "product_categories" ("title", "created_at", "updated_at", "id", "restaurant_id") VALUES ('MyString', '2020-04-05 14:40:46.147625', '2020-04-05 14:40:46.147625', 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "order_products" ("quantity", "comment", "created_at", "updated_at", "id", "order_id", "product_id") VALUES (1, 'MyText', '2020-04-05 14:40:46.149066', '2020-04-05 14:40:46.149066', 980190962, 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.0ms)[0m  [1m[32mINSERT INTO "order_products" ("quantity", "comment", "created_at", "updated_at", "id", "order_id", "product_id") VALUES (1, 'MyText', '2020-04-05 14:40:46.149066', '2020-04-05 14:40:46.149066', 298486374, 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "orders" ("name", "phone_number", "total_value", "address", "status", "created_at", "updated_at", "id", "restaurant_id") VALUES ('MyString', 'MyString', 1.5, 'MyString', 1, '2020-04-05 14:40:46.150240', '2020-04-05 14:40:46.150240', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "orders" ("name", "phone_number", "total_value", "address", "status", "created_at", "updated_at", "id", "restaurant_id") VALUES ('MyString', 'MyString', 1.5, 'MyString', 1, '2020-04-05 14:40:46.150240', '2020-04-05 14:40:46.150240', 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.0ms)[0m  [1m[32mINSERT INTO "reviews" ("value", "created_at", "updated_at", "id", "restaurant_id") VALUES (1, '2020-04-05 14:40:46.151505', '2020-04-05 14:40:46.151505', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.0ms)[0m  [1m[32mINSERT INTO "reviews" ("value", "created_at", "updated_at", "id", "restaurant_id") VALUES (1, '2020-04-05 14:40:46.151505', '2020-04-05 14:40:46.151505', 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "restaurants" ("name", "description", "status", "delivery_tax", "state", "city", "street", "neighborhood", "number", "complement", "reference", "cep", "latitude", "longitude", "created_at", "updated_at", "id", "category_id") VALUES ('MyString', 'MyText', 1, 1.5, 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 1.5, 1.5, '2020-04-05 14:40:46.152487', '2020-04-05 14:40:46.152487', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "restaurants" ("name", "description", "status", "delivery_tax", "state", "city", "street", "neighborhood", "number", "complement", "reference", "cep", "latitude", "longitude", "created_at", "updated_at", "id", "category_id") VALUES ('MyString', 'MyText', 1, 1.5, 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 1.5, 1.5, '2020-04-05 14:40:46.152487', '2020-04-05 14:40:46.152487', 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.0ms)[0m  [1m[32mINSERT INTO "categories" ("title", "created_at", "updated_at", "id") VALUES ('MyString', '2020-04-05 14:40:46.153900', '2020-04-05 14:40:46.153900', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "categories" ("title", "created_at", "updated_at", "id") VALUES ('MyString', '2020-04-05 14:40:46.153900', '2020-04-05 14:40:46.153900', 298486374)[0m
  [1m[36mFixture Insert (0.0ms)[0m  [1m[32mINSERT INTO "products" ("name", "description", "price", "created_at", "updated_at", "id", "product_category_id") VALUES ('MyString', 'MyText', 1.5, '2020-04-05 14:40:46.154782', '2020-04-05 14:40:46.154782', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.0ms)[0m  [1m[32mINSERT INTO "products" ("name", "description", "price", "created_at", "updated_at", "id", "product_category_id") VALUES ('MyString', 'MyText', 1.5, '2020-04-05 14:40:46.154782', '2020-04-05 14:40:46.154782', 298486374, 298486374)[0m
  [1m[35m (13.5ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------
CategoriesControllerTest: test_should_get_index
-----------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCategory Create (0.2ms)[0m  [1m[32mINSERT INTO "categories" ("id", "title", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["id", 1], ["title", "mexicana"], ["created_at", "2020-04-05 14:40:46.245189"], ["updated_at", "2020-04-05 14:40:46.245189"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT  "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Category"], ["name", "image"], ["LIMIT", 1]]
[36m  Disk Storage (1.0ms) [0m[32mUploaded file to key: apmE868qsQdD3reEqe1cbAaG (checksum: GQF9otxCszErHnwhJPtaXQ==)[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mActiveStorage::Blob Create (0.1ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["key", "apmE868qsQdD3reEqe1cbAaG"], ["filename", "mexican.jpg"], ["content_type", "image/jpeg"], ["metadata", "{\"identified\":true}"], ["byte_size", 164392], ["checksum", "GQF9otxCszErHnwhJPtaXQ=="], ["created_at", "2020-04-05 14:40:46.267040"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mActiveStorage::Attachment Create (0.1ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "image"], ["record_type", "Category"], ["record_id", 1], ["blob_id", 1], ["created_at", "2020-04-05 14:40:46.273144"]]
  [1m[36mCategory Update (0.1ms)[0m  [1m[33mUPDATE "categories" SET "updated_at" = ? WHERE "categories"."id" = ?[0m  [["updated_at", "2020-04-05 14:40:46.273809"], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: f7413c63-4711-490f-93ae-27c05473ec43) to Async(default) with arguments: #<GlobalID:0x000055ded1e13150 @uri=#<URI::GID gid://ihungry/ActiveStorage::Blob/1>>
  [1m[36mActiveStorage::Blob Load (10.0ms)[0m  [1m[34mSELECT  "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [f7413c63-4711-490f-93ae-27c05473ec43] Performing ActiveStorage::AnalyzeJob (Job ID: f7413c63-4711-490f-93ae-27c05473ec43) from Async(default) with arguments: #<GlobalID:0x00007f136002b398 @uri=#<URI::GID gid://ihungry/ActiveStorage::Blob/1>>
[ActiveJob] [ActiveStorage::AnalyzeJob] [f7413c63-4711-490f-93ae-27c05473ec43] [36m  Disk Storage (0.9ms) [0m[34mDownloaded file from key: apmE868qsQdD3reEqe1cbAaG[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [f7413c63-4711-490f-93ae-27c05473ec43] Skipping image analysis because the mini_magick gem isn't installed
[ActiveJob] [ActiveStorage::AnalyzeJob] [f7413c63-4711-490f-93ae-27c05473ec43]   [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [f7413c63-4711-490f-93ae-27c05473ec43]   [1m[36mActiveStorage::Blob Update (0.1ms)[0m  [1m[33mUPDATE "active_storage_blobs" SET "metadata" = ? WHERE "active_storage_blobs"."id" = ?[0m  [["metadata", "{\"identified\":true,\"analyzed\":true}"], ["id", 1]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [f7413c63-4711-490f-93ae-27c05473ec43]   [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [f7413c63-4711-490f-93ae-27c05473ec43] Performed ActiveStorage::AnalyzeJob (Job ID: f7413c63-4711-490f-93ae-27c05473ec43) from Async(default) in 28226.89ms
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Creating scope :open. Overwriting existing method Restaurant.open.
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "product_categories"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "order_products"[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "orders"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "reviews"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "restaurants"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "categories"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "product_categories" ("title", "created_at", "updated_at", "id", "restaurant_id") VALUES ('MyString', '2020-04-05 14:41:15.991354', '2020-04-05 14:41:15.991354', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "product_categories" ("title", "created_at", "updated_at", "id", "restaurant_id") VALUES ('MyString', '2020-04-05 14:41:15.991354', '2020-04-05 14:41:15.991354', 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "order_products" ("quantity", "comment", "created_at", "updated_at", "id", "order_id", "product_id") VALUES (1, 'MyText', '2020-04-05 14:41:15.992822', '2020-04-05 14:41:15.992822', 980190962, 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "order_products" ("quantity", "comment", "created_at", "updated_at", "id", "order_id", "product_id") VALUES (1, 'MyText', '2020-04-05 14:41:15.992822', '2020-04-05 14:41:15.992822', 298486374, 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "orders" ("name", "phone_number", "total_value", "address", "status", "created_at", "updated_at", "id", "restaurant_id") VALUES ('MyString', 'MyString', 1.5, 'MyString', 1, '2020-04-05 14:41:15.993844', '2020-04-05 14:41:15.993844', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "orders" ("name", "phone_number", "total_value", "address", "status", "created_at", "updated_at", "id", "restaurant_id") VALUES ('MyString', 'MyString', 1.5, 'MyString', 1, '2020-04-05 14:41:15.993844', '2020-04-05 14:41:15.993844', 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.0ms)[0m  [1m[32mINSERT INTO "reviews" ("value", "created_at", "updated_at", "id", "restaurant_id") VALUES (1, '2020-04-05 14:41:15.994962', '2020-04-05 14:41:15.994962', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "reviews" ("value", "created_at", "updated_at", "id", "restaurant_id") VALUES (1, '2020-04-05 14:41:15.994962', '2020-04-05 14:41:15.994962', 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "restaurants" ("name", "description", "status", "delivery_tax", "state", "city", "street", "neighborhood", "number", "complement", "reference", "cep", "latitude", "longitude", "created_at", "updated_at", "id", "category_id") VALUES ('MyString', 'MyText', 1, 1.5, 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 1.5, 1.5, '2020-04-05 14:41:15.995880', '2020-04-05 14:41:15.995880', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "restaurants" ("name", "description", "status", "delivery_tax", "state", "city", "street", "neighborhood", "number", "complement", "reference", "cep", "latitude", "longitude", "created_at", "updated_at", "id", "category_id") VALUES ('MyString', 'MyText', 1, 1.5, 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 1.5, 1.5, '2020-04-05 14:41:15.995880', '2020-04-05 14:41:15.995880', 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "categories" ("title", "created_at", "updated_at", "id") VALUES ('MyString', '2020-04-05 14:41:15.997322', '2020-04-05 14:41:15.997322', 980190962)[0m
  [1m[36mFixture Insert (0.0ms)[0m  [1m[32mINSERT INTO "categories" ("title", "created_at", "updated_at", "id") VALUES ('MyString', '2020-04-05 14:41:15.997322', '2020-04-05 14:41:15.997322', 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "products" ("name", "description", "price", "created_at", "updated_at", "id", "product_category_id") VALUES ('MyString', 'MyText', 1.5, '2020-04-05 14:41:15.998203', '2020-04-05 14:41:15.998203', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "products" ("name", "description", "price", "created_at", "updated_at", "id", "product_category_id") VALUES ('MyString', 'MyText', 1.5, '2020-04-05 14:41:15.998203', '2020-04-05 14:41:15.998203', 298486374, 298486374)[0m
  [1m[35m (12.4ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------
CategoriesControllerTest: test_should_get_index
-----------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCategory Create (0.2ms)[0m  [1m[32mINSERT INTO "categories" ("id", "title", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["id", 1], ["title", "mexicana"], ["created_at", "2020-04-05 14:41:16.061751"], ["updated_at", "2020-04-05 14:41:16.061751"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT  "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Category"], ["name", "image"], ["LIMIT", 1]]
[36m  Disk Storage (0.8ms) [0m[32mUploaded file to key: VJchWTKu45yD7WeHiJyQDmuc (checksum: GQF9otxCszErHnwhJPtaXQ==)[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mActiveStorage::Blob Create (0.1ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["key", "VJchWTKu45yD7WeHiJyQDmuc"], ["filename", "mexican.jpg"], ["content_type", "image/jpeg"], ["metadata", "{\"identified\":true}"], ["byte_size", 164392], ["checksum", "GQF9otxCszErHnwhJPtaXQ=="], ["created_at", "2020-04-05 14:41:16.117759"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mActiveStorage::Attachment Create (0.1ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "image"], ["record_type", "Category"], ["record_id", 1], ["blob_id", 1], ["created_at", "2020-04-05 14:41:16.124328"]]
  [1m[36mCategory Update (0.1ms)[0m  [1m[33mUPDATE "categories" SET "updated_at" = ? WHERE "categories"."id" = ?[0m  [["updated_at", "2020-04-05 14:41:16.125075"], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: 4d0b1df0-125b-4b64-8737-4d7367f87d91) to Async(default) with arguments: #<GlobalID:0x00007f13681874a0 @uri=#<URI::GID gid://ihungry/ActiveStorage::Blob/1>>
  [1m[36mActiveStorage::Blob Load (10.3ms)[0m  [1m[34mSELECT  "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [4d0b1df0-125b-4b64-8737-4d7367f87d91] Performing ActiveStorage::AnalyzeJob (Job ID: 4d0b1df0-125b-4b64-8737-4d7367f87d91) from Async(default) with arguments: #<GlobalID:0x000055ded11f7c68 @uri=#<URI::GID gid://ihungry/ActiveStorage::Blob/1>>
[ActiveJob] [ActiveStorage::AnalyzeJob] [4d0b1df0-125b-4b64-8737-4d7367f87d91] [36m  Disk Storage (3.6ms) [0m[34mDownloaded file from key: VJchWTKu45yD7WeHiJyQDmuc[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [4d0b1df0-125b-4b64-8737-4d7367f87d91] Skipping image analysis because the mini_magick gem isn't installed
[ActiveJob] [ActiveStorage::AnalyzeJob] [4d0b1df0-125b-4b64-8737-4d7367f87d91]   [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [4d0b1df0-125b-4b64-8737-4d7367f87d91]   [1m[36mActiveStorage::Blob Update (0.9ms)[0m  [1m[33mUPDATE "active_storage_blobs" SET "metadata" = ? WHERE "active_storage_blobs"."id" = ?[0m  [["metadata", "{\"identified\":true,\"analyzed\":true}"], ["id", 1]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [4d0b1df0-125b-4b64-8737-4d7367f87d91]   [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [4d0b1df0-125b-4b64-8737-4d7367f87d91] Performed ActiveStorage::AnalyzeJob (Job ID: 4d0b1df0-125b-4b64-8737-4d7367f87d91) from Async(default) in 37390.48ms
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Creating scope :open. Overwriting existing method Restaurant.open.
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "product_categories"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "order_products"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "orders"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "reviews"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "restaurants"[0m
  [1m[36mFixture Delete (0.0ms)[0m  [1m[31mDELETE FROM "categories"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "product_categories" ("title", "created_at", "updated_at", "id", "restaurant_id") VALUES ('MyString', '2020-04-05 14:41:55.971168', '2020-04-05 14:41:55.971168', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.0ms)[0m  [1m[32mINSERT INTO "product_categories" ("title", "created_at", "updated_at", "id", "restaurant_id") VALUES ('MyString', '2020-04-05 14:41:55.971168', '2020-04-05 14:41:55.971168', 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "order_products" ("quantity", "comment", "created_at", "updated_at", "id", "order_id", "product_id") VALUES (1, 'MyText', '2020-04-05 14:41:55.972547', '2020-04-05 14:41:55.972547', 980190962, 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.0ms)[0m  [1m[32mINSERT INTO "order_products" ("quantity", "comment", "created_at", "updated_at", "id", "order_id", "product_id") VALUES (1, 'MyText', '2020-04-05 14:41:55.972547', '2020-04-05 14:41:55.972547', 298486374, 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "orders" ("name", "phone_number", "total_value", "address", "status", "created_at", "updated_at", "id", "restaurant_id") VALUES ('MyString', 'MyString', 1.5, 'MyString', 1, '2020-04-05 14:41:55.973645', '2020-04-05 14:41:55.973645', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "orders" ("name", "phone_number", "total_value", "address", "status", "created_at", "updated_at", "id", "restaurant_id") VALUES ('MyString', 'MyString', 1.5, 'MyString', 1, '2020-04-05 14:41:55.973645', '2020-04-05 14:41:55.973645', 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "reviews" ("value", "created_at", "updated_at", "id", "restaurant_id") VALUES (1, '2020-04-05 14:41:55.974824', '2020-04-05 14:41:55.974824', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.0ms)[0m  [1m[32mINSERT INTO "reviews" ("value", "created_at", "updated_at", "id", "restaurant_id") VALUES (1, '2020-04-05 14:41:55.974824', '2020-04-05 14:41:55.974824', 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "restaurants" ("name", "description", "status", "delivery_tax", "state", "city", "street", "neighborhood", "number", "complement", "reference", "cep", "latitude", "longitude", "created_at", "updated_at", "id", "category_id") VALUES ('MyString', 'MyText', 1, 1.5, 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 1.5, 1.5, '2020-04-05 14:41:55.975904', '2020-04-05 14:41:55.975904', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "restaurants" ("name", "description", "status", "delivery_tax", "state", "city", "street", "neighborhood", "number", "complement", "reference", "cep", "latitude", "longitude", "created_at", "updated_at", "id", "category_id") VALUES ('MyString', 'MyText', 1, 1.5, 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 1.5, 1.5, '2020-04-05 14:41:55.975904', '2020-04-05 14:41:55.975904', 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.0ms)[0m  [1m[32mINSERT INTO "categories" ("title", "created_at", "updated_at", "id") VALUES ('MyString', '2020-04-05 14:41:55.977365', '2020-04-05 14:41:55.977365', 980190962)[0m
  [1m[36mFixture Insert (0.0ms)[0m  [1m[32mINSERT INTO "categories" ("title", "created_at", "updated_at", "id") VALUES ('MyString', '2020-04-05 14:41:55.977365', '2020-04-05 14:41:55.977365', 298486374)[0m
  [1m[36mFixture Insert (0.0ms)[0m  [1m[32mINSERT INTO "products" ("name", "description", "price", "created_at", "updated_at", "id", "product_category_id") VALUES ('MyString', 'MyText', 1.5, '2020-04-05 14:41:55.978252', '2020-04-05 14:41:55.978252', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "products" ("name", "description", "price", "created_at", "updated_at", "id", "product_category_id") VALUES ('MyString', 'MyText', 1.5, '2020-04-05 14:41:55.978252', '2020-04-05 14:41:55.978252', 298486374, 298486374)[0m
  [1m[35m (12.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------
CategoriesControllerTest: test_should_get_index
-----------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCategory Create (0.2ms)[0m  [1m[32mINSERT INTO "categories" ("id", "title", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["id", 1], ["title", "mexicana"], ["created_at", "2020-04-05 14:41:56.066472"], ["updated_at", "2020-04-05 14:41:56.066472"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT  "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Category"], ["name", "image"], ["LIMIT", 1]]
[36m  Disk Storage (0.8ms) [0m[32mUploaded file to key: LpuPK3gq69Eu1c7SGMaRydt2 (checksum: GQF9otxCszErHnwhJPtaXQ==)[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mActiveStorage::Blob Create (0.1ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["key", "LpuPK3gq69Eu1c7SGMaRydt2"], ["filename", "mexican.jpg"], ["content_type", "image/jpeg"], ["metadata", "{\"identified\":true}"], ["byte_size", 164392], ["checksum", "GQF9otxCszErHnwhJPtaXQ=="], ["created_at", "2020-04-05 14:41:56.087766"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mActiveStorage::Attachment Create (0.1ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "image"], ["record_type", "Category"], ["record_id", 1], ["blob_id", 1], ["created_at", "2020-04-05 14:41:56.093650"]]
  [1m[36mCategory Update (0.1ms)[0m  [1m[33mUPDATE "categories" SET "updated_at" = ? WHERE "categories"."id" = ?[0m  [["updated_at", "2020-04-05 14:41:56.094296"], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: bafde51e-b6fc-4b37-9d02-c85e1e45a37a) to Async(default) with arguments: #<GlobalID:0x000055ded1e35b38 @uri=#<URI::GID gid://ihungry/ActiveStorage::Blob/1>>
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT  "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [bafde51e-b6fc-4b37-9d02-c85e1e45a37a] Performing ActiveStorage::AnalyzeJob (Job ID: bafde51e-b6fc-4b37-9d02-c85e1e45a37a) from Async(default) with arguments: #<GlobalID:0x000055ded20b87c0 @uri=#<URI::GID gid://ihungry/ActiveStorage::Blob/1>>
[ActiveJob] [ActiveStorage::AnalyzeJob] [bafde51e-b6fc-4b37-9d02-c85e1e45a37a] [36m  Disk Storage (0.8ms) [0m[34mDownloaded file from key: LpuPK3gq69Eu1c7SGMaRydt2[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [bafde51e-b6fc-4b37-9d02-c85e1e45a37a] Skipping image analysis because the mini_magick gem isn't installed
[ActiveJob] [ActiveStorage::AnalyzeJob] [bafde51e-b6fc-4b37-9d02-c85e1e45a37a]   [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [bafde51e-b6fc-4b37-9d02-c85e1e45a37a]   [1m[36mActiveStorage::Blob Update (0.4ms)[0m  [1m[33mUPDATE "active_storage_blobs" SET "metadata" = ? WHERE "active_storage_blobs"."id" = ?[0m  [["metadata", "{\"identified\":true,\"analyzed\":true}"], ["id", 1]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [bafde51e-b6fc-4b37-9d02-c85e1e45a37a]   [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [bafde51e-b6fc-4b37-9d02-c85e1e45a37a] Performed ActiveStorage::AnalyzeJob (Job ID: bafde51e-b6fc-4b37-9d02-c85e1e45a37a) from Async(default) in 8830.0ms
  [1m[36mCategory Load (32.8ms)[0m  [1m[34mSELECT  "categories".* FROM "categories" ORDER BY "categories"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "categories"[0m
  [1m[36mCategory Load (0.5ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT  "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Category"], ["name", "image"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT  "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT  "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 298486374], ["record_type", "Category"], ["name", "image"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT  "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 980190962], ["record_type", "Category"], ["name", "image"], ["LIMIT", 1]]
  [1m[36mCategory Load (0.4ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  [1m[36mActiveStorage::Attachment Load (0.4ms)[0m  [1m[34mSELECT  "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Category"], ["name", "image"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Blob Load (0.3ms)[0m  [1m[34mSELECT  "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mActiveStorage::Attachment Load (0.3ms)[0m  [1m[34mSELECT  "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 298486374], ["record_type", "Category"], ["name", "image"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT  "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 980190962], ["record_type", "Category"], ["name", "image"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Creating scope :open. Overwriting existing method Restaurant.open.
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "product_categories"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "order_products"[0m
  [1m[36mFixture Delete (0.0ms)[0m  [1m[31mDELETE FROM "orders"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "reviews"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "restaurants"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "categories"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "product_categories" ("title", "created_at", "updated_at", "id", "restaurant_id") VALUES ('MyString', '2020-04-05 14:43:39.493070', '2020-04-05 14:43:39.493070', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "product_categories" ("title", "created_at", "updated_at", "id", "restaurant_id") VALUES ('MyString', '2020-04-05 14:43:39.493070', '2020-04-05 14:43:39.493070', 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "order_products" ("quantity", "comment", "created_at", "updated_at", "id", "order_id", "product_id") VALUES (1, 'MyText', '2020-04-05 14:43:39.495277', '2020-04-05 14:43:39.495277', 980190962, 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "order_products" ("quantity", "comment", "created_at", "updated_at", "id", "order_id", "product_id") VALUES (1, 'MyText', '2020-04-05 14:43:39.495277', '2020-04-05 14:43:39.495277', 298486374, 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "orders" ("name", "phone_number", "total_value", "address", "status", "created_at", "updated_at", "id", "restaurant_id") VALUES ('MyString', 'MyString', 1.5, 'MyString', 1, '2020-04-05 14:43:39.496736', '2020-04-05 14:43:39.496736', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "orders" ("name", "phone_number", "total_value", "address", "status", "created_at", "updated_at", "id", "restaurant_id") VALUES ('MyString', 'MyString', 1.5, 'MyString', 1, '2020-04-05 14:43:39.496736', '2020-04-05 14:43:39.496736', 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "reviews" ("value", "created_at", "updated_at", "id", "restaurant_id") VALUES (1, '2020-04-05 14:43:39.498362', '2020-04-05 14:43:39.498362', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.0ms)[0m  [1m[32mINSERT INTO "reviews" ("value", "created_at", "updated_at", "id", "restaurant_id") VALUES (1, '2020-04-05 14:43:39.498362', '2020-04-05 14:43:39.498362', 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "restaurants" ("name", "description", "status", "delivery_tax", "state", "city", "street", "neighborhood", "number", "complement", "reference", "cep", "latitude", "longitude", "created_at", "updated_at", "id", "category_id") VALUES ('MyString', 'MyText', 1, 1.5, 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 1.5, 1.5, '2020-04-05 14:43:39.499405', '2020-04-05 14:43:39.499405', 980190962, 980190962)[0m
  [1m[36mFixture Insert (6.8ms)[0m  [1m[32mINSERT INTO "restaurants" ("name", "description", "status", "delivery_tax", "state", "city", "street", "neighborhood", "number", "complement", "reference", "cep", "latitude", "longitude", "created_at", "updated_at", "id", "category_id") VALUES ('MyString', 'MyText', 1, 1.5, 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 1.5, 1.5, '2020-04-05 14:43:39.499405', '2020-04-05 14:43:39.499405', 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "categories" ("title", "created_at", "updated_at", "id") VALUES ('MyString', '2020-04-05 14:43:39.500934', '2020-04-05 14:43:39.500934', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "categories" ("title", "created_at", "updated_at", "id") VALUES ('MyString', '2020-04-05 14:43:39.500934', '2020-04-05 14:43:39.500934', 298486374)[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "products" ("name", "description", "price", "created_at", "updated_at", "id", "product_category_id") VALUES ('MyString', 'MyText', 1.5, '2020-04-05 14:43:39.501851', '2020-04-05 14:43:39.501851', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "products" ("name", "description", "price", "created_at", "updated_at", "id", "product_category_id") VALUES ('MyString', 'MyText', 1.5, '2020-04-05 14:43:39.501851', '2020-04-05 14:43:39.501851', 298486374, 298486374)[0m
  [1m[35m (12.9ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------
CategoriesControllerTest: test_should_get_index
-----------------------------------------------
  [1m[36mCategory Load (0.2ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCategory Destroy (0.2ms)[0m  [1m[31mDELETE FROM "categories" WHERE "categories"."id" = ?[0m  [["id", 298486374]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT  "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 298486374], ["record_type", "Category"], ["name", "image"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCategory Destroy (0.1ms)[0m  [1m[31mDELETE FROM "categories" WHERE "categories"."id" = ?[0m  [["id", 980190962]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT  "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 980190962], ["record_type", "Category"], ["name", "image"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCategory Create (0.1ms)[0m  [1m[32mINSERT INTO "categories" ("id", "title", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["id", 1], ["title", "mexicana"], ["created_at", "2020-04-05 14:43:39.584534"], ["updated_at", "2020-04-05 14:43:39.584534"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT  "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Category"], ["name", "image"], ["LIMIT", 1]]
[36m  Disk Storage (0.9ms) [0m[32mUploaded file to key: vZ6Qxh6FEGzihcYCDW6tg1jR (checksum: GQF9otxCszErHnwhJPtaXQ==)[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mActiveStorage::Blob Create (0.1ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["key", "vZ6Qxh6FEGzihcYCDW6tg1jR"], ["filename", "mexican.jpg"], ["content_type", "image/jpeg"], ["metadata", "{\"identified\":true}"], ["byte_size", 164392], ["checksum", "GQF9otxCszErHnwhJPtaXQ=="], ["created_at", "2020-04-05 14:43:39.625053"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mActiveStorage::Attachment Create (0.1ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "image"], ["record_type", "Category"], ["record_id", 1], ["blob_id", 1], ["created_at", "2020-04-05 14:43:39.631526"]]
  [1m[36mCategory Update (0.1ms)[0m  [1m[33mUPDATE "categories" SET "updated_at" = ? WHERE "categories"."id" = ?[0m  [["updated_at", "2020-04-05 14:43:39.632250"], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: 16837f3b-9761-4076-8a4e-7c6642500531) to Async(default) with arguments: #<GlobalID:0x00007f1368309760 @uri=#<URI::GID gid://ihungry/ActiveStorage::Blob/1>>
Started GET "/categories" for 127.0.0.1 at 2020-04-05 11:43:39 -0300
  [1m[36mActiveStorage::Blob Load (9.7ms)[0m  [1m[34mSELECT  "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [16837f3b-9761-4076-8a4e-7c6642500531] Performing ActiveStorage::AnalyzeJob (Job ID: 16837f3b-9761-4076-8a4e-7c6642500531) from Async(default) with arguments: #<GlobalID:0x00007f1360023c10 @uri=#<URI::GID gid://ihungry/ActiveStorage::Blob/1>>
[ActiveJob] [ActiveStorage::AnalyzeJob] [16837f3b-9761-4076-8a4e-7c6642500531] [36m  Disk Storage (0.3ms) [0m[34mDownloaded file from key: vZ6Qxh6FEGzihcYCDW6tg1jR[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [16837f3b-9761-4076-8a4e-7c6642500531] Skipping image analysis because the mini_magick gem isn't installed
[ActiveJob] [ActiveStorage::AnalyzeJob] [16837f3b-9761-4076-8a4e-7c6642500531]   [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [16837f3b-9761-4076-8a4e-7c6642500531]   [1m[36mActiveStorage::Blob Update (0.2ms)[0m  [1m[33mUPDATE "active_storage_blobs" SET "metadata" = ? WHERE "active_storage_blobs"."id" = ?[0m  [["metadata", "{\"identified\":true,\"analyzed\":true}"], ["id", 1]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [16837f3b-9761-4076-8a4e-7c6642500531]   [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [16837f3b-9761-4076-8a4e-7c6642500531] Performed ActiveStorage::AnalyzeJob (Job ID: 16837f3b-9761-4076-8a4e-7c6642500531) from Async(default) in 5.75ms
Processing by CategoriesController#index as HTML
  [1m[36mCategory Load (0.1ms)[0m  [1m[34mSELECT "categories".* FROM "categories" ORDER BY "categories"."title" ASC[0m
[active_model_serializers]   [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT  "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Category"], ["name", "image"], ["LIMIT", 1]]
[active_model_serializers]   [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT  "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Json (2.92ms)
Completed 500 Internal Server Error in 6ms (ActiveRecord: 0.2ms)
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Creating scope :open. Overwriting existing method Restaurant.open.
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "product_categories"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "order_products"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "orders"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "reviews"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "restaurants"[0m
  [1m[36mFixture Delete (0.0ms)[0m  [1m[31mDELETE FROM "categories"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "product_categories" ("title", "created_at", "updated_at", "id", "restaurant_id") VALUES ('MyString', '2020-04-05 14:46:54.518454', '2020-04-05 14:46:54.518454', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "product_categories" ("title", "created_at", "updated_at", "id", "restaurant_id") VALUES ('MyString', '2020-04-05 14:46:54.518454', '2020-04-05 14:46:54.518454', 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "order_products" ("quantity", "comment", "created_at", "updated_at", "id", "order_id", "product_id") VALUES (1, 'MyText', '2020-04-05 14:46:54.522064', '2020-04-05 14:46:54.522064', 980190962, 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "order_products" ("quantity", "comment", "created_at", "updated_at", "id", "order_id", "product_id") VALUES (1, 'MyText', '2020-04-05 14:46:54.522064', '2020-04-05 14:46:54.522064', 298486374, 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "orders" ("name", "phone_number", "total_value", "address", "status", "created_at", "updated_at", "id", "restaurant_id") VALUES ('MyString', 'MyString', 1.5, 'MyString', 1, '2020-04-05 14:46:54.524950', '2020-04-05 14:46:54.524950', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "orders" ("name", "phone_number", "total_value", "address", "status", "created_at", "updated_at", "id", "restaurant_id") VALUES ('MyString', 'MyString', 1.5, 'MyString', 1, '2020-04-05 14:46:54.524950', '2020-04-05 14:46:54.524950', 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "reviews" ("value", "created_at", "updated_at", "id", "restaurant_id") VALUES (1, '2020-04-05 14:46:54.526509', '2020-04-05 14:46:54.526509', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "reviews" ("value", "created_at", "updated_at", "id", "restaurant_id") VALUES (1, '2020-04-05 14:46:54.526509', '2020-04-05 14:46:54.526509', 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "restaurants" ("name", "description", "status", "delivery_tax", "state", "city", "street", "neighborhood", "number", "complement", "reference", "cep", "latitude", "longitude", "created_at", "updated_at", "id", "category_id") VALUES ('MyString', 'MyText', 1, 1.5, 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 1.5, 1.5, '2020-04-05 14:46:54.527637', '2020-04-05 14:46:54.527637', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "restaurants" ("name", "description", "status", "delivery_tax", "state", "city", "street", "neighborhood", "number", "complement", "reference", "cep", "latitude", "longitude", "created_at", "updated_at", "id", "category_id") VALUES ('MyString', 'MyText', 1, 1.5, 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 1.5, 1.5, '2020-04-05 14:46:54.527637', '2020-04-05 14:46:54.527637', 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "categories" ("title", "created_at", "updated_at", "id") VALUES ('MyString', '2020-04-05 14:46:54.530727', '2020-04-05 14:46:54.530727', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "categories" ("title", "created_at", "updated_at", "id") VALUES ('MyString', '2020-04-05 14:46:54.530727', '2020-04-05 14:46:54.530727', 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "products" ("name", "description", "price", "created_at", "updated_at", "id", "product_category_id") VALUES ('MyString', 'MyText', 1.5, '2020-04-05 14:46:54.531610', '2020-04-05 14:46:54.531610', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "products" ("name", "description", "price", "created_at", "updated_at", "id", "product_category_id") VALUES ('MyString', 'MyText', 1.5, '2020-04-05 14:46:54.531610', '2020-04-05 14:46:54.531610', 298486374, 298486374)[0m
  [1m[35m (12.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------
CategoriesControllerTest: test_should_get_index
-----------------------------------------------
  [1m[36mCategory Load (0.2ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCategory Destroy (0.2ms)[0m  [1m[31mDELETE FROM "categories" WHERE "categories"."id" = ?[0m  [["id", 298486374]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT  "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 298486374], ["record_type", "Category"], ["name", "image"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCategory Destroy (0.1ms)[0m  [1m[31mDELETE FROM "categories" WHERE "categories"."id" = ?[0m  [["id", 980190962]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT  "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 980190962], ["record_type", "Category"], ["name", "image"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCategory Create (0.1ms)[0m  [1m[32mINSERT INTO "categories" ("id", "title", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["id", 1], ["title", "mexicana"], ["created_at", "2020-04-05 14:46:54.614489"], ["updated_at", "2020-04-05 14:46:54.614489"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT  "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Category"], ["name", "image"], ["LIMIT", 1]]
[36m  Disk Storage (0.7ms) [0m[32mUploaded file to key: j76AAkrmbkaEp75TLWb5gPYj (checksum: GQF9otxCszErHnwhJPtaXQ==)[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mActiveStorage::Blob Create (0.1ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["key", "j76AAkrmbkaEp75TLWb5gPYj"], ["filename", "mexican.jpg"], ["content_type", "image/jpeg"], ["metadata", "{\"identified\":true}"], ["byte_size", 164392], ["checksum", "GQF9otxCszErHnwhJPtaXQ=="], ["created_at", "2020-04-05 14:46:54.629911"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mActiveStorage::Attachment Create (0.1ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "image"], ["record_type", "Category"], ["record_id", 1], ["blob_id", 1], ["created_at", "2020-04-05 14:46:54.635430"]]
  [1m[36mCategory Update (0.1ms)[0m  [1m[33mUPDATE "categories" SET "updated_at" = ? WHERE "categories"."id" = ?[0m  [["updated_at", "2020-04-05 14:46:54.636033"], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: 3ac7eebc-52db-48f0-8e80-253b1d8fed5a) to Async(default) with arguments: #<GlobalID:0x000055a35051db20 @uri=#<URI::GID gid://ihungry/ActiveStorage::Blob/1>>
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT  "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [3ac7eebc-52db-48f0-8e80-253b1d8fed5a] Performing ActiveStorage::AnalyzeJob (Job ID: 3ac7eebc-52db-48f0-8e80-253b1d8fed5a) from Async(default) with arguments: #<GlobalID:0x00007f20cc03ed70 @uri=#<URI::GID gid://ihungry/ActiveStorage::Blob/1>>
Started GET "/categories" for 127.0.0.1 at 2020-04-05 11:46:54 -0300
[ActiveJob] [ActiveStorage::AnalyzeJob] [3ac7eebc-52db-48f0-8e80-253b1d8fed5a] [36m  Disk Storage (1.7ms) [0m[34mDownloaded file from key: j76AAkrmbkaEp75TLWb5gPYj[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [3ac7eebc-52db-48f0-8e80-253b1d8fed5a] Skipping image analysis because the mini_magick gem isn't installed
[ActiveJob] [ActiveStorage::AnalyzeJob] [3ac7eebc-52db-48f0-8e80-253b1d8fed5a]   [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [3ac7eebc-52db-48f0-8e80-253b1d8fed5a]   [1m[36mActiveStorage::Blob Update (0.1ms)[0m  [1m[33mUPDATE "active_storage_blobs" SET "metadata" = ? WHERE "active_storage_blobs"."id" = ?[0m  [["metadata", "{\"identified\":true,\"analyzed\":true}"], ["id", 1]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [3ac7eebc-52db-48f0-8e80-253b1d8fed5a]   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [3ac7eebc-52db-48f0-8e80-253b1d8fed5a] Performed ActiveStorage::AnalyzeJob (Job ID: 3ac7eebc-52db-48f0-8e80-253b1d8fed5a) from Async(default) in 13.31ms
Processing by CategoriesController#index as HTML
  [1m[36mCategory Load (0.1ms)[0m  [1m[34mSELECT "categories".* FROM "categories" ORDER BY "categories"."title" ASC[0m
[active_model_serializers]   [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT  "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Category"], ["name", "image"], ["LIMIT", 1]]
[active_model_serializers]   [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT  "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Json (2.28ms)
Completed 200 OK in 5ms (Views: 4.4ms | ActiveRecord: 0.2ms)
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Creating scope :open. Overwriting existing method Restaurant.open.
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "product_categories"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "order_products"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "orders"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "reviews"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "restaurants"[0m
  [1m[36mFixture Delete (0.0ms)[0m  [1m[31mDELETE FROM "categories"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "product_categories" ("title", "created_at", "updated_at", "id", "restaurant_id") VALUES ('MyString', '2020-04-05 14:47:29.013053', '2020-04-05 14:47:29.013053', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "product_categories" ("title", "created_at", "updated_at", "id", "restaurant_id") VALUES ('MyString', '2020-04-05 14:47:29.013053', '2020-04-05 14:47:29.013053', 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.8ms)[0m  [1m[32mINSERT INTO "order_products" ("quantity", "comment", "created_at", "updated_at", "id", "order_id", "product_id") VALUES (1, 'MyText', '2020-04-05 14:47:29.015041', '2020-04-05 14:47:29.015041', 980190962, 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "order_products" ("quantity", "comment", "created_at", "updated_at", "id", "order_id", "product_id") VALUES (1, 'MyText', '2020-04-05 14:47:29.015041', '2020-04-05 14:47:29.015041', 298486374, 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "orders" ("name", "phone_number", "total_value", "address", "status", "created_at", "updated_at", "id", "restaurant_id") VALUES ('MyString', 'MyString', 1.5, 'MyString', 1, '2020-04-05 14:47:29.017445', '2020-04-05 14:47:29.017445', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "orders" ("name", "phone_number", "total_value", "address", "status", "created_at", "updated_at", "id", "restaurant_id") VALUES ('MyString', 'MyString', 1.5, 'MyString', 1, '2020-04-05 14:47:29.017445', '2020-04-05 14:47:29.017445', 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.0ms)[0m  [1m[32mINSERT INTO "reviews" ("value", "created_at", "updated_at", "id", "restaurant_id") VALUES (1, '2020-04-05 14:47:29.019131', '2020-04-05 14:47:29.019131', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.9ms)[0m  [1m[32mINSERT INTO "reviews" ("value", "created_at", "updated_at", "id", "restaurant_id") VALUES (1, '2020-04-05 14:47:29.019131', '2020-04-05 14:47:29.019131', 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "restaurants" ("name", "description", "status", "delivery_tax", "state", "city", "street", "neighborhood", "number", "complement", "reference", "cep", "latitude", "longitude", "created_at", "updated_at", "id", "category_id") VALUES ('MyString', 'MyText', 1, 1.5, 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 1.5, 1.5, '2020-04-05 14:47:29.020789', '2020-04-05 14:47:29.020789', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "restaurants" ("name", "description", "status", "delivery_tax", "state", "city", "street", "neighborhood", "number", "complement", "reference", "cep", "latitude", "longitude", "created_at", "updated_at", "id", "category_id") VALUES ('MyString', 'MyText', 1, 1.5, 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 1.5, 1.5, '2020-04-05 14:47:29.020789', '2020-04-05 14:47:29.020789', 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.0ms)[0m  [1m[32mINSERT INTO "categories" ("title", "created_at", "updated_at", "id") VALUES ('MyString', '2020-04-05 14:47:29.023974', '2020-04-05 14:47:29.023974', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "categories" ("title", "created_at", "updated_at", "id") VALUES ('MyString', '2020-04-05 14:47:29.023974', '2020-04-05 14:47:29.023974', 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "products" ("name", "description", "price", "created_at", "updated_at", "id", "product_category_id") VALUES ('MyString', 'MyText', 1.5, '2020-04-05 14:47:29.025803', '2020-04-05 14:47:29.025803', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "products" ("name", "description", "price", "created_at", "updated_at", "id", "product_category_id") VALUES ('MyString', 'MyText', 1.5, '2020-04-05 14:47:29.025803', '2020-04-05 14:47:29.025803', 298486374, 298486374)[0m
  [1m[35m (13.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------
CategoriesControllerTest: test_should_get_index
-----------------------------------------------
  [1m[36mCategory Load (0.5ms)[0m  [1m[34mSELECT  "categories".* FROM "categories" LIMIT ?[0m  [["LIMIT", 11]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Creating scope :open. Overwriting existing method Restaurant.open.
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "product_categories"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "order_products"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "orders"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "reviews"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "restaurants"[0m
  [1m[36mFixture Delete (0.0ms)[0m  [1m[31mDELETE FROM "categories"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "product_categories" ("title", "created_at", "updated_at", "id", "restaurant_id") VALUES ('MyString', '2020-04-05 14:55:58.154280', '2020-04-05 14:55:58.154280', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "product_categories" ("title", "created_at", "updated_at", "id", "restaurant_id") VALUES ('MyString', '2020-04-05 14:55:58.154280', '2020-04-05 14:55:58.154280', 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "order_products" ("quantity", "comment", "created_at", "updated_at", "id", "order_id", "product_id") VALUES (1, 'MyText', '2020-04-05 14:55:58.155768', '2020-04-05 14:55:58.155768', 980190962, 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "order_products" ("quantity", "comment", "created_at", "updated_at", "id", "order_id", "product_id") VALUES (1, 'MyText', '2020-04-05 14:55:58.155768', '2020-04-05 14:55:58.155768', 298486374, 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "orders" ("name", "phone_number", "total_value", "address", "status", "created_at", "updated_at", "id", "restaurant_id") VALUES ('MyString', 'MyString', 1.5, 'MyString', 1, '2020-04-05 14:55:58.157030', '2020-04-05 14:55:58.157030', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "orders" ("name", "phone_number", "total_value", "address", "status", "created_at", "updated_at", "id", "restaurant_id") VALUES ('MyString', 'MyString', 1.5, 'MyString', 1, '2020-04-05 14:55:58.157030', '2020-04-05 14:55:58.157030', 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "reviews" ("value", "created_at", "updated_at", "id", "restaurant_id") VALUES (1, '2020-04-05 14:55:58.158337', '2020-04-05 14:55:58.158337', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "reviews" ("value", "created_at", "updated_at", "id", "restaurant_id") VALUES (1, '2020-04-05 14:55:58.158337', '2020-04-05 14:55:58.158337', 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "restaurants" ("name", "description", "status", "delivery_tax", "state", "city", "street", "neighborhood", "number", "complement", "reference", "cep", "latitude", "longitude", "created_at", "updated_at", "id", "category_id") VALUES ('MyString', 'MyText', 1, 1.5, 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 1.5, 1.5, '2020-04-05 14:55:58.159716', '2020-04-05 14:55:58.159716', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "restaurants" ("name", "description", "status", "delivery_tax", "state", "city", "street", "neighborhood", "number", "complement", "reference", "cep", "latitude", "longitude", "created_at", "updated_at", "id", "category_id") VALUES ('MyString', 'MyText', 1, 1.5, 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 1.5, 1.5, '2020-04-05 14:55:58.159716', '2020-04-05 14:55:58.159716', 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "categories" ("title", "created_at", "updated_at", "id") VALUES ('MyString', '2020-04-05 14:55:58.161716', '2020-04-05 14:55:58.161716', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "categories" ("title", "created_at", "updated_at", "id") VALUES ('MyString', '2020-04-05 14:55:58.161716', '2020-04-05 14:55:58.161716', 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "products" ("name", "description", "price", "created_at", "updated_at", "id", "product_category_id") VALUES ('MyString', 'MyText', 1.5, '2020-04-05 14:55:58.163256', '2020-04-05 14:55:58.163256', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "products" ("name", "description", "price", "created_at", "updated_at", "id", "product_category_id") VALUES ('MyString', 'MyText', 1.5, '2020-04-05 14:55:58.163256', '2020-04-05 14:55:58.163256', 298486374, 298486374)[0m
  [1m[35m (12.8ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------
CategoriesControllerTest: test_should_get_index
-----------------------------------------------
  [1m[36mCategory Load (0.2ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  [1m[36mActiveStorage::Attachment Load (0.9ms)[0m  [1m[34mSELECT  "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 298486374], ["record_type", "Category"], ["name", "image"], ["LIMIT", 1]]
[36m  Disk Storage (1.1ms) [0m[32mUploaded file to key: uuS6C7qyUfa8yAkuizpQEnZY (checksum: GQF9otxCszErHnwhJPtaXQ==)[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mActiveStorage::Blob Create (0.2ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["key", "uuS6C7qyUfa8yAkuizpQEnZY"], ["filename", "mexican.jpg"], ["content_type", "image/jpeg"], ["metadata", "{\"identified\":true}"], ["byte_size", 164392], ["checksum", "GQF9otxCszErHnwhJPtaXQ=="], ["created_at", "2020-04-05 14:55:58.299131"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mActiveStorage::Attachment Create (0.2ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "image"], ["record_type", "Category"], ["record_id", 298486374], ["blob_id", 1], ["created_at", "2020-04-05 14:55:58.306512"]]
  [1m[36mCategory Update (0.1ms)[0m  [1m[33mUPDATE "categories" SET "updated_at" = ? WHERE "categories"."id" = ?[0m  [["updated_at", "2020-04-05 14:55:58.307286"], ["id", 298486374]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: 2ca18756-6570-4efc-86d2-8248a9605733) to Async(default) with arguments: #<GlobalID:0x00005561a99b8e98 @uri=#<URI::GID gid://ihungry/ActiveStorage::Blob/1>>
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT  "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT  "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 980190962], ["record_type", "Category"], ["name", "image"], ["LIMIT", 1]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [2ca18756-6570-4efc-86d2-8248a9605733] Performing ActiveStorage::AnalyzeJob (Job ID: 2ca18756-6570-4efc-86d2-8248a9605733) from Async(default) with arguments: #<GlobalID:0x00005561a9ad4d90 @uri=#<URI::GID gid://ihungry/ActiveStorage::Blob/1>>
[ActiveJob] [ActiveStorage::AnalyzeJob] [2ca18756-6570-4efc-86d2-8248a9605733] [36m  Disk Storage (1.2ms) [0m[34mDownloaded file from key: uuS6C7qyUfa8yAkuizpQEnZY[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [2ca18756-6570-4efc-86d2-8248a9605733] Skipping image analysis because the mini_magick gem isn't installed
[ActiveJob] [ActiveStorage::AnalyzeJob] [2ca18756-6570-4efc-86d2-8248a9605733]   [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [2ca18756-6570-4efc-86d2-8248a9605733]   [1m[36mActiveStorage::Blob Update (0.1ms)[0m  [1m[33mUPDATE "active_storage_blobs" SET "metadata" = ? WHERE "active_storage_blobs"."id" = ?[0m  [["metadata", "{\"identified\":true,\"analyzed\":true}"], ["id", 1]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [2ca18756-6570-4efc-86d2-8248a9605733]   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [2ca18756-6570-4efc-86d2-8248a9605733] Performed ActiveStorage::AnalyzeJob (Job ID: 2ca18756-6570-4efc-86d2-8248a9605733) from Async(default) in 8.07ms
[36m  Disk Storage (4.6ms) [0m[32mUploaded file to key: tQVtR5JqYczfraXZpyvgUrjv (checksum: GQF9otxCszErHnwhJPtaXQ==)[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mActiveStorage::Blob Create (0.2ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["key", "tQVtR5JqYczfraXZpyvgUrjv"], ["filename", "mexican.jpg"], ["content_type", "image/jpeg"], ["metadata", "{\"identified\":true}"], ["byte_size", 164392], ["checksum", "GQF9otxCszErHnwhJPtaXQ=="], ["created_at", "2020-04-05 14:55:58.325802"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mActiveStorage::Attachment Create (0.1ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "image"], ["record_type", "Category"], ["record_id", 980190962], ["blob_id", 2], ["created_at", "2020-04-05 14:55:58.327927"]]
  [1m[36mCategory Update (0.1ms)[0m  [1m[33mUPDATE "categories" SET "updated_at" = ? WHERE "categories"."id" = ?[0m  [["updated_at", "2020-04-05 14:55:58.328740"], ["id", 980190962]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: 4b7a3214-5c4a-4d20-8a9d-6217b6598409) to Async(default) with arguments: #<GlobalID:0x00005561a9b17aa0 @uri=#<URI::GID gid://ihungry/ActiveStorage::Blob/2>>
  [1m[36mActiveStorage::Blob Load (10.7ms)[0m  [1m[34mSELECT  "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [4b7a3214-5c4a-4d20-8a9d-6217b6598409] Performing ActiveStorage::AnalyzeJob (Job ID: 4b7a3214-5c4a-4d20-8a9d-6217b6598409) from Async(default) with arguments: #<GlobalID:0x00005561a9c3d948 @uri=#<URI::GID gid://ihungry/ActiveStorage::Blob/2>>
Started GET "/categories" for 127.0.0.1 at 2020-04-05 11:55:58 -0300
[ActiveJob] [ActiveStorage::AnalyzeJob] [4b7a3214-5c4a-4d20-8a9d-6217b6598409] [36m  Disk Storage (0.3ms) [0m[34mDownloaded file from key: tQVtR5JqYczfraXZpyvgUrjv[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [4b7a3214-5c4a-4d20-8a9d-6217b6598409] Skipping image analysis because the mini_magick gem isn't installed
[ActiveJob] [ActiveStorage::AnalyzeJob] [4b7a3214-5c4a-4d20-8a9d-6217b6598409]   [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [4b7a3214-5c4a-4d20-8a9d-6217b6598409]   [1m[36mActiveStorage::Blob Update (0.1ms)[0m  [1m[33mUPDATE "active_storage_blobs" SET "metadata" = ? WHERE "active_storage_blobs"."id" = ?[0m  [["metadata", "{\"identified\":true,\"analyzed\":true}"], ["id", 2]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [4b7a3214-5c4a-4d20-8a9d-6217b6598409]   [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [4b7a3214-5c4a-4d20-8a9d-6217b6598409] Performed ActiveStorage::AnalyzeJob (Job ID: 4b7a3214-5c4a-4d20-8a9d-6217b6598409) from Async(default) in 6.6ms
Processing by CategoriesController#index as HTML
  [1m[36mCategory Load (0.1ms)[0m  [1m[34mSELECT "categories".* FROM "categories" ORDER BY "categories"."title" ASC[0m
[active_model_serializers]   [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT  "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 298486374], ["record_type", "Category"], ["name", "image"], ["LIMIT", 1]]
[active_model_serializers]   [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT  "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
[active_model_serializers]   [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT  "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 980190962], ["record_type", "Category"], ["name", "image"], ["LIMIT", 1]]
[active_model_serializers]   [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT  "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Json (5.34ms)
Completed 200 OK in 9ms (Views: 7.9ms | ActiveRecord: 0.4ms)
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Creating scope :open. Overwriting existing method Restaurant.open.
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "product_categories"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "order_products"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "orders"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "reviews"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "restaurants"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "categories"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "product_categories" ("title", "created_at", "updated_at", "id", "restaurant_id") VALUES ('MyString', '2020-04-05 14:56:08.225979', '2020-04-05 14:56:08.225979', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "product_categories" ("title", "created_at", "updated_at", "id", "restaurant_id") VALUES ('MyString', '2020-04-05 14:56:08.225979', '2020-04-05 14:56:08.225979', 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "order_products" ("quantity", "comment", "created_at", "updated_at", "id", "order_id", "product_id") VALUES (1, 'MyText', '2020-04-05 14:56:08.228455', '2020-04-05 14:56:08.228455', 980190962, 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "order_products" ("quantity", "comment", "created_at", "updated_at", "id", "order_id", "product_id") VALUES (1, 'MyText', '2020-04-05 14:56:08.228455', '2020-04-05 14:56:08.228455', 298486374, 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "orders" ("name", "phone_number", "total_value", "address", "status", "created_at", "updated_at", "id", "restaurant_id") VALUES ('MyString', 'MyString', 1.5, 'MyString', 1, '2020-04-05 14:56:08.233198', '2020-04-05 14:56:08.233198', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "orders" ("name", "phone_number", "total_value", "address", "status", "created_at", "updated_at", "id", "restaurant_id") VALUES ('MyString', 'MyString', 1.5, 'MyString', 1, '2020-04-05 14:56:08.233198', '2020-04-05 14:56:08.233198', 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "reviews" ("value", "created_at", "updated_at", "id", "restaurant_id") VALUES (1, '2020-04-05 14:56:08.236481', '2020-04-05 14:56:08.236481', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "reviews" ("value", "created_at", "updated_at", "id", "restaurant_id") VALUES (1, '2020-04-05 14:56:08.236481', '2020-04-05 14:56:08.236481', 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "restaurants" ("name", "description", "status", "delivery_tax", "state", "city", "street", "neighborhood", "number", "complement", "reference", "cep", "latitude", "longitude", "created_at", "updated_at", "id", "category_id") VALUES ('MyString', 'MyText', 1, 1.5, 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 1.5, 1.5, '2020-04-05 14:56:08.238444', '2020-04-05 14:56:08.238444', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "restaurants" ("name", "description", "status", "delivery_tax", "state", "city", "street", "neighborhood", "number", "complement", "reference", "cep", "latitude", "longitude", "created_at", "updated_at", "id", "category_id") VALUES ('MyString', 'MyText', 1, 1.5, 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 1.5, 1.5, '2020-04-05 14:56:08.238444', '2020-04-05 14:56:08.238444', 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "categories" ("title", "created_at", "updated_at", "id") VALUES ('MyString', '2020-04-05 14:56:08.242041', '2020-04-05 14:56:08.242041', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "categories" ("title", "created_at", "updated_at", "id") VALUES ('MyString', '2020-04-05 14:56:08.242041', '2020-04-05 14:56:08.242041', 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "products" ("name", "description", "price", "created_at", "updated_at", "id", "product_category_id") VALUES ('MyString', 'MyText', 1.5, '2020-04-05 14:56:08.243835', '2020-04-05 14:56:08.243835', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "products" ("name", "description", "price", "created_at", "updated_at", "id", "product_category_id") VALUES ('MyString', 'MyText', 1.5, '2020-04-05 14:56:08.243835', '2020-04-05 14:56:08.243835', 298486374, 298486374)[0m
  [1m[35m (15.4ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
OrdersControllerTest: test_should_get_show
------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
OrdersControllerTest: test_should_get_create
--------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Creating scope :open. Overwriting existing method Restaurant.open.
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "product_categories"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "order_products"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "orders"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "reviews"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "restaurants"[0m
  [1m[36mFixture Delete (0.0ms)[0m  [1m[31mDELETE FROM "categories"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "product_categories" ("title", "created_at", "updated_at", "id", "restaurant_id") VALUES ('MyString', '2020-04-05 14:58:24.852102', '2020-04-05 14:58:24.852102', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "product_categories" ("title", "created_at", "updated_at", "id", "restaurant_id") VALUES ('MyString', '2020-04-05 14:58:24.852102', '2020-04-05 14:58:24.852102', 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "order_products" ("quantity", "comment", "created_at", "updated_at", "id", "order_id", "product_id") VALUES (1, 'MyText', '2020-04-05 14:58:24.853598', '2020-04-05 14:58:24.853598', 980190962, 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "order_products" ("quantity", "comment", "created_at", "updated_at", "id", "order_id", "product_id") VALUES (1, 'MyText', '2020-04-05 14:58:24.853598', '2020-04-05 14:58:24.853598', 298486374, 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "orders" ("name", "phone_number", "total_value", "address", "status", "created_at", "updated_at", "id", "restaurant_id") VALUES ('MyString', 'MyString', 1.5, 'MyString', 1, '2020-04-05 14:58:24.855010', '2020-04-05 14:58:24.855010', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "orders" ("name", "phone_number", "total_value", "address", "status", "created_at", "updated_at", "id", "restaurant_id") VALUES ('MyString', 'MyString', 1.5, 'MyString', 1, '2020-04-05 14:58:24.855010', '2020-04-05 14:58:24.855010', 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "reviews" ("value", "created_at", "updated_at", "id", "restaurant_id") VALUES (1, '2020-04-05 14:58:24.856253', '2020-04-05 14:58:24.856253', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.0ms)[0m  [1m[32mINSERT INTO "reviews" ("value", "created_at", "updated_at", "id", "restaurant_id") VALUES (1, '2020-04-05 14:58:24.856253', '2020-04-05 14:58:24.856253', 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "restaurants" ("name", "description", "status", "delivery_tax", "state", "city", "street", "neighborhood", "number", "complement", "reference", "cep", "latitude", "longitude", "created_at", "updated_at", "id", "category_id") VALUES ('MyString', 'MyText', 1, 1.5, 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 1.5, 1.5, '2020-04-05 14:58:24.857232', '2020-04-05 14:58:24.857232', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "restaurants" ("name", "description", "status", "delivery_tax", "state", "city", "street", "neighborhood", "number", "complement", "reference", "cep", "latitude", "longitude", "created_at", "updated_at", "id", "category_id") VALUES ('MyString', 'MyText', 1, 1.5, 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 1.5, 1.5, '2020-04-05 14:58:24.857232', '2020-04-05 14:58:24.857232', 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.0ms)[0m  [1m[32mINSERT INTO "categories" ("title", "created_at", "updated_at", "id") VALUES ('MyString', '2020-04-05 14:58:24.858757', '2020-04-05 14:58:24.858757', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "categories" ("title", "created_at", "updated_at", "id") VALUES ('MyString', '2020-04-05 14:58:24.858757', '2020-04-05 14:58:24.858757', 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "products" ("name", "description", "price", "created_at", "updated_at", "id", "product_category_id") VALUES ('MyString', 'MyText', 1.5, '2020-04-05 14:58:24.859664', '2020-04-05 14:58:24.859664', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "products" ("name", "description", "price", "created_at", "updated_at", "id", "product_category_id") VALUES ('MyString', 'MyText', 1.5, '2020-04-05 14:58:24.859664', '2020-04-05 14:58:24.859664', 298486374, 298486374)[0m
  [1m[35m (13.5ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
OrdersControllerTest: test_should_get_create
--------------------------------------------
  [1m[36mOrder Load (0.2ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mOrder Load (0.1ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Creating scope :open. Overwriting existing method Restaurant.open.
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "product_categories"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "order_products"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "orders"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "reviews"[0m
  [1m[36mFixture Delete (0.0ms)[0m  [1m[31mDELETE FROM "restaurants"[0m
  [1m[36mFixture Delete (0.0ms)[0m  [1m[31mDELETE FROM "categories"[0m
  [1m[36mFixture Delete (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "product_categories" ("title", "created_at", "updated_at", "id", "restaurant_id") VALUES ('MyString', '2020-04-05 15:01:42.358855', '2020-04-05 15:01:42.358855', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "product_categories" ("title", "created_at", "updated_at", "id", "restaurant_id") VALUES ('MyString', '2020-04-05 15:01:42.358855', '2020-04-05 15:01:42.358855', 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "order_products" ("quantity", "comment", "created_at", "updated_at", "id", "order_id", "product_id") VALUES (1, 'MyText', '2020-04-05 15:01:42.360174', '2020-04-05 15:01:42.360174', 980190962, 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "order_products" ("quantity", "comment", "created_at", "updated_at", "id", "order_id", "product_id") VALUES (1, 'MyText', '2020-04-05 15:01:42.360174', '2020-04-05 15:01:42.360174', 298486374, 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "orders" ("name", "phone_number", "total_value", "address", "status", "created_at", "updated_at", "id", "restaurant_id") VALUES ('MyString', 'MyString', 1.5, 'MyString', 1, '2020-04-05 15:01:42.361505', '2020-04-05 15:01:42.361505', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "orders" ("name", "phone_number", "total_value", "address", "status", "created_at", "updated_at", "id", "restaurant_id") VALUES ('MyString', 'MyString', 1.5, 'MyString', 1, '2020-04-05 15:01:42.361505', '2020-04-05 15:01:42.361505', 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "reviews" ("value", "created_at", "updated_at", "id", "restaurant_id") VALUES (1, '2020-04-05 15:01:42.362562', '2020-04-05 15:01:42.362562', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "reviews" ("value", "created_at", "updated_at", "id", "restaurant_id") VALUES (1, '2020-04-05 15:01:42.362562', '2020-04-05 15:01:42.362562', 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "restaurants" ("name", "description", "status", "delivery_tax", "state", "city", "street", "neighborhood", "number", "complement", "reference", "cep", "latitude", "longitude", "created_at", "updated_at", "id", "category_id") VALUES ('MyString', 'MyText', 1, 1.5, 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 1.5, 1.5, '2020-04-05 15:01:42.363410', '2020-04-05 15:01:42.363410', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "restaurants" ("name", "description", "status", "delivery_tax", "state", "city", "street", "neighborhood", "number", "complement", "reference", "cep", "latitude", "longitude", "created_at", "updated_at", "id", "category_id") VALUES ('MyString', 'MyText', 1, 1.5, 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 1.5, 1.5, '2020-04-05 15:01:42.363410', '2020-04-05 15:01:42.363410', 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "categories" ("title", "created_at", "updated_at", "id") VALUES ('MyString', '2020-04-05 15:01:42.364873', '2020-04-05 15:01:42.364873', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "categories" ("title", "created_at", "updated_at", "id") VALUES ('MyString', '2020-04-05 15:01:42.364873', '2020-04-05 15:01:42.364873', 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "products" ("name", "description", "price", "created_at", "updated_at", "id", "product_category_id") VALUES ('MyString', 'MyText', 1.5, '2020-04-05 15:01:42.365691', '2020-04-05 15:01:42.365691', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "products" ("name", "description", "price", "created_at", "updated_at", "id", "product_category_id") VALUES ('MyString', 'MyText', 1.5, '2020-04-05 15:01:42.365691', '2020-04-05 15:01:42.365691', 298486374, 298486374)[0m
  [1m[35m (12.9ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
OrdersControllerTest: test_should_get_create
--------------------------------------------
  [1m[36mOrder Load (0.2ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mOrder Load (0.1ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Creating scope :open. Overwriting existing method Restaurant.open.
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "product_categories"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "order_products"[0m
  [1m[36mFixture Delete (0.0ms)[0m  [1m[31mDELETE FROM "orders"[0m
  [1m[36mFixture Delete (0.0ms)[0m  [1m[31mDELETE FROM "reviews"[0m
  [1m[36mFixture Delete (0.0ms)[0m  [1m[31mDELETE FROM "restaurants"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "categories"[0m
  [1m[36mFixture Delete (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "product_categories" ("title", "created_at", "updated_at", "id", "restaurant_id") VALUES ('MyString', '2020-04-05 15:02:45.271572', '2020-04-05 15:02:45.271572', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.0ms)[0m  [1m[32mINSERT INTO "product_categories" ("title", "created_at", "updated_at", "id", "restaurant_id") VALUES ('MyString', '2020-04-05 15:02:45.271572', '2020-04-05 15:02:45.271572', 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "order_products" ("quantity", "comment", "created_at", "updated_at", "id", "order_id", "product_id") VALUES (1, 'MyText', '2020-04-05 15:02:45.272909', '2020-04-05 15:02:45.272909', 980190962, 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.0ms)[0m  [1m[32mINSERT INTO "order_products" ("quantity", "comment", "created_at", "updated_at", "id", "order_id", "product_id") VALUES (1, 'MyText', '2020-04-05 15:02:45.272909', '2020-04-05 15:02:45.272909', 298486374, 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "orders" ("name", "phone_number", "total_value", "address", "status", "created_at", "updated_at", "id", "restaurant_id") VALUES ('MyString', 'MyString', 1.5, 'MyString', 1, '2020-04-05 15:02:45.273936', '2020-04-05 15:02:45.273936', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.0ms)[0m  [1m[32mINSERT INTO "orders" ("name", "phone_number", "total_value", "address", "status", "created_at", "updated_at", "id", "restaurant_id") VALUES ('MyString', 'MyString', 1.5, 'MyString', 1, '2020-04-05 15:02:45.273936', '2020-04-05 15:02:45.273936', 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.0ms)[0m  [1m[32mINSERT INTO "reviews" ("value", "created_at", "updated_at", "id", "restaurant_id") VALUES (1, '2020-04-05 15:02:45.275049', '2020-04-05 15:02:45.275049', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.0ms)[0m  [1m[32mINSERT INTO "reviews" ("value", "created_at", "updated_at", "id", "restaurant_id") VALUES (1, '2020-04-05 15:02:45.275049', '2020-04-05 15:02:45.275049', 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "restaurants" ("name", "description", "status", "delivery_tax", "state", "city", "street", "neighborhood", "number", "complement", "reference", "cep", "latitude", "longitude", "created_at", "updated_at", "id", "category_id") VALUES ('MyString', 'MyText', 1, 1.5, 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 1.5, 1.5, '2020-04-05 15:02:45.275918', '2020-04-05 15:02:45.275918', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "restaurants" ("name", "description", "status", "delivery_tax", "state", "city", "street", "neighborhood", "number", "complement", "reference", "cep", "latitude", "longitude", "created_at", "updated_at", "id", "category_id") VALUES ('MyString', 'MyText', 1, 1.5, 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 1.5, 1.5, '2020-04-05 15:02:45.275918', '2020-04-05 15:02:45.275918', 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.0ms)[0m  [1m[32mINSERT INTO "categories" ("title", "created_at", "updated_at", "id") VALUES ('MyString', '2020-04-05 15:02:45.277284', '2020-04-05 15:02:45.277284', 980190962)[0m
  [1m[36mFixture Insert (0.0ms)[0m  [1m[32mINSERT INTO "categories" ("title", "created_at", "updated_at", "id") VALUES ('MyString', '2020-04-05 15:02:45.277284', '2020-04-05 15:02:45.277284', 298486374)[0m
  [1m[36mFixture Insert (0.0ms)[0m  [1m[32mINSERT INTO "products" ("name", "description", "price", "created_at", "updated_at", "id", "product_category_id") VALUES ('MyString', 'MyText', 1.5, '2020-04-05 15:02:45.278090', '2020-04-05 15:02:45.278090', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.0ms)[0m  [1m[32mINSERT INTO "products" ("name", "description", "price", "created_at", "updated_at", "id", "product_category_id") VALUES ('MyString', 'MyText', 1.5, '2020-04-05 15:02:45.278090', '2020-04-05 15:02:45.278090', 298486374, 298486374)[0m
  [1m[35m (13.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
OrdersControllerTest: test_should_get_create
--------------------------------------------
  [1m[36mOrder Load (0.2ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mOrder Load (0.1ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Creating scope :open. Overwriting existing method Restaurant.open.
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "product_categories"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "order_products"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "orders"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "reviews"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "restaurants"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "categories"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "product_categories" ("title", "created_at", "updated_at", "id", "restaurant_id") VALUES ('MyString', '2020-04-05 15:03:03.726648', '2020-04-05 15:03:03.726648', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "product_categories" ("title", "created_at", "updated_at", "id", "restaurant_id") VALUES ('MyString', '2020-04-05 15:03:03.726648', '2020-04-05 15:03:03.726648', 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "order_products" ("quantity", "comment", "created_at", "updated_at", "id", "order_id", "product_id") VALUES (1, 'MyText', '2020-04-05 15:03:03.727956', '2020-04-05 15:03:03.727956', 980190962, 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "order_products" ("quantity", "comment", "created_at", "updated_at", "id", "order_id", "product_id") VALUES (1, 'MyText', '2020-04-05 15:03:03.727956', '2020-04-05 15:03:03.727956', 298486374, 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "orders" ("name", "phone_number", "total_value", "address", "status", "created_at", "updated_at", "id", "restaurant_id") VALUES ('MyString', 'MyString', 1.5, 'MyString', 1, '2020-04-05 15:03:03.729025', '2020-04-05 15:03:03.729025', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "orders" ("name", "phone_number", "total_value", "address", "status", "created_at", "updated_at", "id", "restaurant_id") VALUES ('MyString', 'MyString', 1.5, 'MyString', 1, '2020-04-05 15:03:03.729025', '2020-04-05 15:03:03.729025', 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "reviews" ("value", "created_at", "updated_at", "id", "restaurant_id") VALUES (1, '2020-04-05 15:03:03.730058', '2020-04-05 15:03:03.730058', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "reviews" ("value", "created_at", "updated_at", "id", "restaurant_id") VALUES (1, '2020-04-05 15:03:03.730058', '2020-04-05 15:03:03.730058', 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "restaurants" ("name", "description", "status", "delivery_tax", "state", "city", "street", "neighborhood", "number", "complement", "reference", "cep", "latitude", "longitude", "created_at", "updated_at", "id", "category_id") VALUES ('MyString', 'MyText', 1, 1.5, 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 1.5, 1.5, '2020-04-05 15:03:03.730902', '2020-04-05 15:03:03.730902', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "restaurants" ("name", "description", "status", "delivery_tax", "state", "city", "street", "neighborhood", "number", "complement", "reference", "cep", "latitude", "longitude", "created_at", "updated_at", "id", "category_id") VALUES ('MyString', 'MyText', 1, 1.5, 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 1.5, 1.5, '2020-04-05 15:03:03.730902', '2020-04-05 15:03:03.730902', 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "categories" ("title", "created_at", "updated_at", "id") VALUES ('MyString', '2020-04-05 15:03:03.732564', '2020-04-05 15:03:03.732564', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "categories" ("title", "created_at", "updated_at", "id") VALUES ('MyString', '2020-04-05 15:03:03.732564', '2020-04-05 15:03:03.732564', 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "products" ("name", "description", "price", "created_at", "updated_at", "id", "product_category_id") VALUES ('MyString', 'MyText', 1.5, '2020-04-05 15:03:03.733484', '2020-04-05 15:03:03.733484', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "products" ("name", "description", "price", "created_at", "updated_at", "id", "product_category_id") VALUES ('MyString', 'MyText', 1.5, '2020-04-05 15:03:03.733484', '2020-04-05 15:03:03.733484', 298486374, 298486374)[0m
  [1m[35m (13.8ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
OrdersControllerTest: test_should_get_create
--------------------------------------------
Started POST "/orders" for 127.0.0.1 at 2020-04-05 12:03:03 -0300
Processing by OrdersController#create as HTML
  Parameters: {"order"=>{"title"=>"", "body"=>""}}
Unpermitted parameters: :title, :body
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
[active_model_serializers] Rendered ActiveModel::Serializer::Null with ActiveModel::Errors (0.17ms)
Completed 422 Unprocessable Entity in 21ms (Views: 5.1ms | ActiveRecord: 0.2ms)
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Creating scope :open. Overwriting existing method Restaurant.open.
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "product_categories"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "order_products"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "orders"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "reviews"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "restaurants"[0m
  [1m[36mFixture Delete (0.0ms)[0m  [1m[31mDELETE FROM "categories"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "product_categories" ("title", "created_at", "updated_at", "id", "restaurant_id") VALUES ('MyString', '2020-04-05 15:05:30.919171', '2020-04-05 15:05:30.919171', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.0ms)[0m  [1m[32mINSERT INTO "product_categories" ("title", "created_at", "updated_at", "id", "restaurant_id") VALUES ('MyString', '2020-04-05 15:05:30.919171', '2020-04-05 15:05:30.919171', 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "order_products" ("quantity", "comment", "created_at", "updated_at", "id", "order_id", "product_id") VALUES (1, 'MyText', '2020-04-05 15:05:30.920476', '2020-04-05 15:05:30.920476', 980190962, 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.0ms)[0m  [1m[32mINSERT INTO "order_products" ("quantity", "comment", "created_at", "updated_at", "id", "order_id", "product_id") VALUES (1, 'MyText', '2020-04-05 15:05:30.920476', '2020-04-05 15:05:30.920476', 298486374, 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "orders" ("name", "phone_number", "total_value", "address", "status", "created_at", "updated_at", "id", "restaurant_id") VALUES ('MyString', 'MyString', 1.5, 'MyString', 1, '2020-04-05 15:05:30.921484', '2020-04-05 15:05:30.921484', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.0ms)[0m  [1m[32mINSERT INTO "orders" ("name", "phone_number", "total_value", "address", "status", "created_at", "updated_at", "id", "restaurant_id") VALUES ('MyString', 'MyString', 1.5, 'MyString', 1, '2020-04-05 15:05:30.921484', '2020-04-05 15:05:30.921484', 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.0ms)[0m  [1m[32mINSERT INTO "reviews" ("value", "created_at", "updated_at", "id", "restaurant_id") VALUES (1, '2020-04-05 15:05:30.922542', '2020-04-05 15:05:30.922542', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.0ms)[0m  [1m[32mINSERT INTO "reviews" ("value", "created_at", "updated_at", "id", "restaurant_id") VALUES (1, '2020-04-05 15:05:30.922542', '2020-04-05 15:05:30.922542', 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "restaurants" ("name", "description", "status", "delivery_tax", "state", "city", "street", "neighborhood", "number", "complement", "reference", "cep", "latitude", "longitude", "created_at", "updated_at", "id", "category_id") VALUES ('MyString', 'MyText', 1, 1.5, 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 1.5, 1.5, '2020-04-05 15:05:30.923402', '2020-04-05 15:05:30.923402', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "restaurants" ("name", "description", "status", "delivery_tax", "state", "city", "street", "neighborhood", "number", "complement", "reference", "cep", "latitude", "longitude", "created_at", "updated_at", "id", "category_id") VALUES ('MyString', 'MyText', 1, 1.5, 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 1.5, 1.5, '2020-04-05 15:05:30.923402', '2020-04-05 15:05:30.923402', 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.0ms)[0m  [1m[32mINSERT INTO "categories" ("title", "created_at", "updated_at", "id") VALUES ('MyString', '2020-04-05 15:05:30.924687', '2020-04-05 15:05:30.924687', 980190962)[0m
  [1m[36mFixture Insert (0.0ms)[0m  [1m[32mINSERT INTO "categories" ("title", "created_at", "updated_at", "id") VALUES ('MyString', '2020-04-05 15:05:30.924687', '2020-04-05 15:05:30.924687', 298486374)[0m
  [1m[36mFixture Insert (0.0ms)[0m  [1m[32mINSERT INTO "products" ("name", "description", "price", "created_at", "updated_at", "id", "product_category_id") VALUES ('MyString', 'MyText', 1.5, '2020-04-05 15:05:30.925511', '2020-04-05 15:05:30.925511', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.0ms)[0m  [1m[32mINSERT INTO "products" ("name", "description", "price", "created_at", "updated_at", "id", "product_category_id") VALUES ('MyString', 'MyText', 1.5, '2020-04-05 15:05:30.925511', '2020-04-05 15:05:30.925511', 298486374, 298486374)[0m
  [1m[35m (12.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
OrdersControllerTest: test_should_get_create
--------------------------------------------
Started POST "/orders" for 127.0.0.1 at 2020-04-05 12:05:30 -0300
Processing by OrdersController#create as HTML
  Parameters: {"order"=>{"restaurant"=>"Egyptian", "name"=>"Funny Triangle", "phone_number"=>"123123123"}}
Unpermitted parameter: :restaurant
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
[active_model_serializers] Rendered ActiveModel::Serializer::Null with ActiveModel::Errors (0.12ms)
Completed 422 Unprocessable Entity in 38ms (Views: 11.5ms | ActiveRecord: 0.2ms)
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Creating scope :open. Overwriting existing method Restaurant.open.
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "product_categories"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "order_products"[0m
  [1m[36mFixture Delete (0.0ms)[0m  [1m[31mDELETE FROM "orders"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "reviews"[0m
  [1m[36mFixture Delete (0.0ms)[0m  [1m[31mDELETE FROM "restaurants"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "categories"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "product_categories" ("title", "created_at", "updated_at", "id", "restaurant_id") VALUES ('MyString', '2020-04-05 15:05:48.259519', '2020-04-05 15:05:48.259519', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "product_categories" ("title", "created_at", "updated_at", "id", "restaurant_id") VALUES ('MyString', '2020-04-05 15:05:48.259519', '2020-04-05 15:05:48.259519', 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "order_products" ("quantity", "comment", "created_at", "updated_at", "id", "order_id", "product_id") VALUES (1, 'MyText', '2020-04-05 15:05:48.261048', '2020-04-05 15:05:48.261048', 980190962, 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "order_products" ("quantity", "comment", "created_at", "updated_at", "id", "order_id", "product_id") VALUES (1, 'MyText', '2020-04-05 15:05:48.261048', '2020-04-05 15:05:48.261048', 298486374, 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "orders" ("name", "phone_number", "total_value", "address", "status", "created_at", "updated_at", "id", "restaurant_id") VALUES ('MyString', 'MyString', 1.5, 'MyString', 1, '2020-04-05 15:05:48.262009', '2020-04-05 15:05:48.262009', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "orders" ("name", "phone_number", "total_value", "address", "status", "created_at", "updated_at", "id", "restaurant_id") VALUES ('MyString', 'MyString', 1.5, 'MyString', 1, '2020-04-05 15:05:48.262009', '2020-04-05 15:05:48.262009', 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "reviews" ("value", "created_at", "updated_at", "id", "restaurant_id") VALUES (1, '2020-04-05 15:05:48.263189', '2020-04-05 15:05:48.263189', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "reviews" ("value", "created_at", "updated_at", "id", "restaurant_id") VALUES (1, '2020-04-05 15:05:48.263189', '2020-04-05 15:05:48.263189', 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "restaurants" ("name", "description", "status", "delivery_tax", "state", "city", "street", "neighborhood", "number", "complement", "reference", "cep", "latitude", "longitude", "created_at", "updated_at", "id", "category_id") VALUES ('MyString', 'MyText', 1, 1.5, 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 1.5, 1.5, '2020-04-05 15:05:48.264037', '2020-04-05 15:05:48.264037', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "restaurants" ("name", "description", "status", "delivery_tax", "state", "city", "street", "neighborhood", "number", "complement", "reference", "cep", "latitude", "longitude", "created_at", "updated_at", "id", "category_id") VALUES ('MyString', 'MyText', 1, 1.5, 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 1.5, 1.5, '2020-04-05 15:05:48.264037', '2020-04-05 15:05:48.264037', 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "categories" ("title", "created_at", "updated_at", "id") VALUES ('MyString', '2020-04-05 15:05:48.265450', '2020-04-05 15:05:48.265450', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "categories" ("title", "created_at", "updated_at", "id") VALUES ('MyString', '2020-04-05 15:05:48.265450', '2020-04-05 15:05:48.265450', 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "products" ("name", "description", "price", "created_at", "updated_at", "id", "product_category_id") VALUES ('MyString', 'MyText', 1.5, '2020-04-05 15:05:48.266252', '2020-04-05 15:05:48.266252', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "products" ("name", "description", "price", "created_at", "updated_at", "id", "product_category_id") VALUES ('MyString', 'MyText', 1.5, '2020-04-05 15:05:48.266252', '2020-04-05 15:05:48.266252', 298486374, 298486374)[0m
  [1m[35m (12.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
OrdersControllerTest: test_should_get_create
--------------------------------------------
Started POST "/orders" for 127.0.0.1 at 2020-04-05 12:05:48 -0300
Processing by OrdersController#create as HTML
  Parameters: {"order"=>{"restaurant"=>"Egyptian", "name"=>"Funny Triangle", "phone_number"=>"123123123"}}
Unpermitted parameter: :restaurant
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
[active_model_serializers] Rendered ActiveModel::Serializer::Null with ActiveModel::Errors (0.11ms)
Completed 422 Unprocessable Entity in 47ms (Views: 4.1ms | ActiveRecord: 0.2ms)
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Creating scope :open. Overwriting existing method Restaurant.open.
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "product_categories"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "order_products"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "orders"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "reviews"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "restaurants"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "categories"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "product_categories" ("title", "created_at", "updated_at", "id", "restaurant_id") VALUES ('MyString', '2020-04-05 15:06:15.435039', '2020-04-05 15:06:15.435039', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "product_categories" ("title", "created_at", "updated_at", "id", "restaurant_id") VALUES ('MyString', '2020-04-05 15:06:15.435039', '2020-04-05 15:06:15.435039', 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "order_products" ("quantity", "comment", "created_at", "updated_at", "id", "order_id", "product_id") VALUES (1, 'MyText', '2020-04-05 15:06:15.436472', '2020-04-05 15:06:15.436472', 980190962, 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.0ms)[0m  [1m[32mINSERT INTO "order_products" ("quantity", "comment", "created_at", "updated_at", "id", "order_id", "product_id") VALUES (1, 'MyText', '2020-04-05 15:06:15.436472', '2020-04-05 15:06:15.436472', 298486374, 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "orders" ("name", "phone_number", "total_value", "address", "status", "created_at", "updated_at", "id", "restaurant_id") VALUES ('MyString', 'MyString', 1.5, 'MyString', 1, '2020-04-05 15:06:15.437507', '2020-04-05 15:06:15.437507', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "orders" ("name", "phone_number", "total_value", "address", "status", "created_at", "updated_at", "id", "restaurant_id") VALUES ('MyString', 'MyString', 1.5, 'MyString', 1, '2020-04-05 15:06:15.437507', '2020-04-05 15:06:15.437507', 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.0ms)[0m  [1m[32mINSERT INTO "reviews" ("value", "created_at", "updated_at", "id", "restaurant_id") VALUES (1, '2020-04-05 15:06:15.438647', '2020-04-05 15:06:15.438647', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.0ms)[0m  [1m[32mINSERT INTO "reviews" ("value", "created_at", "updated_at", "id", "restaurant_id") VALUES (1, '2020-04-05 15:06:15.438647', '2020-04-05 15:06:15.438647', 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "restaurants" ("name", "description", "status", "delivery_tax", "state", "city", "street", "neighborhood", "number", "complement", "reference", "cep", "latitude", "longitude", "created_at", "updated_at", "id", "category_id") VALUES ('MyString', 'MyText', 1, 1.5, 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 1.5, 1.5, '2020-04-05 15:06:15.439527', '2020-04-05 15:06:15.439527', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "restaurants" ("name", "description", "status", "delivery_tax", "state", "city", "street", "neighborhood", "number", "complement", "reference", "cep", "latitude", "longitude", "created_at", "updated_at", "id", "category_id") VALUES ('MyString', 'MyText', 1, 1.5, 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 1.5, 1.5, '2020-04-05 15:06:15.439527', '2020-04-05 15:06:15.439527', 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.0ms)[0m  [1m[32mINSERT INTO "categories" ("title", "created_at", "updated_at", "id") VALUES ('MyString', '2020-04-05 15:06:15.440897', '2020-04-05 15:06:15.440897', 980190962)[0m
  [1m[36mFixture Insert (0.0ms)[0m  [1m[32mINSERT INTO "categories" ("title", "created_at", "updated_at", "id") VALUES ('MyString', '2020-04-05 15:06:15.440897', '2020-04-05 15:06:15.440897', 298486374)[0m
  [1m[36mFixture Insert (0.0ms)[0m  [1m[32mINSERT INTO "products" ("name", "description", "price", "created_at", "updated_at", "id", "product_category_id") VALUES ('MyString', 'MyText', 1.5, '2020-04-05 15:06:15.441709', '2020-04-05 15:06:15.441709', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.0ms)[0m  [1m[32mINSERT INTO "products" ("name", "description", "price", "created_at", "updated_at", "id", "product_category_id") VALUES ('MyString', 'MyText', 1.5, '2020-04-05 15:06:15.441709', '2020-04-05 15:06:15.441709', 298486374, 298486374)[0m
  [1m[35m (13.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
OrdersControllerTest: test_should_get_create
--------------------------------------------
Started POST "/orders" for 127.0.0.1 at 2020-04-05 12:06:15 -0300
Processing by OrdersController#create as HTML
  Parameters: {"order"=>{"restaurant"=>"Egyptian", "name"=>"Funny Triangle", "phone_number"=>"123123123"}}
Unpermitted parameter: :restaurant
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "restaurants"[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Creating scope :open. Overwriting existing method Restaurant.open.
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "product_categories"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "order_products"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "orders"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "reviews"[0m
  [1m[36mFixture Delete (0.0ms)[0m  [1m[31mDELETE FROM "restaurants"[0m
  [1m[36mFixture Delete (0.0ms)[0m  [1m[31mDELETE FROM "categories"[0m
  [1m[36mFixture Delete (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "product_categories" ("title", "created_at", "updated_at", "id", "restaurant_id") VALUES ('MyString', '2020-04-05 15:07:05.550053', '2020-04-05 15:07:05.550053', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "product_categories" ("title", "created_at", "updated_at", "id", "restaurant_id") VALUES ('MyString', '2020-04-05 15:07:05.550053', '2020-04-05 15:07:05.550053', 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "order_products" ("quantity", "comment", "created_at", "updated_at", "id", "order_id", "product_id") VALUES (1, 'MyText', '2020-04-05 15:07:05.551415', '2020-04-05 15:07:05.551415', 980190962, 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "order_products" ("quantity", "comment", "created_at", "updated_at", "id", "order_id", "product_id") VALUES (1, 'MyText', '2020-04-05 15:07:05.551415', '2020-04-05 15:07:05.551415', 298486374, 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.0ms)[0m  [1m[32mINSERT INTO "orders" ("name", "phone_number", "total_value", "address", "status", "created_at", "updated_at", "id", "restaurant_id") VALUES ('MyString', 'MyString', 1.5, 'MyString', 1, '2020-04-05 15:07:05.553103', '2020-04-05 15:07:05.553103', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "orders" ("name", "phone_number", "total_value", "address", "status", "created_at", "updated_at", "id", "restaurant_id") VALUES ('MyString', 'MyString', 1.5, 'MyString', 1, '2020-04-05 15:07:05.553103', '2020-04-05 15:07:05.553103', 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.0ms)[0m  [1m[32mINSERT INTO "reviews" ("value", "created_at", "updated_at", "id", "restaurant_id") VALUES (1, '2020-04-05 15:07:05.554258', '2020-04-05 15:07:05.554258', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.0ms)[0m  [1m[32mINSERT INTO "reviews" ("value", "created_at", "updated_at", "id", "restaurant_id") VALUES (1, '2020-04-05 15:07:05.554258', '2020-04-05 15:07:05.554258', 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "restaurants" ("name", "description", "status", "delivery_tax", "state", "city", "street", "neighborhood", "number", "complement", "reference", "cep", "latitude", "longitude", "created_at", "updated_at", "id", "category_id") VALUES ('MyString', 'MyText', 1, 1.5, 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 1.5, 1.5, '2020-04-05 15:07:05.555100', '2020-04-05 15:07:05.555100', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "restaurants" ("name", "description", "status", "delivery_tax", "state", "city", "street", "neighborhood", "number", "complement", "reference", "cep", "latitude", "longitude", "created_at", "updated_at", "id", "category_id") VALUES ('MyString', 'MyText', 1, 1.5, 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 1.5, 1.5, '2020-04-05 15:07:05.555100', '2020-04-05 15:07:05.555100', 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.0ms)[0m  [1m[32mINSERT INTO "categories" ("title", "created_at", "updated_at", "id") VALUES ('MyString', '2020-04-05 15:07:05.556444', '2020-04-05 15:07:05.556444', 980190962)[0m
  [1m[36mFixture Insert (0.0ms)[0m  [1m[32mINSERT INTO "categories" ("title", "created_at", "updated_at", "id") VALUES ('MyString', '2020-04-05 15:07:05.556444', '2020-04-05 15:07:05.556444', 298486374)[0m
  [1m[36mFixture Insert (0.0ms)[0m  [1m[32mINSERT INTO "products" ("name", "description", "price", "created_at", "updated_at", "id", "product_category_id") VALUES ('MyString', 'MyText', 1.5, '2020-04-05 15:07:05.557240', '2020-04-05 15:07:05.557240', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "products" ("name", "description", "price", "created_at", "updated_at", "id", "product_category_id") VALUES ('MyString', 'MyText', 1.5, '2020-04-05 15:07:05.557240', '2020-04-05 15:07:05.557240', 298486374, 298486374)[0m
  [1m[35m (13.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
OrdersControllerTest: test_should_get_create
--------------------------------------------
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" ORDER BY "restaurants"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
Started POST "/orders" for 127.0.0.1 at 2020-04-05 12:07:05 -0300
Processing by OrdersController#create as HTML
  Parameters: {"order"=>{"restaurant"=>"#<Restaurant:0x00005561a8d00a98>", "name"=>"Funny Triangle", "phone_number"=>"123123123"}}
Unpermitted parameter: :restaurant
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
[active_model_serializers] Rendered ActiveModel::Serializer::Null with ActiveModel::Errors (0.1ms)
Completed 422 Unprocessable Entity in 3372ms (Views: 4.6ms | ActiveRecord: 0.3ms)
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Creating scope :open. Overwriting existing method Restaurant.open.
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "product_categories"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "order_products"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "orders"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "reviews"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "restaurants"[0m
  [1m[36mFixture Delete (0.0ms)[0m  [1m[31mDELETE FROM "categories"[0m
  [1m[36mFixture Delete (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "product_categories" ("title", "created_at", "updated_at", "id", "restaurant_id") VALUES ('MyString', '2020-04-05 15:07:27.775819', '2020-04-05 15:07:27.775819', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.0ms)[0m  [1m[32mINSERT INTO "product_categories" ("title", "created_at", "updated_at", "id", "restaurant_id") VALUES ('MyString', '2020-04-05 15:07:27.775819', '2020-04-05 15:07:27.775819', 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "order_products" ("quantity", "comment", "created_at", "updated_at", "id", "order_id", "product_id") VALUES (1, 'MyText', '2020-04-05 15:07:27.777216', '2020-04-05 15:07:27.777216', 980190962, 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.0ms)[0m  [1m[32mINSERT INTO "order_products" ("quantity", "comment", "created_at", "updated_at", "id", "order_id", "product_id") VALUES (1, 'MyText', '2020-04-05 15:07:27.777216', '2020-04-05 15:07:27.777216', 298486374, 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "orders" ("name", "phone_number", "total_value", "address", "status", "created_at", "updated_at", "id", "restaurant_id") VALUES ('MyString', 'MyString', 1.5, 'MyString', 1, '2020-04-05 15:07:27.778895', '2020-04-05 15:07:27.778895', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.0ms)[0m  [1m[32mINSERT INTO "orders" ("name", "phone_number", "total_value", "address", "status", "created_at", "updated_at", "id", "restaurant_id") VALUES ('MyString', 'MyString', 1.5, 'MyString', 1, '2020-04-05 15:07:27.778895', '2020-04-05 15:07:27.778895', 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.0ms)[0m  [1m[32mINSERT INTO "reviews" ("value", "created_at", "updated_at", "id", "restaurant_id") VALUES (1, '2020-04-05 15:07:27.780650', '2020-04-05 15:07:27.780650', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.0ms)[0m  [1m[32mINSERT INTO "reviews" ("value", "created_at", "updated_at", "id", "restaurant_id") VALUES (1, '2020-04-05 15:07:27.780650', '2020-04-05 15:07:27.780650', 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "restaurants" ("name", "description", "status", "delivery_tax", "state", "city", "street", "neighborhood", "number", "complement", "reference", "cep", "latitude", "longitude", "created_at", "updated_at", "id", "category_id") VALUES ('MyString', 'MyText', 1, 1.5, 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 1.5, 1.5, '2020-04-05 15:07:27.781594', '2020-04-05 15:07:27.781594', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "restaurants" ("name", "description", "status", "delivery_tax", "state", "city", "street", "neighborhood", "number", "complement", "reference", "cep", "latitude", "longitude", "created_at", "updated_at", "id", "category_id") VALUES ('MyString', 'MyText', 1, 1.5, 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 1.5, 1.5, '2020-04-05 15:07:27.781594', '2020-04-05 15:07:27.781594', 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.0ms)[0m  [1m[32mINSERT INTO "categories" ("title", "created_at", "updated_at", "id") VALUES ('MyString', '2020-04-05 15:07:27.782974', '2020-04-05 15:07:27.782974', 980190962)[0m
  [1m[36mFixture Insert (0.0ms)[0m  [1m[32mINSERT INTO "categories" ("title", "created_at", "updated_at", "id") VALUES ('MyString', '2020-04-05 15:07:27.782974', '2020-04-05 15:07:27.782974', 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "products" ("name", "description", "price", "created_at", "updated_at", "id", "product_category_id") VALUES ('MyString', 'MyText', 1.5, '2020-04-05 15:07:27.783802', '2020-04-05 15:07:27.783802', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.0ms)[0m  [1m[32mINSERT INTO "products" ("name", "description", "price", "created_at", "updated_at", "id", "product_category_id") VALUES ('MyString', 'MyText', 1.5, '2020-04-05 15:07:27.783802', '2020-04-05 15:07:27.783802', 298486374, 298486374)[0m
  [1m[35m (12.8ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
OrdersControllerTest: test_should_get_create
--------------------------------------------
  [1m[36mRestaurant Load (0.3ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" ORDER BY "restaurants"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
Started POST "/orders" for 127.0.0.1 at 2020-04-05 12:07:27 -0300
Processing by OrdersController#create as HTML
  Parameters: {"order"=>{"restaurant_id"=>"980190962", "name"=>"Funny Triangle", "phone_number"=>"123123123"}}
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRestaurant Load (0.3ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mOrder Create (0.3ms)[0m  [1m[32mINSERT INTO "orders" ("name", "phone_number", "total_value", "restaurant_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["name", "Funny Triangle"], ["phone_number", "123123123"], ["total_value", 0.0], ["restaurant_id", 980190962], ["created_at", "2020-04-05 15:07:38.585077"], ["updated_at", "2020-04-05 15:07:38.585077"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Class (0.08ms)
Completed 201 Created in 10696ms (Views: 5.5ms | ActiveRecord: 0.9ms)
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Creating scope :open. Overwriting existing method Restaurant.open.
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "product_categories"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "order_products"[0m
  [1m[36mFixture Delete (0.0ms)[0m  [1m[31mDELETE FROM "orders"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "reviews"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "restaurants"[0m
  [1m[36mFixture Delete (0.0ms)[0m  [1m[31mDELETE FROM "categories"[0m
  [1m[36mFixture Delete (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "product_categories" ("title", "created_at", "updated_at", "id", "restaurant_id") VALUES ('MyString', '2020-04-05 15:08:04.427175', '2020-04-05 15:08:04.427175', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "product_categories" ("title", "created_at", "updated_at", "id", "restaurant_id") VALUES ('MyString', '2020-04-05 15:08:04.427175', '2020-04-05 15:08:04.427175', 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "order_products" ("quantity", "comment", "created_at", "updated_at", "id", "order_id", "product_id") VALUES (1, 'MyText', '2020-04-05 15:08:04.428449', '2020-04-05 15:08:04.428449', 980190962, 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "order_products" ("quantity", "comment", "created_at", "updated_at", "id", "order_id", "product_id") VALUES (1, 'MyText', '2020-04-05 15:08:04.428449', '2020-04-05 15:08:04.428449', 298486374, 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "orders" ("name", "phone_number", "total_value", "address", "status", "created_at", "updated_at", "id", "restaurant_id") VALUES ('MyString', 'MyString', 1.5, 'MyString', 1, '2020-04-05 15:08:04.429407', '2020-04-05 15:08:04.429407', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "orders" ("name", "phone_number", "total_value", "address", "status", "created_at", "updated_at", "id", "restaurant_id") VALUES ('MyString', 'MyString', 1.5, 'MyString', 1, '2020-04-05 15:08:04.429407', '2020-04-05 15:08:04.429407', 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.0ms)[0m  [1m[32mINSERT INTO "reviews" ("value", "created_at", "updated_at", "id", "restaurant_id") VALUES (1, '2020-04-05 15:08:04.430747', '2020-04-05 15:08:04.430747', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.0ms)[0m  [1m[32mINSERT INTO "reviews" ("value", "created_at", "updated_at", "id", "restaurant_id") VALUES (1, '2020-04-05 15:08:04.430747', '2020-04-05 15:08:04.430747', 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "restaurants" ("name", "description", "status", "delivery_tax", "state", "city", "street", "neighborhood", "number", "complement", "reference", "cep", "latitude", "longitude", "created_at", "updated_at", "id", "category_id") VALUES ('MyString', 'MyText', 1, 1.5, 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 1.5, 1.5, '2020-04-05 15:08:04.431599', '2020-04-05 15:08:04.431599', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "restaurants" ("name", "description", "status", "delivery_tax", "state", "city", "street", "neighborhood", "number", "complement", "reference", "cep", "latitude", "longitude", "created_at", "updated_at", "id", "category_id") VALUES ('MyString', 'MyText', 1, 1.5, 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 1.5, 1.5, '2020-04-05 15:08:04.431599', '2020-04-05 15:08:04.431599', 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.0ms)[0m  [1m[32mINSERT INTO "categories" ("title", "created_at", "updated_at", "id") VALUES ('MyString', '2020-04-05 15:08:04.432917', '2020-04-05 15:08:04.432917', 980190962)[0m
  [1m[36mFixture Insert (0.0ms)[0m  [1m[32mINSERT INTO "categories" ("title", "created_at", "updated_at", "id") VALUES ('MyString', '2020-04-05 15:08:04.432917', '2020-04-05 15:08:04.432917', 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "products" ("name", "description", "price", "created_at", "updated_at", "id", "product_category_id") VALUES ('MyString', 'MyText', 1.5, '2020-04-05 15:08:04.433724', '2020-04-05 15:08:04.433724', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "products" ("name", "description", "price", "created_at", "updated_at", "id", "product_category_id") VALUES ('MyString', 'MyText', 1.5, '2020-04-05 15:08:04.433724', '2020-04-05 15:08:04.433724', 298486374, 298486374)[0m
  [1m[35m (13.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
OrdersControllerTest: test_should_get_show
------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Creating scope :open. Overwriting existing method Restaurant.open.
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "product_categories"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "order_products"[0m
  [1m[36mFixture Delete (0.0ms)[0m  [1m[31mDELETE FROM "orders"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "reviews"[0m
  [1m[36mFixture Delete (0.0ms)[0m  [1m[31mDELETE FROM "restaurants"[0m
  [1m[36mFixture Delete (0.0ms)[0m  [1m[31mDELETE FROM "categories"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "product_categories" ("title", "created_at", "updated_at", "id", "restaurant_id") VALUES ('MyString', '2020-04-05 15:08:20.708828', '2020-04-05 15:08:20.708828', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "product_categories" ("title", "created_at", "updated_at", "id", "restaurant_id") VALUES ('MyString', '2020-04-05 15:08:20.708828', '2020-04-05 15:08:20.708828', 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "order_products" ("quantity", "comment", "created_at", "updated_at", "id", "order_id", "product_id") VALUES (1, 'MyText', '2020-04-05 15:08:20.710068', '2020-04-05 15:08:20.710068', 980190962, 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "order_products" ("quantity", "comment", "created_at", "updated_at", "id", "order_id", "product_id") VALUES (1, 'MyText', '2020-04-05 15:08:20.710068', '2020-04-05 15:08:20.710068', 298486374, 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "orders" ("name", "phone_number", "total_value", "address", "status", "created_at", "updated_at", "id", "restaurant_id") VALUES ('MyString', 'MyString', 1.5, 'MyString', 1, '2020-04-05 15:08:20.711018', '2020-04-05 15:08:20.711018', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "orders" ("name", "phone_number", "total_value", "address", "status", "created_at", "updated_at", "id", "restaurant_id") VALUES ('MyString', 'MyString', 1.5, 'MyString', 1, '2020-04-05 15:08:20.711018', '2020-04-05 15:08:20.711018', 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "reviews" ("value", "created_at", "updated_at", "id", "restaurant_id") VALUES (1, '2020-04-05 15:08:20.712056', '2020-04-05 15:08:20.712056', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "reviews" ("value", "created_at", "updated_at", "id", "restaurant_id") VALUES (1, '2020-04-05 15:08:20.712056', '2020-04-05 15:08:20.712056', 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "restaurants" ("name", "description", "status", "delivery_tax", "state", "city", "street", "neighborhood", "number", "complement", "reference", "cep", "latitude", "longitude", "created_at", "updated_at", "id", "category_id") VALUES ('MyString', 'MyText', 1, 1.5, 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 1.5, 1.5, '2020-04-05 15:08:20.712970', '2020-04-05 15:08:20.712970', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "restaurants" ("name", "description", "status", "delivery_tax", "state", "city", "street", "neighborhood", "number", "complement", "reference", "cep", "latitude", "longitude", "created_at", "updated_at", "id", "category_id") VALUES ('MyString', 'MyText', 1, 1.5, 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 1.5, 1.5, '2020-04-05 15:08:20.712970', '2020-04-05 15:08:20.712970', 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "categories" ("title", "created_at", "updated_at", "id") VALUES ('MyString', '2020-04-05 15:08:20.714290', '2020-04-05 15:08:20.714290', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "categories" ("title", "created_at", "updated_at", "id") VALUES ('MyString', '2020-04-05 15:08:20.714290', '2020-04-05 15:08:20.714290', 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "products" ("name", "description", "price", "created_at", "updated_at", "id", "product_category_id") VALUES ('MyString', 'MyText', 1.5, '2020-04-05 15:08:20.715097', '2020-04-05 15:08:20.715097', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "products" ("name", "description", "price", "created_at", "updated_at", "id", "product_category_id") VALUES ('MyString', 'MyText', 1.5, '2020-04-05 15:08:20.715097', '2020-04-05 15:08:20.715097', 298486374, 298486374)[0m
  [1m[35m (13.9ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
OrdersControllerTest: test_should_get_show
------------------------------------------
Started GET "/orders" for 127.0.0.1 at 2020-04-05 12:08:20 -0300
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Creating scope :open. Overwriting existing method Restaurant.open.
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "product_categories"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "order_products"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "orders"[0m
  [1m[36mFixture Delete (0.0ms)[0m  [1m[31mDELETE FROM "reviews"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "restaurants"[0m
  [1m[36mFixture Delete (0.0ms)[0m  [1m[31mDELETE FROM "categories"[0m
  [1m[36mFixture Delete (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "product_categories" ("title", "created_at", "updated_at", "id", "restaurant_id") VALUES ('MyString', '2020-04-05 15:09:29.917092', '2020-04-05 15:09:29.917092', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "product_categories" ("title", "created_at", "updated_at", "id", "restaurant_id") VALUES ('MyString', '2020-04-05 15:09:29.917092', '2020-04-05 15:09:29.917092', 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "order_products" ("quantity", "comment", "created_at", "updated_at", "id", "order_id", "product_id") VALUES (1, 'MyText', '2020-04-05 15:09:29.918363', '2020-04-05 15:09:29.918363', 980190962, 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "order_products" ("quantity", "comment", "created_at", "updated_at", "id", "order_id", "product_id") VALUES (1, 'MyText', '2020-04-05 15:09:29.918363', '2020-04-05 15:09:29.918363', 298486374, 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "orders" ("name", "phone_number", "total_value", "address", "status", "created_at", "updated_at", "id", "restaurant_id") VALUES ('MyString', 'MyString', 1.5, 'MyString', 1, '2020-04-05 15:09:29.919318', '2020-04-05 15:09:29.919318', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "orders" ("name", "phone_number", "total_value", "address", "status", "created_at", "updated_at", "id", "restaurant_id") VALUES ('MyString', 'MyString', 1.5, 'MyString', 1, '2020-04-05 15:09:29.919318', '2020-04-05 15:09:29.919318', 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "reviews" ("value", "created_at", "updated_at", "id", "restaurant_id") VALUES (1, '2020-04-05 15:09:29.920363', '2020-04-05 15:09:29.920363', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "reviews" ("value", "created_at", "updated_at", "id", "restaurant_id") VALUES (1, '2020-04-05 15:09:29.920363', '2020-04-05 15:09:29.920363', 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "restaurants" ("name", "description", "status", "delivery_tax", "state", "city", "street", "neighborhood", "number", "complement", "reference", "cep", "latitude", "longitude", "created_at", "updated_at", "id", "category_id") VALUES ('MyString', 'MyText', 1, 1.5, 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 1.5, 1.5, '2020-04-05 15:09:29.921195', '2020-04-05 15:09:29.921195', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "restaurants" ("name", "description", "status", "delivery_tax", "state", "city", "street", "neighborhood", "number", "complement", "reference", "cep", "latitude", "longitude", "created_at", "updated_at", "id", "category_id") VALUES ('MyString', 'MyText', 1, 1.5, 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 1.5, 1.5, '2020-04-05 15:09:29.921195', '2020-04-05 15:09:29.921195', 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.0ms)[0m  [1m[32mINSERT INTO "categories" ("title", "created_at", "updated_at", "id") VALUES ('MyString', '2020-04-05 15:09:29.922529', '2020-04-05 15:09:29.922529', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "categories" ("title", "created_at", "updated_at", "id") VALUES ('MyString', '2020-04-05 15:09:29.922529', '2020-04-05 15:09:29.922529', 298486374)[0m
  [1m[36mFixture Insert (0.0ms)[0m  [1m[32mINSERT INTO "products" ("name", "description", "price", "created_at", "updated_at", "id", "product_category_id") VALUES ('MyString', 'MyText', 1.5, '2020-04-05 15:09:29.923317', '2020-04-05 15:09:29.923317', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.0ms)[0m  [1m[32mINSERT INTO "products" ("name", "description", "price", "created_at", "updated_at", "id", "product_category_id") VALUES ('MyString', 'MyText', 1.5, '2020-04-05 15:09:29.923317', '2020-04-05 15:09:29.923317', 298486374, 298486374)[0m
  [1m[35m (13.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
OrdersControllerTest: test_should_get_show
------------------------------------------
Started GET "/orders" for 127.0.0.1 at 2020-04-05 12:09:30 -0300
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Creating scope :open. Overwriting existing method Restaurant.open.
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "product_categories"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "order_products"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "orders"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "reviews"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "restaurants"[0m
  [1m[36mFixture Delete (0.0ms)[0m  [1m[31mDELETE FROM "categories"[0m
  [1m[36mFixture Delete (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "product_categories" ("title", "created_at", "updated_at", "id", "restaurant_id") VALUES ('MyString', '2020-04-05 15:10:13.262234', '2020-04-05 15:10:13.262234', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "product_categories" ("title", "created_at", "updated_at", "id", "restaurant_id") VALUES ('MyString', '2020-04-05 15:10:13.262234', '2020-04-05 15:10:13.262234', 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "order_products" ("quantity", "comment", "created_at", "updated_at", "id", "order_id", "product_id") VALUES (1, 'MyText', '2020-04-05 15:10:13.263667', '2020-04-05 15:10:13.263667', 980190962, 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "order_products" ("quantity", "comment", "created_at", "updated_at", "id", "order_id", "product_id") VALUES (1, 'MyText', '2020-04-05 15:10:13.263667', '2020-04-05 15:10:13.263667', 298486374, 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "orders" ("name", "phone_number", "total_value", "address", "status", "created_at", "updated_at", "id", "restaurant_id") VALUES ('MyString', 'MyString', 1.5, 'MyString', 1, '2020-04-05 15:10:13.264648', '2020-04-05 15:10:13.264648', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "orders" ("name", "phone_number", "total_value", "address", "status", "created_at", "updated_at", "id", "restaurant_id") VALUES ('MyString', 'MyString', 1.5, 'MyString', 1, '2020-04-05 15:10:13.264648', '2020-04-05 15:10:13.264648', 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "reviews" ("value", "created_at", "updated_at", "id", "restaurant_id") VALUES (1, '2020-04-05 15:10:13.265685', '2020-04-05 15:10:13.265685', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "reviews" ("value", "created_at", "updated_at", "id", "restaurant_id") VALUES (1, '2020-04-05 15:10:13.265685', '2020-04-05 15:10:13.265685', 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "restaurants" ("name", "description", "status", "delivery_tax", "state", "city", "street", "neighborhood", "number", "complement", "reference", "cep", "latitude", "longitude", "created_at", "updated_at", "id", "category_id") VALUES ('MyString', 'MyText', 1, 1.5, 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 1.5, 1.5, '2020-04-05 15:10:13.266519', '2020-04-05 15:10:13.266519', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "restaurants" ("name", "description", "status", "delivery_tax", "state", "city", "street", "neighborhood", "number", "complement", "reference", "cep", "latitude", "longitude", "created_at", "updated_at", "id", "category_id") VALUES ('MyString', 'MyText', 1, 1.5, 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 1.5, 1.5, '2020-04-05 15:10:13.266519', '2020-04-05 15:10:13.266519', 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "categories" ("title", "created_at", "updated_at", "id") VALUES ('MyString', '2020-04-05 15:10:13.267822', '2020-04-05 15:10:13.267822', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "categories" ("title", "created_at", "updated_at", "id") VALUES ('MyString', '2020-04-05 15:10:13.267822', '2020-04-05 15:10:13.267822', 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "products" ("name", "description", "price", "created_at", "updated_at", "id", "product_category_id") VALUES ('MyString', 'MyText', 1.5, '2020-04-05 15:10:13.268629', '2020-04-05 15:10:13.268629', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "products" ("name", "description", "price", "created_at", "updated_at", "id", "product_category_id") VALUES ('MyString', 'MyText', 1.5, '2020-04-05 15:10:13.268629', '2020-04-05 15:10:13.268629', 298486374, 298486374)[0m
  [1m[35m (13.5ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
OrdersControllerTest: test_should_get_show
------------------------------------------
Started GET "/orders/:id" for 127.0.0.1 at 2020-04-05 12:10:13 -0300
Processing by OrdersController#show as HTML
  Parameters: {"id"=>":id"}
  [1m[36mOrder Load (0.2ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 0], ["LIMIT", 1]]
Completed 404 Not Found in 2ms (ActiveRecord: 0.2ms)
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Creating scope :open. Overwriting existing method Restaurant.open.
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "product_categories"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "order_products"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "orders"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "reviews"[0m
  [1m[36mFixture Delete (0.0ms)[0m  [1m[31mDELETE FROM "restaurants"[0m
  [1m[36mFixture Delete (0.0ms)[0m  [1m[31mDELETE FROM "categories"[0m
  [1m[36mFixture Delete (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "product_categories" ("title", "created_at", "updated_at", "id", "restaurant_id") VALUES ('MyString', '2020-04-05 15:11:03.468414', '2020-04-05 15:11:03.468414', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "product_categories" ("title", "created_at", "updated_at", "id", "restaurant_id") VALUES ('MyString', '2020-04-05 15:11:03.468414', '2020-04-05 15:11:03.468414', 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "order_products" ("quantity", "comment", "created_at", "updated_at", "id", "order_id", "product_id") VALUES (1, 'MyText', '2020-04-05 15:11:03.470359', '2020-04-05 15:11:03.470359', 980190962, 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "order_products" ("quantity", "comment", "created_at", "updated_at", "id", "order_id", "product_id") VALUES (1, 'MyText', '2020-04-05 15:11:03.470359', '2020-04-05 15:11:03.470359', 298486374, 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "orders" ("name", "phone_number", "total_value", "address", "status", "created_at", "updated_at", "id", "restaurant_id") VALUES ('MyString', 'MyString', 1.5, 'MyString', 1, '2020-04-05 15:11:03.472170', '2020-04-05 15:11:03.472170', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "orders" ("name", "phone_number", "total_value", "address", "status", "created_at", "updated_at", "id", "restaurant_id") VALUES ('MyString', 'MyString', 1.5, 'MyString', 1, '2020-04-05 15:11:03.472170', '2020-04-05 15:11:03.472170', 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.0ms)[0m  [1m[32mINSERT INTO "reviews" ("value", "created_at", "updated_at", "id", "restaurant_id") VALUES (1, '2020-04-05 15:11:03.473838', '2020-04-05 15:11:03.473838', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.0ms)[0m  [1m[32mINSERT INTO "reviews" ("value", "created_at", "updated_at", "id", "restaurant_id") VALUES (1, '2020-04-05 15:11:03.473838', '2020-04-05 15:11:03.473838', 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "restaurants" ("name", "description", "status", "delivery_tax", "state", "city", "street", "neighborhood", "number", "complement", "reference", "cep", "latitude", "longitude", "created_at", "updated_at", "id", "category_id") VALUES ('MyString', 'MyText', 1, 1.5, 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 1.5, 1.5, '2020-04-05 15:11:03.474760', '2020-04-05 15:11:03.474760', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "restaurants" ("name", "description", "status", "delivery_tax", "state", "city", "street", "neighborhood", "number", "complement", "reference", "cep", "latitude", "longitude", "created_at", "updated_at", "id", "category_id") VALUES ('MyString', 'MyText', 1, 1.5, 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 1.5, 1.5, '2020-04-05 15:11:03.474760', '2020-04-05 15:11:03.474760', 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.0ms)[0m  [1m[32mINSERT INTO "categories" ("title", "created_at", "updated_at", "id") VALUES ('MyString', '2020-04-05 15:11:03.476166', '2020-04-05 15:11:03.476166', 980190962)[0m
  [1m[36mFixture Insert (0.0ms)[0m  [1m[32mINSERT INTO "categories" ("title", "created_at", "updated_at", "id") VALUES ('MyString', '2020-04-05 15:11:03.476166', '2020-04-05 15:11:03.476166', 298486374)[0m
  [1m[36mFixture Insert (0.0ms)[0m  [1m[32mINSERT INTO "products" ("name", "description", "price", "created_at", "updated_at", "id", "product_category_id") VALUES ('MyString', 'MyText', 1.5, '2020-04-05 15:11:03.477037', '2020-04-05 15:11:03.477037', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "products" ("name", "description", "price", "created_at", "updated_at", "id", "product_category_id") VALUES ('MyString', 'MyText', 1.5, '2020-04-05 15:11:03.477037', '2020-04-05 15:11:03.477037', 298486374, 298486374)[0m
  [1m[35m (13.9ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
OrdersControllerTest: test_should_get_show
------------------------------------------
Started GET "/orders?id=1" for 127.0.0.1 at 2020-04-05 12:11:03 -0300
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Creating scope :open. Overwriting existing method Restaurant.open.
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "product_categories"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "order_products"[0m
  [1m[36mFixture Delete (0.0ms)[0m  [1m[31mDELETE FROM "orders"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "reviews"[0m
  [1m[36mFixture Delete (0.0ms)[0m  [1m[31mDELETE FROM "restaurants"[0m
  [1m[36mFixture Delete (0.0ms)[0m  [1m[31mDELETE FROM "categories"[0m
  [1m[36mFixture Delete (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "product_categories" ("title", "created_at", "updated_at", "id", "restaurant_id") VALUES ('MyString', '2020-04-05 15:11:12.999466', '2020-04-05 15:11:12.999466', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "product_categories" ("title", "created_at", "updated_at", "id", "restaurant_id") VALUES ('MyString', '2020-04-05 15:11:12.999466', '2020-04-05 15:11:12.999466', 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "order_products" ("quantity", "comment", "created_at", "updated_at", "id", "order_id", "product_id") VALUES (1, 'MyText', '2020-04-05 15:11:13.000707', '2020-04-05 15:11:13.000707', 980190962, 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "order_products" ("quantity", "comment", "created_at", "updated_at", "id", "order_id", "product_id") VALUES (1, 'MyText', '2020-04-05 15:11:13.000707', '2020-04-05 15:11:13.000707', 298486374, 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "orders" ("name", "phone_number", "total_value", "address", "status", "created_at", "updated_at", "id", "restaurant_id") VALUES ('MyString', 'MyString', 1.5, 'MyString', 1, '2020-04-05 15:11:13.001659', '2020-04-05 15:11:13.001659', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "orders" ("name", "phone_number", "total_value", "address", "status", "created_at", "updated_at", "id", "restaurant_id") VALUES ('MyString', 'MyString', 1.5, 'MyString', 1, '2020-04-05 15:11:13.001659', '2020-04-05 15:11:13.001659', 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "reviews" ("value", "created_at", "updated_at", "id", "restaurant_id") VALUES (1, '2020-04-05 15:11:13.002709', '2020-04-05 15:11:13.002709', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "reviews" ("value", "created_at", "updated_at", "id", "restaurant_id") VALUES (1, '2020-04-05 15:11:13.002709', '2020-04-05 15:11:13.002709', 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "restaurants" ("name", "description", "status", "delivery_tax", "state", "city", "street", "neighborhood", "number", "complement", "reference", "cep", "latitude", "longitude", "created_at", "updated_at", "id", "category_id") VALUES ('MyString', 'MyText', 1, 1.5, 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 1.5, 1.5, '2020-04-05 15:11:13.003545', '2020-04-05 15:11:13.003545', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "restaurants" ("name", "description", "status", "delivery_tax", "state", "city", "street", "neighborhood", "number", "complement", "reference", "cep", "latitude", "longitude", "created_at", "updated_at", "id", "category_id") VALUES ('MyString', 'MyText', 1, 1.5, 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 1.5, 1.5, '2020-04-05 15:11:13.003545', '2020-04-05 15:11:13.003545', 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.0ms)[0m  [1m[32mINSERT INTO "categories" ("title", "created_at", "updated_at", "id") VALUES ('MyString', '2020-04-05 15:11:13.004853', '2020-04-05 15:11:13.004853', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "categories" ("title", "created_at", "updated_at", "id") VALUES ('MyString', '2020-04-05 15:11:13.004853', '2020-04-05 15:11:13.004853', 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "products" ("name", "description", "price", "created_at", "updated_at", "id", "product_category_id") VALUES ('MyString', 'MyText', 1.5, '2020-04-05 15:11:13.005659', '2020-04-05 15:11:13.005659', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "products" ("name", "description", "price", "created_at", "updated_at", "id", "product_category_id") VALUES ('MyString', 'MyText', 1.5, '2020-04-05 15:11:13.005659', '2020-04-05 15:11:13.005659', 298486374, 298486374)[0m
  [1m[35m (12.5ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
OrdersControllerTest: test_should_get_show
------------------------------------------
Started GET "/orders/:id?id=1" for 127.0.0.1 at 2020-04-05 12:11:13 -0300
Processing by OrdersController#show as HTML
  Parameters: {"id"=>":id"}
  [1m[36mOrder Load (0.2ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 0], ["LIMIT", 1]]
Completed 404 Not Found in 1ms (ActiveRecord: 0.2ms)
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Creating scope :open. Overwriting existing method Restaurant.open.
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "product_categories"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "order_products"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "orders"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "reviews"[0m
  [1m[36mFixture Delete (0.0ms)[0m  [1m[31mDELETE FROM "restaurants"[0m
  [1m[36mFixture Delete (0.0ms)[0m  [1m[31mDELETE FROM "categories"[0m
  [1m[36mFixture Delete (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "product_categories" ("title", "created_at", "updated_at", "id", "restaurant_id") VALUES ('MyString', '2020-04-05 15:11:19.933939', '2020-04-05 15:11:19.933939', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "product_categories" ("title", "created_at", "updated_at", "id", "restaurant_id") VALUES ('MyString', '2020-04-05 15:11:19.933939', '2020-04-05 15:11:19.933939', 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "order_products" ("quantity", "comment", "created_at", "updated_at", "id", "order_id", "product_id") VALUES (1, 'MyText', '2020-04-05 15:11:19.935180', '2020-04-05 15:11:19.935180', 980190962, 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "order_products" ("quantity", "comment", "created_at", "updated_at", "id", "order_id", "product_id") VALUES (1, 'MyText', '2020-04-05 15:11:19.935180', '2020-04-05 15:11:19.935180', 298486374, 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "orders" ("name", "phone_number", "total_value", "address", "status", "created_at", "updated_at", "id", "restaurant_id") VALUES ('MyString', 'MyString', 1.5, 'MyString', 1, '2020-04-05 15:11:19.936247', '2020-04-05 15:11:19.936247', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "orders" ("name", "phone_number", "total_value", "address", "status", "created_at", "updated_at", "id", "restaurant_id") VALUES ('MyString', 'MyString', 1.5, 'MyString', 1, '2020-04-05 15:11:19.936247', '2020-04-05 15:11:19.936247', 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "reviews" ("value", "created_at", "updated_at", "id", "restaurant_id") VALUES (1, '2020-04-05 15:11:19.937292', '2020-04-05 15:11:19.937292', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "reviews" ("value", "created_at", "updated_at", "id", "restaurant_id") VALUES (1, '2020-04-05 15:11:19.937292', '2020-04-05 15:11:19.937292', 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "restaurants" ("name", "description", "status", "delivery_tax", "state", "city", "street", "neighborhood", "number", "complement", "reference", "cep", "latitude", "longitude", "created_at", "updated_at", "id", "category_id") VALUES ('MyString', 'MyText', 1, 1.5, 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 1.5, 1.5, '2020-04-05 15:11:19.938128', '2020-04-05 15:11:19.938128', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "restaurants" ("name", "description", "status", "delivery_tax", "state", "city", "street", "neighborhood", "number", "complement", "reference", "cep", "latitude", "longitude", "created_at", "updated_at", "id", "category_id") VALUES ('MyString', 'MyText', 1, 1.5, 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 1.5, 1.5, '2020-04-05 15:11:19.938128', '2020-04-05 15:11:19.938128', 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "categories" ("title", "created_at", "updated_at", "id") VALUES ('MyString', '2020-04-05 15:11:19.939426', '2020-04-05 15:11:19.939426', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "categories" ("title", "created_at", "updated_at", "id") VALUES ('MyString', '2020-04-05 15:11:19.939426', '2020-04-05 15:11:19.939426', 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "products" ("name", "description", "price", "created_at", "updated_at", "id", "product_category_id") VALUES ('MyString', 'MyText', 1.5, '2020-04-05 15:11:19.940254', '2020-04-05 15:11:19.940254', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "products" ("name", "description", "price", "created_at", "updated_at", "id", "product_category_id") VALUES ('MyString', 'MyText', 1.5, '2020-04-05 15:11:19.940254', '2020-04-05 15:11:19.940254', 298486374, 298486374)[0m
  [1m[35m (11.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
OrdersControllerTest: test_should_get_show
------------------------------------------
Started GET "/orders/1?id=1" for 127.0.0.1 at 2020-04-05 12:11:20 -0300
Processing by OrdersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mOrder Load (0.2ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
Completed 404 Not Found in 3ms (ActiveRecord: 0.2ms)
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Creating scope :open. Overwriting existing method Restaurant.open.
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "product_categories"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "order_products"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "orders"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "reviews"[0m
  [1m[36mFixture Delete (0.0ms)[0m  [1m[31mDELETE FROM "restaurants"[0m
  [1m[36mFixture Delete (0.0ms)[0m  [1m[31mDELETE FROM "categories"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "product_categories" ("title", "created_at", "updated_at", "id", "restaurant_id") VALUES ('MyString', '2020-04-05 15:11:46.809929', '2020-04-05 15:11:46.809929', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "product_categories" ("title", "created_at", "updated_at", "id", "restaurant_id") VALUES ('MyString', '2020-04-05 15:11:46.809929', '2020-04-05 15:11:46.809929', 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "order_products" ("quantity", "comment", "created_at", "updated_at", "id", "order_id", "product_id") VALUES (1, 'MyText', '2020-04-05 15:11:46.811187', '2020-04-05 15:11:46.811187', 980190962, 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "order_products" ("quantity", "comment", "created_at", "updated_at", "id", "order_id", "product_id") VALUES (1, 'MyText', '2020-04-05 15:11:46.811187', '2020-04-05 15:11:46.811187', 298486374, 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "orders" ("name", "phone_number", "total_value", "address", "status", "created_at", "updated_at", "id", "restaurant_id") VALUES ('MyString', 'MyString', 1.5, 'MyString', 1, '2020-04-05 15:11:46.812128', '2020-04-05 15:11:46.812128', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "orders" ("name", "phone_number", "total_value", "address", "status", "created_at", "updated_at", "id", "restaurant_id") VALUES ('MyString', 'MyString', 1.5, 'MyString', 1, '2020-04-05 15:11:46.812128', '2020-04-05 15:11:46.812128', 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "reviews" ("value", "created_at", "updated_at", "id", "restaurant_id") VALUES (1, '2020-04-05 15:11:46.813176', '2020-04-05 15:11:46.813176', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "reviews" ("value", "created_at", "updated_at", "id", "restaurant_id") VALUES (1, '2020-04-05 15:11:46.813176', '2020-04-05 15:11:46.813176', 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "restaurants" ("name", "description", "status", "delivery_tax", "state", "city", "street", "neighborhood", "number", "complement", "reference", "cep", "latitude", "longitude", "created_at", "updated_at", "id", "category_id") VALUES ('MyString', 'MyText', 1, 1.5, 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 1.5, 1.5, '2020-04-05 15:11:46.814019', '2020-04-05 15:11:46.814019', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "restaurants" ("name", "description", "status", "delivery_tax", "state", "city", "street", "neighborhood", "number", "complement", "reference", "cep", "latitude", "longitude", "created_at", "updated_at", "id", "category_id") VALUES ('MyString', 'MyText', 1, 1.5, 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 1.5, 1.5, '2020-04-05 15:11:46.814019', '2020-04-05 15:11:46.814019', 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "categories" ("title", "created_at", "updated_at", "id") VALUES ('MyString', '2020-04-05 15:11:46.815331', '2020-04-05 15:11:46.815331', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "categories" ("title", "created_at", "updated_at", "id") VALUES ('MyString', '2020-04-05 15:11:46.815331', '2020-04-05 15:11:46.815331', 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "products" ("name", "description", "price", "created_at", "updated_at", "id", "product_category_id") VALUES ('MyString', 'MyText', 1.5, '2020-04-05 15:11:46.816154', '2020-04-05 15:11:46.816154', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "products" ("name", "description", "price", "created_at", "updated_at", "id", "product_category_id") VALUES ('MyString', 'MyText', 1.5, '2020-04-05 15:11:46.816154', '2020-04-05 15:11:46.816154', 298486374, 298486374)[0m
  [1m[35m (13.5ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
OrdersControllerTest: test_should_get_show
------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Creating scope :open. Overwriting existing method Restaurant.open.
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "product_categories"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "order_products"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "orders"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "reviews"[0m
  [1m[36mFixture Delete (0.0ms)[0m  [1m[31mDELETE FROM "restaurants"[0m
  [1m[36mFixture Delete (0.0ms)[0m  [1m[31mDELETE FROM "categories"[0m
  [1m[36mFixture Delete (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "product_categories" ("title", "created_at", "updated_at", "id", "restaurant_id") VALUES ('MyString', '2020-04-05 15:12:55.089792', '2020-04-05 15:12:55.089792', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "product_categories" ("title", "created_at", "updated_at", "id", "restaurant_id") VALUES ('MyString', '2020-04-05 15:12:55.089792', '2020-04-05 15:12:55.089792', 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "order_products" ("quantity", "comment", "created_at", "updated_at", "id", "order_id", "product_id") VALUES (1, 'MyText', '2020-04-05 15:12:55.091050', '2020-04-05 15:12:55.091050', 980190962, 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "order_products" ("quantity", "comment", "created_at", "updated_at", "id", "order_id", "product_id") VALUES (1, 'MyText', '2020-04-05 15:12:55.091050', '2020-04-05 15:12:55.091050', 298486374, 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "orders" ("name", "phone_number", "total_value", "address", "status", "created_at", "updated_at", "id", "restaurant_id") VALUES ('MyString', 'MyString', 1.5, 'MyString', 1, '2020-04-05 15:12:55.092340', '2020-04-05 15:12:55.092340', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "orders" ("name", "phone_number", "total_value", "address", "status", "created_at", "updated_at", "id", "restaurant_id") VALUES ('MyString', 'MyString', 1.5, 'MyString', 1, '2020-04-05 15:12:55.092340', '2020-04-05 15:12:55.092340', 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "reviews" ("value", "created_at", "updated_at", "id", "restaurant_id") VALUES (1, '2020-04-05 15:12:55.093420', '2020-04-05 15:12:55.093420', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.0ms)[0m  [1m[32mINSERT INTO "reviews" ("value", "created_at", "updated_at", "id", "restaurant_id") VALUES (1, '2020-04-05 15:12:55.093420', '2020-04-05 15:12:55.093420', 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "restaurants" ("name", "description", "status", "delivery_tax", "state", "city", "street", "neighborhood", "number", "complement", "reference", "cep", "latitude", "longitude", "created_at", "updated_at", "id", "category_id") VALUES ('MyString', 'MyText', 1, 1.5, 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 1.5, 1.5, '2020-04-05 15:12:55.094265', '2020-04-05 15:12:55.094265', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "restaurants" ("name", "description", "status", "delivery_tax", "state", "city", "street", "neighborhood", "number", "complement", "reference", "cep", "latitude", "longitude", "created_at", "updated_at", "id", "category_id") VALUES ('MyString', 'MyText', 1, 1.5, 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 1.5, 1.5, '2020-04-05 15:12:55.094265', '2020-04-05 15:12:55.094265', 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.0ms)[0m  [1m[32mINSERT INTO "categories" ("title", "created_at", "updated_at", "id") VALUES ('MyString', '2020-04-05 15:12:55.095584', '2020-04-05 15:12:55.095584', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "categories" ("title", "created_at", "updated_at", "id") VALUES ('MyString', '2020-04-05 15:12:55.095584', '2020-04-05 15:12:55.095584', 298486374)[0m
  [1m[36mFixture Insert (0.0ms)[0m  [1m[32mINSERT INTO "products" ("name", "description", "price", "created_at", "updated_at", "id", "product_category_id") VALUES ('MyString', 'MyText', 1.5, '2020-04-05 15:12:55.096400', '2020-04-05 15:12:55.096400', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "products" ("name", "description", "price", "created_at", "updated_at", "id", "product_category_id") VALUES ('MyString', 'MyText', 1.5, '2020-04-05 15:12:55.096400', '2020-04-05 15:12:55.096400', 298486374, 298486374)[0m
  [1m[35m (13.4ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
OrdersControllerTest: test_should_get_show
------------------------------------------
  [1m[36mOrder Load (0.2ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" ORDER BY "orders"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Creating scope :open. Overwriting existing method Restaurant.open.
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "product_categories"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "order_products"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "orders"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "reviews"[0m
  [1m[36mFixture Delete (0.0ms)[0m  [1m[31mDELETE FROM "restaurants"[0m
  [1m[36mFixture Delete (0.0ms)[0m  [1m[31mDELETE FROM "categories"[0m
  [1m[36mFixture Delete (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mFixture Insert (0.9ms)[0m  [1m[32mINSERT INTO "product_categories" ("title", "created_at", "updated_at", "id", "restaurant_id") VALUES ('MyString', '2020-04-05 15:13:10.191791', '2020-04-05 15:13:10.191791', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "product_categories" ("title", "created_at", "updated_at", "id", "restaurant_id") VALUES ('MyString', '2020-04-05 15:13:10.191791', '2020-04-05 15:13:10.191791', 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "order_products" ("quantity", "comment", "created_at", "updated_at", "id", "order_id", "product_id") VALUES (1, 'MyText', '2020-04-05 15:13:10.193150', '2020-04-05 15:13:10.193150', 980190962, 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "order_products" ("quantity", "comment", "created_at", "updated_at", "id", "order_id", "product_id") VALUES (1, 'MyText', '2020-04-05 15:13:10.193150', '2020-04-05 15:13:10.193150', 298486374, 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "orders" ("name", "phone_number", "total_value", "address", "status", "created_at", "updated_at", "id", "restaurant_id") VALUES ('MyString', 'MyString', 1.5, 'MyString', 1, '2020-04-05 15:13:10.194145', '2020-04-05 15:13:10.194145', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "orders" ("name", "phone_number", "total_value", "address", "status", "created_at", "updated_at", "id", "restaurant_id") VALUES ('MyString', 'MyString', 1.5, 'MyString', 1, '2020-04-05 15:13:10.194145', '2020-04-05 15:13:10.194145', 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "reviews" ("value", "created_at", "updated_at", "id", "restaurant_id") VALUES (1, '2020-04-05 15:13:10.195186', '2020-04-05 15:13:10.195186', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "reviews" ("value", "created_at", "updated_at", "id", "restaurant_id") VALUES (1, '2020-04-05 15:13:10.195186', '2020-04-05 15:13:10.195186', 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "restaurants" ("name", "description", "status", "delivery_tax", "state", "city", "street", "neighborhood", "number", "complement", "reference", "cep", "latitude", "longitude", "created_at", "updated_at", "id", "category_id") VALUES ('MyString', 'MyText', 1, 1.5, 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 1.5, 1.5, '2020-04-05 15:13:10.196032', '2020-04-05 15:13:10.196032', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "restaurants" ("name", "description", "status", "delivery_tax", "state", "city", "street", "neighborhood", "number", "complement", "reference", "cep", "latitude", "longitude", "created_at", "updated_at", "id", "category_id") VALUES ('MyString', 'MyText', 1, 1.5, 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 1.5, 1.5, '2020-04-05 15:13:10.196032', '2020-04-05 15:13:10.196032', 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.0ms)[0m  [1m[32mINSERT INTO "categories" ("title", "created_at", "updated_at", "id") VALUES ('MyString', '2020-04-05 15:13:10.197469', '2020-04-05 15:13:10.197469', 980190962)[0m
  [1m[36mFixture Insert (0.0ms)[0m  [1m[32mINSERT INTO "categories" ("title", "created_at", "updated_at", "id") VALUES ('MyString', '2020-04-05 15:13:10.197469', '2020-04-05 15:13:10.197469', 298486374)[0m
  [1m[36mFixture Insert (0.0ms)[0m  [1m[32mINSERT INTO "products" ("name", "description", "price", "created_at", "updated_at", "id", "product_category_id") VALUES ('MyString', 'MyText', 1.5, '2020-04-05 15:13:10.198281', '2020-04-05 15:13:10.198281', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "products" ("name", "description", "price", "created_at", "updated_at", "id", "product_category_id") VALUES ('MyString', 'MyText', 1.5, '2020-04-05 15:13:10.198281', '2020-04-05 15:13:10.198281', 298486374, 298486374)[0m
  [1m[35m (12.8ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
OrdersControllerTest: test_should_get_show
------------------------------------------
  [1m[36mOrder Load (0.2ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" ORDER BY "orders"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
Started GET "/orders/980190962" for 127.0.0.1 at 2020-04-05 12:13:10 -0300
Processing by OrdersController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mOrder Load (0.1ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
[active_model_serializers] Rendered OrderSerializer with ActiveModelSerializers::Adapter::Json (0.47ms)
Completed 200 OK in 4ms (Views: 2.7ms | ActiveRecord: 0.1ms)
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Creating scope :open. Overwriting existing method Restaurant.open.
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "product_categories"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "order_products"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "orders"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "reviews"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "restaurants"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "categories"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "product_categories" ("title", "created_at", "updated_at", "id", "restaurant_id") VALUES ('MyString', '2020-04-05 15:13:15.654981', '2020-04-05 15:13:15.654981', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "product_categories" ("title", "created_at", "updated_at", "id", "restaurant_id") VALUES ('MyString', '2020-04-05 15:13:15.654981', '2020-04-05 15:13:15.654981', 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "order_products" ("quantity", "comment", "created_at", "updated_at", "id", "order_id", "product_id") VALUES (1, 'MyText', '2020-04-05 15:13:15.656497', '2020-04-05 15:13:15.656497', 980190962, 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "order_products" ("quantity", "comment", "created_at", "updated_at", "id", "order_id", "product_id") VALUES (1, 'MyText', '2020-04-05 15:13:15.656497', '2020-04-05 15:13:15.656497', 298486374, 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "orders" ("name", "phone_number", "total_value", "address", "status", "created_at", "updated_at", "id", "restaurant_id") VALUES ('MyString', 'MyString', 1.5, 'MyString', 1, '2020-04-05 15:13:15.657684', '2020-04-05 15:13:15.657684', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "orders" ("name", "phone_number", "total_value", "address", "status", "created_at", "updated_at", "id", "restaurant_id") VALUES ('MyString', 'MyString', 1.5, 'MyString', 1, '2020-04-05 15:13:15.657684', '2020-04-05 15:13:15.657684', 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "reviews" ("value", "created_at", "updated_at", "id", "restaurant_id") VALUES (1, '2020-04-05 15:13:15.658933', '2020-04-05 15:13:15.658933', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "reviews" ("value", "created_at", "updated_at", "id", "restaurant_id") VALUES (1, '2020-04-05 15:13:15.658933', '2020-04-05 15:13:15.658933', 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "restaurants" ("name", "description", "status", "delivery_tax", "state", "city", "street", "neighborhood", "number", "complement", "reference", "cep", "latitude", "longitude", "created_at", "updated_at", "id", "category_id") VALUES ('MyString', 'MyText', 1, 1.5, 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 1.5, 1.5, '2020-04-05 15:13:15.659831', '2020-04-05 15:13:15.659831', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.7ms)[0m  [1m[32mINSERT INTO "restaurants" ("name", "description", "status", "delivery_tax", "state", "city", "street", "neighborhood", "number", "complement", "reference", "cep", "latitude", "longitude", "created_at", "updated_at", "id", "category_id") VALUES ('MyString', 'MyText', 1, 1.5, 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 1.5, 1.5, '2020-04-05 15:13:15.659831', '2020-04-05 15:13:15.659831', 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "categories" ("title", "created_at", "updated_at", "id") VALUES ('MyString', '2020-04-05 15:13:15.661525', '2020-04-05 15:13:15.661525', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "categories" ("title", "created_at", "updated_at", "id") VALUES ('MyString', '2020-04-05 15:13:15.661525', '2020-04-05 15:13:15.661525', 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "products" ("name", "description", "price", "created_at", "updated_at", "id", "product_category_id") VALUES ('MyString', 'MyText', 1.5, '2020-04-05 15:13:15.662386', '2020-04-05 15:13:15.662386', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "products" ("name", "description", "price", "created_at", "updated_at", "id", "product_category_id") VALUES ('MyString', 'MyText', 1.5, '2020-04-05 15:13:15.662386', '2020-04-05 15:13:15.662386', 298486374, 298486374)[0m
  [1m[35m (12.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.3ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
OrdersControllerTest: test_should_get_show
------------------------------------------
  [1m[36mOrder Load (0.2ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" ORDER BY "orders"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
Started GET "/orders/980190962" for 127.0.0.1 at 2020-04-05 12:13:15 -0300
Processing by OrdersController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mOrder Load (0.1ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
[active_model_serializers] Rendered OrderSerializer with ActiveModelSerializers::Adapter::Json (0.55ms)
Completed 200 OK in 4ms (Views: 2.7ms | ActiveRecord: 0.1ms)
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
OrdersControllerTest: test_should_get_create
--------------------------------------------
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" ORDER BY "restaurants"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
Started POST "/orders" for 127.0.0.1 at 2020-04-05 12:13:15 -0300
Processing by OrdersController#create as HTML
  Parameters: {"order"=>{"restaurant_id"=>"980190962", "name"=>"Funny Triangle", "phone_number"=>"123123123"}}
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mOrder Create (0.2ms)[0m  [1m[32mINSERT INTO "orders" ("name", "phone_number", "total_value", "restaurant_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["name", "Funny Triangle"], ["phone_number", "123123123"], ["total_value", 0.0], ["restaurant_id", 980190962], ["created_at", "2020-04-05 15:13:15.832389"], ["updated_at", "2020-04-05 15:13:15.832389"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Class (0.05ms)
Completed 201 Created in 9ms (Views: 3.7ms | ActiveRecord: 0.5ms)
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Creating scope :open. Overwriting existing method Restaurant.open.
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "product_categories"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "order_products"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "orders"[0m
  [1m[36mFixture Delete (0.0ms)[0m  [1m[31mDELETE FROM "reviews"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "restaurants"[0m
  [1m[36mFixture Delete (0.0ms)[0m  [1m[31mDELETE FROM "categories"[0m
  [1m[36mFixture Delete (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "product_categories" ("title", "created_at", "updated_at", "id", "restaurant_id") VALUES ('MyString', '2020-04-05 15:13:24.247159', '2020-04-05 15:13:24.247159', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "product_categories" ("title", "created_at", "updated_at", "id", "restaurant_id") VALUES ('MyString', '2020-04-05 15:13:24.247159', '2020-04-05 15:13:24.247159', 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "order_products" ("quantity", "comment", "created_at", "updated_at", "id", "order_id", "product_id") VALUES (1, 'MyText', '2020-04-05 15:13:24.248805', '2020-04-05 15:13:24.248805', 980190962, 980190962, 980190962)[0m
  [1m[36mFixture Insert (1.3ms)[0m  [1m[32mINSERT INTO "order_products" ("quantity", "comment", "created_at", "updated_at", "id", "order_id", "product_id") VALUES (1, 'MyText', '2020-04-05 15:13:24.248805', '2020-04-05 15:13:24.248805', 298486374, 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "orders" ("name", "phone_number", "total_value", "address", "status", "created_at", "updated_at", "id", "restaurant_id") VALUES ('MyString', 'MyString', 1.5, 'MyString', 1, '2020-04-05 15:13:24.249768', '2020-04-05 15:13:24.249768', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "orders" ("name", "phone_number", "total_value", "address", "status", "created_at", "updated_at", "id", "restaurant_id") VALUES ('MyString', 'MyString', 1.5, 'MyString', 1, '2020-04-05 15:13:24.249768', '2020-04-05 15:13:24.249768', 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "reviews" ("value", "created_at", "updated_at", "id", "restaurant_id") VALUES (1, '2020-04-05 15:13:24.251429', '2020-04-05 15:13:24.251429', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "reviews" ("value", "created_at", "updated_at", "id", "restaurant_id") VALUES (1, '2020-04-05 15:13:24.251429', '2020-04-05 15:13:24.251429', 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "restaurants" ("name", "description", "status", "delivery_tax", "state", "city", "street", "neighborhood", "number", "complement", "reference", "cep", "latitude", "longitude", "created_at", "updated_at", "id", "category_id") VALUES ('MyString', 'MyText', 1, 1.5, 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 1.5, 1.5, '2020-04-05 15:13:24.252473', '2020-04-05 15:13:24.252473', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "restaurants" ("name", "description", "status", "delivery_tax", "state", "city", "street", "neighborhood", "number", "complement", "reference", "cep", "latitude", "longitude", "created_at", "updated_at", "id", "category_id") VALUES ('MyString', 'MyText', 1, 1.5, 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 1.5, 1.5, '2020-04-05 15:13:24.252473', '2020-04-05 15:13:24.252473', 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "categories" ("title", "created_at", "updated_at", "id") VALUES ('MyString', '2020-04-05 15:13:24.255065', '2020-04-05 15:13:24.255065', 980190962)[0m
  [1m[36mFixture Insert (0.0ms)[0m  [1m[32mINSERT INTO "categories" ("title", "created_at", "updated_at", "id") VALUES ('MyString', '2020-04-05 15:13:24.255065', '2020-04-05 15:13:24.255065', 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "products" ("name", "description", "price", "created_at", "updated_at", "id", "product_category_id") VALUES ('MyString', 'MyText', 1.5, '2020-04-05 15:13:24.256954', '2020-04-05 15:13:24.256954', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "products" ("name", "description", "price", "created_at", "updated_at", "id", "product_category_id") VALUES ('MyString', 'MyText', 1.5, '2020-04-05 15:13:24.256954', '2020-04-05 15:13:24.256954', 298486374, 298486374)[0m
  [1m[35m (12.8ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------
RestaurantsControllerTest: test_should_get_show
-----------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
RestaurantsControllerTest: test_should_get_index
------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------
RestaurantsControllerTest: test_should_get_search
-------------------------------------------------
Started GET "/restaurants/search" for 127.0.0.1 at 2020-04-05 12:13:24 -0300
Processing by RestaurantsController#search as HTML
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
[active_model_serializers]   [1m[35m (0.1ms)[0m  [1m[34mSELECT AVG("reviews"."value") FROM "reviews" WHERE "reviews"."restaurant_id" = ?[0m  [["restaurant_id", 298486374]]
[active_model_serializers]   [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT  "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 298486374], ["record_type", "Restaurant"], ["name", "image"], ["LIMIT", 1]]
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Json (8.2ms)
Completed 500 Internal Server Error in 29ms (ActiveRecord: 0.6ms)
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Creating scope :open. Overwriting existing method Restaurant.open.
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "product_categories"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "order_products"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "orders"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "reviews"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "restaurants"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "categories"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "product_categories" ("title", "created_at", "updated_at", "id", "restaurant_id") VALUES ('MyString', '2020-04-05 15:15:35.976872', '2020-04-05 15:15:35.976872', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "product_categories" ("title", "created_at", "updated_at", "id", "restaurant_id") VALUES ('MyString', '2020-04-05 15:15:35.976872', '2020-04-05 15:15:35.976872', 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "order_products" ("quantity", "comment", "created_at", "updated_at", "id", "order_id", "product_id") VALUES (1, 'MyText', '2020-04-05 15:15:35.978102', '2020-04-05 15:15:35.978102', 980190962, 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "order_products" ("quantity", "comment", "created_at", "updated_at", "id", "order_id", "product_id") VALUES (1, 'MyText', '2020-04-05 15:15:35.978102', '2020-04-05 15:15:35.978102', 298486374, 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "orders" ("name", "phone_number", "total_value", "address", "status", "created_at", "updated_at", "id", "restaurant_id") VALUES ('MyString', 'MyString', 1.5, 'MyString', 1, '2020-04-05 15:15:35.979043', '2020-04-05 15:15:35.979043', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "orders" ("name", "phone_number", "total_value", "address", "status", "created_at", "updated_at", "id", "restaurant_id") VALUES ('MyString', 'MyString', 1.5, 'MyString', 1, '2020-04-05 15:15:35.979043', '2020-04-05 15:15:35.979043', 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.0ms)[0m  [1m[32mINSERT INTO "reviews" ("value", "created_at", "updated_at", "id", "restaurant_id") VALUES (1, '2020-04-05 15:15:35.980068', '2020-04-05 15:15:35.980068', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "reviews" ("value", "created_at", "updated_at", "id", "restaurant_id") VALUES (1, '2020-04-05 15:15:35.980068', '2020-04-05 15:15:35.980068', 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "restaurants" ("name", "description", "status", "delivery_tax", "state", "city", "street", "neighborhood", "number", "complement", "reference", "cep", "latitude", "longitude", "created_at", "updated_at", "id", "category_id") VALUES ('MyString', 'MyText', 1, 1.5, 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 1.5, 1.5, '2020-04-05 15:15:35.980948', '2020-04-05 15:15:35.980948', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "restaurants" ("name", "description", "status", "delivery_tax", "state", "city", "street", "neighborhood", "number", "complement", "reference", "cep", "latitude", "longitude", "created_at", "updated_at", "id", "category_id") VALUES ('MyString', 'MyText', 1, 1.5, 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 1.5, 1.5, '2020-04-05 15:15:35.980948', '2020-04-05 15:15:35.980948', 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.0ms)[0m  [1m[32mINSERT INTO "categories" ("title", "created_at", "updated_at", "id") VALUES ('MyString', '2020-04-05 15:15:35.990332', '2020-04-05 15:15:35.990332', 980190962)[0m
  [1m[36mFixture Insert (0.0ms)[0m  [1m[32mINSERT INTO "categories" ("title", "created_at", "updated_at", "id") VALUES ('MyString', '2020-04-05 15:15:35.990332', '2020-04-05 15:15:35.990332', 298486374)[0m
  [1m[36mFixture Insert (0.0ms)[0m  [1m[32mINSERT INTO "products" ("name", "description", "price", "created_at", "updated_at", "id", "product_category_id") VALUES ('MyString', 'MyText', 1.5, '2020-04-05 15:15:35.991255', '2020-04-05 15:15:35.991255', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "products" ("name", "description", "price", "created_at", "updated_at", "id", "product_category_id") VALUES ('MyString', 'MyText', 1.5, '2020-04-05 15:15:35.991255', '2020-04-05 15:15:35.991255', 298486374, 298486374)[0m
  [1m[35m (13.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
RestaurantsControllerTest: test_should_get_index
------------------------------------------------
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT  "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 298486374], ["record_type", "Restaurant"], ["name", "image"], ["LIMIT", 1]]
[36m  Disk Storage (1.2ms) [0m[32mUploaded file to key: XSXpLqFnS44fUbciXEhVVY1K (checksum: 7r/DK32Mv5bcP+oY3ZoSew==)[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mActiveStorage::Blob Create (0.2ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["key", "XSXpLqFnS44fUbciXEhVVY1K"], ["filename", "restaurant.jpg"], ["content_type", "image/jpeg"], ["metadata", "{\"identified\":true}"], ["byte_size", 284707], ["checksum", "7r/DK32Mv5bcP+oY3ZoSew=="], ["created_at", "2020-04-05 15:15:36.111322"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mActiveStorage::Attachment Create (0.1ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "image"], ["record_type", "Restaurant"], ["record_id", 298486374], ["blob_id", 1], ["created_at", "2020-04-05 15:15:36.117464"]]
  [1m[36mRestaurant Update (0.1ms)[0m  [1m[33mUPDATE "restaurants" SET "updated_at" = ? WHERE "restaurants"."id" = ?[0m  [["updated_at", "2020-04-05 15:15:36.118116"], ["id", 298486374]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: de4f0b1b-00f4-4916-ac74-61e3dd446af6) to Async(default) with arguments: #<GlobalID:0x00005561a9bd69c8 @uri=#<URI::GID gid://ihungry/ActiveStorage::Blob/1>>
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT  "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 980190962], ["record_type", "Restaurant"], ["name", "image"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Blob Load (0.9ms)[0m  [1m[34mSELECT  "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [de4f0b1b-00f4-4916-ac74-61e3dd446af6] Performing ActiveStorage::AnalyzeJob (Job ID: de4f0b1b-00f4-4916-ac74-61e3dd446af6) from Async(default) with arguments: #<GlobalID:0x00007f2b78026430 @uri=#<URI::GID gid://ihungry/ActiveStorage::Blob/1>>
[ActiveJob] [ActiveStorage::AnalyzeJob] [de4f0b1b-00f4-4916-ac74-61e3dd446af6] [36m  Disk Storage (0.6ms) [0m[34mDownloaded file from key: XSXpLqFnS44fUbciXEhVVY1K[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [de4f0b1b-00f4-4916-ac74-61e3dd446af6] Skipping image analysis because the mini_magick gem isn't installed
[ActiveJob] [ActiveStorage::AnalyzeJob] [de4f0b1b-00f4-4916-ac74-61e3dd446af6]   [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [de4f0b1b-00f4-4916-ac74-61e3dd446af6]   [1m[36mActiveStorage::Blob Update (0.1ms)[0m  [1m[33mUPDATE "active_storage_blobs" SET "metadata" = ? WHERE "active_storage_blobs"."id" = ?[0m  [["metadata", "{\"identified\":true,\"analyzed\":true}"], ["id", 1]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [de4f0b1b-00f4-4916-ac74-61e3dd446af6]   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [de4f0b1b-00f4-4916-ac74-61e3dd446af6] Performed ActiveStorage::AnalyzeJob (Job ID: de4f0b1b-00f4-4916-ac74-61e3dd446af6) from Async(default) in 5.61ms
[36m  Disk Storage (3.0ms) [0m[32mUploaded file to key: a9Q2peooCL5LBYkxUPH3Voff (checksum: 7r/DK32Mv5bcP+oY3ZoSew==)[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mActiveStorage::Blob Create (0.1ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["key", "a9Q2peooCL5LBYkxUPH3Voff"], ["filename", "restaurant.jpg"], ["content_type", "image/jpeg"], ["metadata", "{\"identified\":true}"], ["byte_size", 284707], ["checksum", "7r/DK32Mv5bcP+oY3ZoSew=="], ["created_at", "2020-04-05 15:15:36.129268"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mActiveStorage::Attachment Create (0.1ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "image"], ["record_type", "Restaurant"], ["record_id", 980190962], ["blob_id", 2], ["created_at", "2020-04-05 15:15:36.130562"]]
  [1m[36mRestaurant Update (0.1ms)[0m  [1m[33mUPDATE "restaurants" SET "updated_at" = ? WHERE "restaurants"."id" = ?[0m  [["updated_at", "2020-04-05 15:15:36.131066"], ["id", 980190962]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: 8d49280e-69d8-4f0d-99f3-01c4d2390ff3) to Async(default) with arguments: #<GlobalID:0x00005561a9d79eb0 @uri=#<URI::GID gid://ihungry/ActiveStorage::Blob/2>>
  [1m[36mActiveStorage::Blob Load (8.6ms)[0m  [1m[34mSELECT  "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
Started GET "/restaurants" for 127.0.0.1 at 2020-04-05 12:15:36 -0300
[ActiveJob] [ActiveStorage::AnalyzeJob] [8d49280e-69d8-4f0d-99f3-01c4d2390ff3] Performing ActiveStorage::AnalyzeJob (Job ID: 8d49280e-69d8-4f0d-99f3-01c4d2390ff3) from Async(default) with arguments: #<GlobalID:0x00007f2b780ef420 @uri=#<URI::GID gid://ihungry/ActiveStorage::Blob/2>>
[ActiveJob] [ActiveStorage::AnalyzeJob] [8d49280e-69d8-4f0d-99f3-01c4d2390ff3] [36m  Disk Storage (0.3ms) [0m[34mDownloaded file from key: a9Q2peooCL5LBYkxUPH3Voff[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [8d49280e-69d8-4f0d-99f3-01c4d2390ff3] Skipping image analysis because the mini_magick gem isn't installed
[ActiveJob] [ActiveStorage::AnalyzeJob] [8d49280e-69d8-4f0d-99f3-01c4d2390ff3]   [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [8d49280e-69d8-4f0d-99f3-01c4d2390ff3]   [1m[36mActiveStorage::Blob Update (0.1ms)[0m  [1m[33mUPDATE "active_storage_blobs" SET "metadata" = ? WHERE "active_storage_blobs"."id" = ?[0m  [["metadata", "{\"identified\":true,\"analyzed\":true}"], ["id", 2]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [8d49280e-69d8-4f0d-99f3-01c4d2390ff3]   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [8d49280e-69d8-4f0d-99f3-01c4d2390ff3] Performed ActiveStorage::AnalyzeJob (Job ID: 8d49280e-69d8-4f0d-99f3-01c4d2390ff3) from Async(default) in 2.19ms
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Load (1.2ms)[0m  [1m[34mSELECT restaurants.*, (69.09332411348201 * ABS(restaurants.latitude - -23.5506507) * 0.7071067811865475) + (59.836573914187355 * ABS(restaurants.longitude - -46.6333824) * 0.7071067811865475) AS distance, CASE WHEN (restaurants.latitude >= -23.5506507 AND restaurants.longitude >= -46.6333824) THEN  45.0 WHEN (restaurants.latitude <  -23.5506507 AND restaurants.longitude >= -46.6333824) THEN 135.0 WHEN (restaurants.latitude <  -23.5506507 AND restaurants.longitude <  -46.6333824) THEN 225.0 WHEN (restaurants.latitude >= -23.5506507 AND restaurants.longitude <  -46.6333824) THEN 315.0 END AS bearing FROM "restaurants" WHERE (restaurants.latitude BETWEEN -23.840114266221693 AND -23.261187133778304 AND restaurants.longitude BETWEEN -46.94914686874913 AND -46.31761793125087) ORDER BY distance ASC[0m
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Json (1.9ms)
Completed 200 OK in 1327ms (Views: 10.8ms | ActiveRecord: 1.2ms)
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Creating scope :open. Overwriting existing method Restaurant.open.
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "product_categories"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "order_products"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "orders"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "reviews"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "restaurants"[0m
  [1m[36mFixture Delete (0.0ms)[0m  [1m[31mDELETE FROM "categories"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "product_categories" ("title", "created_at", "updated_at", "id", "restaurant_id") VALUES ('MyString', '2020-04-05 15:16:04.298397', '2020-04-05 15:16:04.298397', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "product_categories" ("title", "created_at", "updated_at", "id", "restaurant_id") VALUES ('MyString', '2020-04-05 15:16:04.298397', '2020-04-05 15:16:04.298397', 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "order_products" ("quantity", "comment", "created_at", "updated_at", "id", "order_id", "product_id") VALUES (1, 'MyText', '2020-04-05 15:16:04.300421', '2020-04-05 15:16:04.300421', 980190962, 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "order_products" ("quantity", "comment", "created_at", "updated_at", "id", "order_id", "product_id") VALUES (1, 'MyText', '2020-04-05 15:16:04.300421', '2020-04-05 15:16:04.300421', 298486374, 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "orders" ("name", "phone_number", "total_value", "address", "status", "created_at", "updated_at", "id", "restaurant_id") VALUES ('MyString', 'MyString', 1.5, 'MyString', 1, '2020-04-05 15:16:04.301994', '2020-04-05 15:16:04.301994', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "orders" ("name", "phone_number", "total_value", "address", "status", "created_at", "updated_at", "id", "restaurant_id") VALUES ('MyString', 'MyString', 1.5, 'MyString', 1, '2020-04-05 15:16:04.301994', '2020-04-05 15:16:04.301994', 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "reviews" ("value", "created_at", "updated_at", "id", "restaurant_id") VALUES (1, '2020-04-05 15:16:04.304094', '2020-04-05 15:16:04.304094', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "reviews" ("value", "created_at", "updated_at", "id", "restaurant_id") VALUES (1, '2020-04-05 15:16:04.304094', '2020-04-05 15:16:04.304094', 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "restaurants" ("name", "description", "status", "delivery_tax", "state", "city", "street", "neighborhood", "number", "complement", "reference", "cep", "latitude", "longitude", "created_at", "updated_at", "id", "category_id") VALUES ('MyString', 'MyText', 1, 1.5, 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 1.5, 1.5, '2020-04-05 15:16:04.307272', '2020-04-05 15:16:04.307272', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "restaurants" ("name", "description", "status", "delivery_tax", "state", "city", "street", "neighborhood", "number", "complement", "reference", "cep", "latitude", "longitude", "created_at", "updated_at", "id", "category_id") VALUES ('MyString', 'MyText', 1, 1.5, 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 1.5, 1.5, '2020-04-05 15:16:04.307272', '2020-04-05 15:16:04.307272', 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "categories" ("title", "created_at", "updated_at", "id") VALUES ('MyString', '2020-04-05 15:16:04.311090', '2020-04-05 15:16:04.311090', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "categories" ("title", "created_at", "updated_at", "id") VALUES ('MyString', '2020-04-05 15:16:04.311090', '2020-04-05 15:16:04.311090', 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "products" ("name", "description", "price", "created_at", "updated_at", "id", "product_category_id") VALUES ('MyString', 'MyText', 1.5, '2020-04-05 15:16:04.313092', '2020-04-05 15:16:04.313092', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "products" ("name", "description", "price", "created_at", "updated_at", "id", "product_category_id") VALUES ('MyString', 'MyText', 1.5, '2020-04-05 15:16:04.313092', '2020-04-05 15:16:04.313092', 298486374, 298486374)[0m
  [1m[35m (12.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------
RestaurantsControllerTest: test_should_get_show
-----------------------------------------------
Started GET "/restaurants?id=123" for 127.0.0.1 at 2020-04-05 12:16:04 -0300
Processing by RestaurantsController#index as HTML
  Parameters: {"id"=>"123"}
  [1m[36mRestaurant Load (0.8ms)[0m  [1m[34mSELECT restaurants.*, (69.09332411348201 * ABS(restaurants.latitude - -23.5506507) * 0.7071067811865475) + (59.836573914187355 * ABS(restaurants.longitude - -46.6333824) * 0.7071067811865475) AS distance, CASE WHEN (restaurants.latitude >= -23.5506507 AND restaurants.longitude >= -46.6333824) THEN  45.0 WHEN (restaurants.latitude <  -23.5506507 AND restaurants.longitude >= -46.6333824) THEN 135.0 WHEN (restaurants.latitude <  -23.5506507 AND restaurants.longitude <  -46.6333824) THEN 225.0 WHEN (restaurants.latitude >= -23.5506507 AND restaurants.longitude <  -46.6333824) THEN 315.0 END AS bearing FROM "restaurants" WHERE (restaurants.latitude BETWEEN -23.840114266221693 AND -23.261187133778304 AND restaurants.longitude BETWEEN -46.94914686874913 AND -46.31761793125087) ORDER BY distance ASC[0m
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Json (1.64ms)
Completed 200 OK in 1099ms (Views: 7.1ms | ActiveRecord: 0.8ms)
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Creating scope :open. Overwriting existing method Restaurant.open.
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "product_categories"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "order_products"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "orders"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "reviews"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "restaurants"[0m
  [1m[36mFixture Delete (0.0ms)[0m  [1m[31mDELETE FROM "categories"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "product_categories" ("title", "created_at", "updated_at", "id", "restaurant_id") VALUES ('MyString', '2020-04-05 15:17:28.500641', '2020-04-05 15:17:28.500641', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "product_categories" ("title", "created_at", "updated_at", "id", "restaurant_id") VALUES ('MyString', '2020-04-05 15:17:28.500641', '2020-04-05 15:17:28.500641', 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "order_products" ("quantity", "comment", "created_at", "updated_at", "id", "order_id", "product_id") VALUES (1, 'MyText', '2020-04-05 15:17:28.502053', '2020-04-05 15:17:28.502053', 980190962, 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "order_products" ("quantity", "comment", "created_at", "updated_at", "id", "order_id", "product_id") VALUES (1, 'MyText', '2020-04-05 15:17:28.502053', '2020-04-05 15:17:28.502053', 298486374, 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "orders" ("name", "phone_number", "total_value", "address", "status", "created_at", "updated_at", "id", "restaurant_id") VALUES ('MyString', 'MyString', 1.5, 'MyString', 1, '2020-04-05 15:17:28.503223', '2020-04-05 15:17:28.503223', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "orders" ("name", "phone_number", "total_value", "address", "status", "created_at", "updated_at", "id", "restaurant_id") VALUES ('MyString', 'MyString', 1.5, 'MyString', 1, '2020-04-05 15:17:28.503223', '2020-04-05 15:17:28.503223', 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.0ms)[0m  [1m[32mINSERT INTO "reviews" ("value", "created_at", "updated_at", "id", "restaurant_id") VALUES (1, '2020-04-05 15:17:28.504548', '2020-04-05 15:17:28.504548', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "reviews" ("value", "created_at", "updated_at", "id", "restaurant_id") VALUES (1, '2020-04-05 15:17:28.504548', '2020-04-05 15:17:28.504548', 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "restaurants" ("name", "description", "status", "delivery_tax", "state", "city", "street", "neighborhood", "number", "complement", "reference", "cep", "latitude", "longitude", "created_at", "updated_at", "id", "category_id") VALUES ('MyString', 'MyText', 1, 1.5, 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 1.5, 1.5, '2020-04-05 15:17:28.505615', '2020-04-05 15:17:28.505615', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "restaurants" ("name", "description", "status", "delivery_tax", "state", "city", "street", "neighborhood", "number", "complement", "reference", "cep", "latitude", "longitude", "created_at", "updated_at", "id", "category_id") VALUES ('MyString', 'MyText', 1, 1.5, 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 1.5, 1.5, '2020-04-05 15:17:28.505615', '2020-04-05 15:17:28.505615', 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "categories" ("title", "created_at", "updated_at", "id") VALUES ('MyString', '2020-04-05 15:17:28.507083', '2020-04-05 15:17:28.507083', 980190962)[0m
  [1m[36mFixture Insert (0.0ms)[0m  [1m[32mINSERT INTO "categories" ("title", "created_at", "updated_at", "id") VALUES ('MyString', '2020-04-05 15:17:28.507083', '2020-04-05 15:17:28.507083', 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "products" ("name", "description", "price", "created_at", "updated_at", "id", "product_category_id") VALUES ('MyString', 'MyText', 1.5, '2020-04-05 15:17:28.507975', '2020-04-05 15:17:28.507975', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "products" ("name", "description", "price", "created_at", "updated_at", "id", "product_category_id") VALUES ('MyString', 'MyText', 1.5, '2020-04-05 15:17:28.507975', '2020-04-05 15:17:28.507975', 298486374, 298486374)[0m
  [1m[35m (28.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------
RestaurantsControllerTest: test_should_get_show
-----------------------------------------------
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" ORDER BY "restaurants"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
Started GET "/restaurants/980190962" for 127.0.0.1 at 2020-04-05 12:17:28 -0300
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
[active_model_serializers]   [1m[35m (0.1ms)[0m  [1m[34mSELECT AVG("reviews"."value") FROM "reviews" WHERE "reviews"."restaurant_id" = ?[0m  [["restaurant_id", 980190962]]
[active_model_serializers]   [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT  "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 980190962], ["record_type", "Restaurant"], ["name", "image"], ["LIMIT", 1]]
[active_model_serializers] Rendered RestaurantSerializer with ActiveModelSerializers::Adapter::Json (7.33ms)
Completed 500 Internal Server Error in 16ms (ActiveRecord: 0.5ms)
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Creating scope :open. Overwriting existing method Restaurant.open.
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "product_categories"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "order_products"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "orders"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "reviews"[0m
  [1m[36mFixture Delete (0.0ms)[0m  [1m[31mDELETE FROM "restaurants"[0m
  [1m[36mFixture Delete (0.0ms)[0m  [1m[31mDELETE FROM "categories"[0m
  [1m[36mFixture Delete (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "product_categories" ("title", "created_at", "updated_at", "id", "restaurant_id") VALUES ('MyString', '2020-04-05 15:18:51.592057', '2020-04-05 15:18:51.592057', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "product_categories" ("title", "created_at", "updated_at", "id", "restaurant_id") VALUES ('MyString', '2020-04-05 15:18:51.592057', '2020-04-05 15:18:51.592057', 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "order_products" ("quantity", "comment", "created_at", "updated_at", "id", "order_id", "product_id") VALUES (1, 'MyText', '2020-04-05 15:18:51.593329', '2020-04-05 15:18:51.593329', 980190962, 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "order_products" ("quantity", "comment", "created_at", "updated_at", "id", "order_id", "product_id") VALUES (1, 'MyText', '2020-04-05 15:18:51.593329', '2020-04-05 15:18:51.593329', 298486374, 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "orders" ("name", "phone_number", "total_value", "address", "status", "created_at", "updated_at", "id", "restaurant_id") VALUES ('MyString', 'MyString', 1.5, 'MyString', 1, '2020-04-05 15:18:51.594275', '2020-04-05 15:18:51.594275', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "orders" ("name", "phone_number", "total_value", "address", "status", "created_at", "updated_at", "id", "restaurant_id") VALUES ('MyString', 'MyString', 1.5, 'MyString', 1, '2020-04-05 15:18:51.594275', '2020-04-05 15:18:51.594275', 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "reviews" ("value", "created_at", "updated_at", "id", "restaurant_id") VALUES (1, '2020-04-05 15:18:51.595312', '2020-04-05 15:18:51.595312', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "reviews" ("value", "created_at", "updated_at", "id", "restaurant_id") VALUES (1, '2020-04-05 15:18:51.595312', '2020-04-05 15:18:51.595312', 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "restaurants" ("name", "description", "status", "delivery_tax", "state", "city", "street", "neighborhood", "number", "complement", "reference", "cep", "latitude", "longitude", "created_at", "updated_at", "id", "category_id") VALUES ('MyString', 'MyText', 1, 1.5, 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 1.5, 1.5, '2020-04-05 15:18:51.596272', '2020-04-05 15:18:51.596272', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "restaurants" ("name", "description", "status", "delivery_tax", "state", "city", "street", "neighborhood", "number", "complement", "reference", "cep", "latitude", "longitude", "created_at", "updated_at", "id", "category_id") VALUES ('MyString', 'MyText', 1, 1.5, 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 1.5, 1.5, '2020-04-05 15:18:51.596272', '2020-04-05 15:18:51.596272', 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "categories" ("title", "created_at", "updated_at", "id") VALUES ('MyString', '2020-04-05 15:18:51.597572', '2020-04-05 15:18:51.597572', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "categories" ("title", "created_at", "updated_at", "id") VALUES ('MyString', '2020-04-05 15:18:51.597572', '2020-04-05 15:18:51.597572', 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "products" ("name", "description", "price", "created_at", "updated_at", "id", "product_category_id") VALUES ('MyString', 'MyText', 1.5, '2020-04-05 15:18:51.598370', '2020-04-05 15:18:51.598370', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "products" ("name", "description", "price", "created_at", "updated_at", "id", "product_category_id") VALUES ('MyString', 'MyText', 1.5, '2020-04-05 15:18:51.598370', '2020-04-05 15:18:51.598370', 298486374, 298486374)[0m
  [1m[35m (13.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------
RestaurantsControllerTest: test_should_get_show
-----------------------------------------------
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" ORDER BY "restaurants"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT  "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 980190962], ["record_type", "Restaurant"], ["name", "image"], ["LIMIT", 1]]
[36m  Disk Storage (1.0ms) [0m[32mUploaded file to key: DH7PJSMmRHRHkXd74rPgZAxK (checksum: 7r/DK32Mv5bcP+oY3ZoSew==)[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mActiveStorage::Blob Create (0.2ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["key", "DH7PJSMmRHRHkXd74rPgZAxK"], ["filename", "restaurant.jpg"], ["content_type", "image/jpeg"], ["metadata", "{\"identified\":true}"], ["byte_size", 284707], ["checksum", "7r/DK32Mv5bcP+oY3ZoSew=="], ["created_at", "2020-04-05 15:18:51.679419"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mActiveStorage::Attachment Create (0.1ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "image"], ["record_type", "Restaurant"], ["record_id", 980190962], ["blob_id", 1], ["created_at", "2020-04-05 15:18:51.685634"]]
  [1m[36mRestaurant Update (0.1ms)[0m  [1m[33mUPDATE "restaurants" SET "updated_at" = ? WHERE "restaurants"."id" = ?[0m  [["updated_at", "2020-04-05 15:18:51.686279"], ["id", 980190962]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: 81fefabc-37ef-46a2-8352-3dff5f2d71dc) to Async(default) with arguments: #<GlobalID:0x00005561a9e2e518 @uri=#<URI::GID gid://ihungry/ActiveStorage::Blob/1>>
Started GET "/restaurants/980190962" for 127.0.0.1 at 2020-04-05 12:18:51 -0300
  [1m[36mActiveStorage::Blob Load (8.9ms)[0m  [1m[34mSELECT  "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [81fefabc-37ef-46a2-8352-3dff5f2d71dc] Performing ActiveStorage::AnalyzeJob (Job ID: 81fefabc-37ef-46a2-8352-3dff5f2d71dc) from Async(default) with arguments: #<GlobalID:0x00007f2b78026f98 @uri=#<URI::GID gid://ihungry/ActiveStorage::Blob/1>>
[ActiveJob] [ActiveStorage::AnalyzeJob] [81fefabc-37ef-46a2-8352-3dff5f2d71dc] [36m  Disk Storage (0.3ms) [0m[34mDownloaded file from key: DH7PJSMmRHRHkXd74rPgZAxK[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [81fefabc-37ef-46a2-8352-3dff5f2d71dc] Skipping image analysis because the mini_magick gem isn't installed
[ActiveJob] [ActiveStorage::AnalyzeJob] [81fefabc-37ef-46a2-8352-3dff5f2d71dc]   [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [81fefabc-37ef-46a2-8352-3dff5f2d71dc]   [1m[36mActiveStorage::Blob Update (0.1ms)[0m  [1m[33mUPDATE "active_storage_blobs" SET "metadata" = ? WHERE "active_storage_blobs"."id" = ?[0m  [["metadata", "{\"identified\":true,\"analyzed\":true}"], ["id", 1]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [81fefabc-37ef-46a2-8352-3dff5f2d71dc]   [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [81fefabc-37ef-46a2-8352-3dff5f2d71dc] Performed ActiveStorage::AnalyzeJob (Job ID: 81fefabc-37ef-46a2-8352-3dff5f2d71dc) from Async(default) in 5.26ms
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
[active_model_serializers]   [1m[35m (0.1ms)[0m  [1m[34mSELECT AVG("reviews"."value") FROM "reviews" WHERE "reviews"."restaurant_id" = ?[0m  [["restaurant_id", 980190962]]
[active_model_serializers]   [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT  "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 980190962], ["record_type", "Restaurant"], ["name", "image"], ["LIMIT", 1]]
[active_model_serializers]   [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT  "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
[active_model_serializers]   [1m[36mCategory Load (0.1ms)[0m  [1m[34mSELECT  "categories".* FROM "categories" WHERE "categories"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
[active_model_serializers]   [1m[36mProductCategory Load (0.1ms)[0m  [1m[34mSELECT "product_categories".* FROM "product_categories" WHERE "product_categories"."restaurant_id" = ?[0m  [["restaurant_id", 980190962]]
[active_model_serializers] Rendered RestaurantSerializer with ActiveModelSerializers::Adapter::Json (14.14ms)
Completed 200 OK in 23ms (Views: 21.2ms | ActiveRecord: 0.5ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Creating scope :open. Overwriting existing method Restaurant.open.
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "product_categories"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "order_products"[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "orders"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "reviews"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "restaurants"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "categories"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "product_categories" ("title", "created_at", "updated_at", "id", "restaurant_id") VALUES ('MyString', '2020-04-05 15:20:01.818459', '2020-04-05 15:20:01.818459', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "product_categories" ("title", "created_at", "updated_at", "id", "restaurant_id") VALUES ('MyString', '2020-04-05 15:20:01.818459', '2020-04-05 15:20:01.818459', 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "order_products" ("quantity", "comment", "created_at", "updated_at", "id", "order_id", "product_id") VALUES (1, 'MyText', '2020-04-05 15:20:01.819984', '2020-04-05 15:20:01.819984', 980190962, 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "order_products" ("quantity", "comment", "created_at", "updated_at", "id", "order_id", "product_id") VALUES (1, 'MyText', '2020-04-05 15:20:01.819984', '2020-04-05 15:20:01.819984', 298486374, 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "orders" ("name", "phone_number", "total_value", "address", "status", "created_at", "updated_at", "id", "restaurant_id") VALUES ('MyString', 'MyString', 1.5, 'MyString', 1, '2020-04-05 15:20:01.821022', '2020-04-05 15:20:01.821022', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "orders" ("name", "phone_number", "total_value", "address", "status", "created_at", "updated_at", "id", "restaurant_id") VALUES ('MyString', 'MyString', 1.5, 'MyString', 1, '2020-04-05 15:20:01.821022', '2020-04-05 15:20:01.821022', 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "reviews" ("value", "created_at", "updated_at", "id", "restaurant_id") VALUES (1, '2020-04-05 15:20:01.822073', '2020-04-05 15:20:01.822073', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "reviews" ("value", "created_at", "updated_at", "id", "restaurant_id") VALUES (1, '2020-04-05 15:20:01.822073', '2020-04-05 15:20:01.822073', 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "restaurants" ("name", "description", "status", "delivery_tax", "state", "city", "street", "neighborhood", "number", "complement", "reference", "cep", "latitude", "longitude", "created_at", "updated_at", "id", "category_id") VALUES ('MyString', 'MyText', 1, 1.5, 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 1.5, 1.5, '2020-04-05 15:20:01.822918', '2020-04-05 15:20:01.822918', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "restaurants" ("name", "description", "status", "delivery_tax", "state", "city", "street", "neighborhood", "number", "complement", "reference", "cep", "latitude", "longitude", "created_at", "updated_at", "id", "category_id") VALUES ('MyString', 'MyText', 1, 1.5, 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 1.5, 1.5, '2020-04-05 15:20:01.822918', '2020-04-05 15:20:01.822918', 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "categories" ("title", "created_at", "updated_at", "id") VALUES ('MyString', '2020-04-05 15:20:01.824298', '2020-04-05 15:20:01.824298', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "categories" ("title", "created_at", "updated_at", "id") VALUES ('MyString', '2020-04-05 15:20:01.824298', '2020-04-05 15:20:01.824298', 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "products" ("name", "description", "price", "created_at", "updated_at", "id", "product_category_id") VALUES ('MyString', 'MyText', 1.5, '2020-04-05 15:20:01.825166', '2020-04-05 15:20:01.825166', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "products" ("name", "description", "price", "created_at", "updated_at", "id", "product_category_id") VALUES ('MyString', 'MyText', 1.5, '2020-04-05 15:20:01.825166', '2020-04-05 15:20:01.825166', 298486374, 298486374)[0m
  [1m[35m (13.5ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------
RestaurantsControllerTest: test_should_get_search
-------------------------------------------------
Started GET "/restaurants/search" for 127.0.0.1 at 2020-04-05 12:20:01 -0300
Processing by RestaurantsController#search as HTML
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
[active_model_serializers]   [1m[35m (0.1ms)[0m  [1m[34mSELECT AVG("reviews"."value") FROM "reviews" WHERE "reviews"."restaurant_id" = ?[0m  [["restaurant_id", 298486374]]
[active_model_serializers]   [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT  "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 298486374], ["record_type", "Restaurant"], ["name", "image"], ["LIMIT", 1]]
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Json (7.37ms)
Completed 500 Internal Server Error in 26ms (ActiveRecord: 0.5ms)
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Creating scope :open. Overwriting existing method Restaurant.open.
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "product_categories"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "order_products"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "orders"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "reviews"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "restaurants"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "categories"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "product_categories" ("title", "created_at", "updated_at", "id", "restaurant_id") VALUES ('MyString', '2020-04-05 15:20:16.859252', '2020-04-05 15:20:16.859252', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "product_categories" ("title", "created_at", "updated_at", "id", "restaurant_id") VALUES ('MyString', '2020-04-05 15:20:16.859252', '2020-04-05 15:20:16.859252', 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "order_products" ("quantity", "comment", "created_at", "updated_at", "id", "order_id", "product_id") VALUES (1, 'MyText', '2020-04-05 15:20:16.860622', '2020-04-05 15:20:16.860622', 980190962, 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "order_products" ("quantity", "comment", "created_at", "updated_at", "id", "order_id", "product_id") VALUES (1, 'MyText', '2020-04-05 15:20:16.860622', '2020-04-05 15:20:16.860622', 298486374, 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "orders" ("name", "phone_number", "total_value", "address", "status", "created_at", "updated_at", "id", "restaurant_id") VALUES ('MyString', 'MyString', 1.5, 'MyString', 1, '2020-04-05 15:20:16.861616', '2020-04-05 15:20:16.861616', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "orders" ("name", "phone_number", "total_value", "address", "status", "created_at", "updated_at", "id", "restaurant_id") VALUES ('MyString', 'MyString', 1.5, 'MyString', 1, '2020-04-05 15:20:16.861616', '2020-04-05 15:20:16.861616', 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.0ms)[0m  [1m[32mINSERT INTO "reviews" ("value", "created_at", "updated_at", "id", "restaurant_id") VALUES (1, '2020-04-05 15:20:16.862645', '2020-04-05 15:20:16.862645', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.0ms)[0m  [1m[32mINSERT INTO "reviews" ("value", "created_at", "updated_at", "id", "restaurant_id") VALUES (1, '2020-04-05 15:20:16.862645', '2020-04-05 15:20:16.862645', 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "restaurants" ("name", "description", "status", "delivery_tax", "state", "city", "street", "neighborhood", "number", "complement", "reference", "cep", "latitude", "longitude", "created_at", "updated_at", "id", "category_id") VALUES ('MyString', 'MyText', 1, 1.5, 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 1.5, 1.5, '2020-04-05 15:20:16.870493', '2020-04-05 15:20:16.870493', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "restaurants" ("name", "description", "status", "delivery_tax", "state", "city", "street", "neighborhood", "number", "complement", "reference", "cep", "latitude", "longitude", "created_at", "updated_at", "id", "category_id") VALUES ('MyString', 'MyText', 1, 1.5, 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 1.5, 1.5, '2020-04-05 15:20:16.870493', '2020-04-05 15:20:16.870493', 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.0ms)[0m  [1m[32mINSERT INTO "categories" ("title", "created_at", "updated_at", "id") VALUES ('MyString', '2020-04-05 15:20:16.872011', '2020-04-05 15:20:16.872011', 980190962)[0m
  [1m[36mFixture Insert (0.0ms)[0m  [1m[32mINSERT INTO "categories" ("title", "created_at", "updated_at", "id") VALUES ('MyString', '2020-04-05 15:20:16.872011', '2020-04-05 15:20:16.872011', 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "products" ("name", "description", "price", "created_at", "updated_at", "id", "product_category_id") VALUES ('MyString', 'MyText', 1.5, '2020-04-05 15:20:16.872860', '2020-04-05 15:20:16.872860', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "products" ("name", "description", "price", "created_at", "updated_at", "id", "product_category_id") VALUES ('MyString', 'MyText', 1.5, '2020-04-05 15:20:16.872860', '2020-04-05 15:20:16.872860', 298486374, 298486374)[0m
  [1m[35m (12.9ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------
RestaurantsControllerTest: test_should_get_search
-------------------------------------------------
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT  "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 298486374], ["record_type", "Restaurant"], ["name", "image"], ["LIMIT", 1]]
[36m  Disk Storage (1.0ms) [0m[32mUploaded file to key: orYn5T8BiAdriRYqUEsraqMq (checksum: 7r/DK32Mv5bcP+oY3ZoSew==)[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mActiveStorage::Blob Create (0.2ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["key", "orYn5T8BiAdriRYqUEsraqMq"], ["filename", "restaurant.jpg"], ["content_type", "image/jpeg"], ["metadata", "{\"identified\":true}"], ["byte_size", 284707], ["checksum", "7r/DK32Mv5bcP+oY3ZoSew=="], ["created_at", "2020-04-05 15:20:16.947803"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mActiveStorage::Attachment Create (0.1ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "image"], ["record_type", "Restaurant"], ["record_id", 298486374], ["blob_id", 1], ["created_at", "2020-04-05 15:20:16.953613"]]
  [1m[36mRestaurant Update (0.1ms)[0m  [1m[33mUPDATE "restaurants" SET "updated_at" = ? WHERE "restaurants"."id" = ?[0m  [["updated_at", "2020-04-05 15:20:16.954228"], ["id", 298486374]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: f51ef241-68a2-4ded-a11c-7e7e94968309) to Async(default) with arguments: #<GlobalID:0x00005561a9eeaa60 @uri=#<URI::GID gid://ihungry/ActiveStorage::Blob/1>>
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT  "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT  "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 980190962], ["record_type", "Restaurant"], ["name", "image"], ["LIMIT", 1]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [f51ef241-68a2-4ded-a11c-7e7e94968309] Performing ActiveStorage::AnalyzeJob (Job ID: f51ef241-68a2-4ded-a11c-7e7e94968309) from Async(default) with arguments: #<GlobalID:0x00007f2b7802eab8 @uri=#<URI::GID gid://ihungry/ActiveStorage::Blob/1>>
[ActiveJob] [ActiveStorage::AnalyzeJob] [f51ef241-68a2-4ded-a11c-7e7e94968309] [36m  Disk Storage (0.9ms) [0m[34mDownloaded file from key: orYn5T8BiAdriRYqUEsraqMq[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [f51ef241-68a2-4ded-a11c-7e7e94968309] Skipping image analysis because the mini_magick gem isn't installed
[ActiveJob] [ActiveStorage::AnalyzeJob] [f51ef241-68a2-4ded-a11c-7e7e94968309]   [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [f51ef241-68a2-4ded-a11c-7e7e94968309]   [1m[36mActiveStorage::Blob Update (0.1ms)[0m  [1m[33mUPDATE "active_storage_blobs" SET "metadata" = ? WHERE "active_storage_blobs"."id" = ?[0m  [["metadata", "{\"identified\":true,\"analyzed\":true}"], ["id", 1]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [f51ef241-68a2-4ded-a11c-7e7e94968309]   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [f51ef241-68a2-4ded-a11c-7e7e94968309] Performed ActiveStorage::AnalyzeJob (Job ID: f51ef241-68a2-4ded-a11c-7e7e94968309) from Async(default) in 7.73ms
[36m  Disk Storage (3.6ms) [0m[32mUploaded file to key: RZDfQUa1RDQkvX7qgwbcoMiQ (checksum: 7r/DK32Mv5bcP+oY3ZoSew==)[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mActiveStorage::Blob Create (0.1ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["key", "RZDfQUa1RDQkvX7qgwbcoMiQ"], ["filename", "restaurant.jpg"], ["content_type", "image/jpeg"], ["metadata", "{\"identified\":true}"], ["byte_size", 284707], ["checksum", "7r/DK32Mv5bcP+oY3ZoSew=="], ["created_at", "2020-04-05 15:20:16.968108"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mActiveStorage::Attachment Create (0.1ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "image"], ["record_type", "Restaurant"], ["record_id", 980190962], ["blob_id", 2], ["created_at", "2020-04-05 15:20:16.969570"]]
  [1m[36mRestaurant Update (0.1ms)[0m  [1m[33mUPDATE "restaurants" SET "updated_at" = ? WHERE "restaurants"."id" = ?[0m  [["updated_at", "2020-04-05 15:20:16.970167"], ["id", 980190962]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: 7a1568ef-47da-49a4-958f-935abe686366) to Async(default) with arguments: #<GlobalID:0x00005561aa039f38 @uri=#<URI::GID gid://ihungry/ActiveStorage::Blob/2>>
Started GET "/restaurants/search" for 127.0.0.1 at 2020-04-05 12:20:16 -0300
  [1m[36mActiveStorage::Blob Load (9.3ms)[0m  [1m[34mSELECT  "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [7a1568ef-47da-49a4-958f-935abe686366] Performing ActiveStorage::AnalyzeJob (Job ID: 7a1568ef-47da-49a4-958f-935abe686366) from Async(default) with arguments: #<GlobalID:0x00005561aa1861e8 @uri=#<URI::GID gid://ihungry/ActiveStorage::Blob/2>>
[ActiveJob] [ActiveStorage::AnalyzeJob] [7a1568ef-47da-49a4-958f-935abe686366] [36m  Disk Storage (0.3ms) [0m[34mDownloaded file from key: RZDfQUa1RDQkvX7qgwbcoMiQ[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [7a1568ef-47da-49a4-958f-935abe686366] Skipping image analysis because the mini_magick gem isn't installed
[ActiveJob] [ActiveStorage::AnalyzeJob] [7a1568ef-47da-49a4-958f-935abe686366]   [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [7a1568ef-47da-49a4-958f-935abe686366]   [1m[36mActiveStorage::Blob Update (0.1ms)[0m  [1m[33mUPDATE "active_storage_blobs" SET "metadata" = ? WHERE "active_storage_blobs"."id" = ?[0m  [["metadata", "{\"identified\":true,\"analyzed\":true}"], ["id", 2]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [7a1568ef-47da-49a4-958f-935abe686366]   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [7a1568ef-47da-49a4-958f-935abe686366] Performed ActiveStorage::AnalyzeJob (Job ID: 7a1568ef-47da-49a4-958f-935abe686366) from Async(default) in 2.2ms
Processing by RestaurantsController#search as HTML
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
[active_model_serializers]   [1m[35m (0.1ms)[0m  [1m[34mSELECT AVG("reviews"."value") FROM "reviews" WHERE "reviews"."restaurant_id" = ?[0m  [["restaurant_id", 298486374]]
[active_model_serializers]   [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT  "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 298486374], ["record_type", "Restaurant"], ["name", "image"], ["LIMIT", 1]]
[active_model_serializers]   [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT  "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
[active_model_serializers]   [1m[36mCategory Load (0.1ms)[0m  [1m[34mSELECT  "categories".* FROM "categories" WHERE "categories"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
[active_model_serializers]   [1m[35m (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."value") FROM "reviews" WHERE "reviews"."restaurant_id" = ?[0m  [["restaurant_id", 980190962]]
[active_model_serializers]   [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT  "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 980190962], ["record_type", "Restaurant"], ["name", "image"], ["LIMIT", 1]]
[active_model_serializers]   [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT  "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
[active_model_serializers]   [1m[36mCategory Load (0.0ms)[0m  [1m[34mSELECT  "categories".* FROM "categories" WHERE "categories"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Json (10.49ms)
Completed 200 OK in 19ms (Views: 17.8ms | ActiveRecord: 0.5ms)
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Creating scope :open. Overwriting existing method Restaurant.open.
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "product_categories"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "order_products"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "orders"[0m
  [1m[36mFixture Delete (0.0ms)[0m  [1m[31mDELETE FROM "reviews"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "restaurants"[0m
  [1m[36mFixture Delete (0.0ms)[0m  [1m[31mDELETE FROM "categories"[0m
  [1m[36mFixture Delete (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "product_categories" ("title", "created_at", "updated_at", "id", "restaurant_id") VALUES ('MyString', '2020-04-05 15:20:19.387374', '2020-04-05 15:20:19.387374', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "product_categories" ("title", "created_at", "updated_at", "id", "restaurant_id") VALUES ('MyString', '2020-04-05 15:20:19.387374', '2020-04-05 15:20:19.387374', 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "order_products" ("quantity", "comment", "created_at", "updated_at", "id", "order_id", "product_id") VALUES (1, 'MyText', '2020-04-05 15:20:19.388636', '2020-04-05 15:20:19.388636', 980190962, 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "order_products" ("quantity", "comment", "created_at", "updated_at", "id", "order_id", "product_id") VALUES (1, 'MyText', '2020-04-05 15:20:19.388636', '2020-04-05 15:20:19.388636', 298486374, 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "orders" ("name", "phone_number", "total_value", "address", "status", "created_at", "updated_at", "id", "restaurant_id") VALUES ('MyString', 'MyString', 1.5, 'MyString', 1, '2020-04-05 15:20:19.389587', '2020-04-05 15:20:19.389587', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "orders" ("name", "phone_number", "total_value", "address", "status", "created_at", "updated_at", "id", "restaurant_id") VALUES ('MyString', 'MyString', 1.5, 'MyString', 1, '2020-04-05 15:20:19.389587', '2020-04-05 15:20:19.389587', 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "reviews" ("value", "created_at", "updated_at", "id", "restaurant_id") VALUES (1, '2020-04-05 15:20:19.390638', '2020-04-05 15:20:19.390638', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.0ms)[0m  [1m[32mINSERT INTO "reviews" ("value", "created_at", "updated_at", "id", "restaurant_id") VALUES (1, '2020-04-05 15:20:19.390638', '2020-04-05 15:20:19.390638', 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "restaurants" ("name", "description", "status", "delivery_tax", "state", "city", "street", "neighborhood", "number", "complement", "reference", "cep", "latitude", "longitude", "created_at", "updated_at", "id", "category_id") VALUES ('MyString', 'MyText', 1, 1.5, 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 1.5, 1.5, '2020-04-05 15:20:19.391478', '2020-04-05 15:20:19.391478', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "restaurants" ("name", "description", "status", "delivery_tax", "state", "city", "street", "neighborhood", "number", "complement", "reference", "cep", "latitude", "longitude", "created_at", "updated_at", "id", "category_id") VALUES ('MyString', 'MyText', 1, 1.5, 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 1.5, 1.5, '2020-04-05 15:20:19.391478', '2020-04-05 15:20:19.391478', 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.0ms)[0m  [1m[32mINSERT INTO "categories" ("title", "created_at", "updated_at", "id") VALUES ('MyString', '2020-04-05 15:20:19.392918', '2020-04-05 15:20:19.392918', 980190962)[0m
  [1m[36mFixture Insert (0.0ms)[0m  [1m[32mINSERT INTO "categories" ("title", "created_at", "updated_at", "id") VALUES ('MyString', '2020-04-05 15:20:19.392918', '2020-04-05 15:20:19.392918', 298486374)[0m
  [1m[36mFixture Insert (0.0ms)[0m  [1m[32mINSERT INTO "products" ("name", "description", "price", "created_at", "updated_at", "id", "product_category_id") VALUES ('MyString', 'MyText', 1.5, '2020-04-05 15:20:19.393769', '2020-04-05 15:20:19.393769', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.0ms)[0m  [1m[32mINSERT INTO "products" ("name", "description", "price", "created_at", "updated_at", "id", "product_category_id") VALUES ('MyString', 'MyText', 1.5, '2020-04-05 15:20:19.393769', '2020-04-05 15:20:19.393769', 298486374, 298486374)[0m
  [1m[35m (12.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------
RestaurantsControllerTest: test_should_get_search
-------------------------------------------------
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT  "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 298486374], ["record_type", "Restaurant"], ["name", "image"], ["LIMIT", 1]]
[36m  Disk Storage (1.2ms) [0m[32mUploaded file to key: Pv2eD1u8FH2fKrqbYUAojpZV (checksum: 7r/DK32Mv5bcP+oY3ZoSew==)[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mActiveStorage::Blob Create (0.2ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["key", "Pv2eD1u8FH2fKrqbYUAojpZV"], ["filename", "restaurant.jpg"], ["content_type", "image/jpeg"], ["metadata", "{\"identified\":true}"], ["byte_size", 284707], ["checksum", "7r/DK32Mv5bcP+oY3ZoSew=="], ["created_at", "2020-04-05 15:20:19.473172"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mActiveStorage::Attachment Create (0.2ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "image"], ["record_type", "Restaurant"], ["record_id", 298486374], ["blob_id", 1], ["created_at", "2020-04-05 15:20:19.480296"]]
  [1m[36mRestaurant Update (0.1ms)[0m  [1m[33mUPDATE "restaurants" SET "updated_at" = ? WHERE "restaurants"."id" = ?[0m  [["updated_at", "2020-04-05 15:20:19.481021"], ["id", 298486374]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: 5edeb468-b94a-4d9a-8db9-1bdecb0ae56c) to Async(default) with arguments: #<GlobalID:0x00005561aa0b20c8 @uri=#<URI::GID gid://ihungry/ActiveStorage::Blob/1>>
  [1m[36mActiveStorage::Blob Load (0.3ms)[0m  [1m[34mSELECT  "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT  "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 980190962], ["record_type", "Restaurant"], ["name", "image"], ["LIMIT", 1]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [5edeb468-b94a-4d9a-8db9-1bdecb0ae56c] Performing ActiveStorage::AnalyzeJob (Job ID: 5edeb468-b94a-4d9a-8db9-1bdecb0ae56c) from Async(default) with arguments: #<GlobalID:0x00005561aa0a2128 @uri=#<URI::GID gid://ihungry/ActiveStorage::Blob/1>>
[ActiveJob] [ActiveStorage::AnalyzeJob] [5edeb468-b94a-4d9a-8db9-1bdecb0ae56c] [36m  Disk Storage (0.7ms) [0m[34mDownloaded file from key: Pv2eD1u8FH2fKrqbYUAojpZV[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [5edeb468-b94a-4d9a-8db9-1bdecb0ae56c] Skipping image analysis because the mini_magick gem isn't installed
[ActiveJob] [ActiveStorage::AnalyzeJob] [5edeb468-b94a-4d9a-8db9-1bdecb0ae56c]   [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [5edeb468-b94a-4d9a-8db9-1bdecb0ae56c]   [1m[36mActiveStorage::Blob Update (0.1ms)[0m  [1m[33mUPDATE "active_storage_blobs" SET "metadata" = ? WHERE "active_storage_blobs"."id" = ?[0m  [["metadata", "{\"identified\":true,\"analyzed\":true}"], ["id", 1]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [5edeb468-b94a-4d9a-8db9-1bdecb0ae56c]   [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [5edeb468-b94a-4d9a-8db9-1bdecb0ae56c] Performed ActiveStorage::AnalyzeJob (Job ID: 5edeb468-b94a-4d9a-8db9-1bdecb0ae56c) from Async(default) in 7.09ms
[36m  Disk Storage (4.4ms) [0m[32mUploaded file to key: nyEex855NFQQFG8jAddNN5tQ (checksum: 7r/DK32Mv5bcP+oY3ZoSew==)[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mActiveStorage::Blob Create (0.1ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["key", "nyEex855NFQQFG8jAddNN5tQ"], ["filename", "restaurant.jpg"], ["content_type", "image/jpeg"], ["metadata", "{\"identified\":true}"], ["byte_size", 284707], ["checksum", "7r/DK32Mv5bcP+oY3ZoSew=="], ["created_at", "2020-04-05 15:20:19.493694"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mActiveStorage::Attachment Create (0.1ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "image"], ["record_type", "Restaurant"], ["record_id", 980190962], ["blob_id", 2], ["created_at", "2020-04-05 15:20:19.495192"]]
  [1m[36mRestaurant Update (0.1ms)[0m  [1m[33mUPDATE "restaurants" SET "updated_at" = ? WHERE "restaurants"."id" = ?[0m  [["updated_at", "2020-04-05 15:20:19.495851"], ["id", 980190962]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: b9fd0e42-4dae-43e6-a57a-f0ee1db615a1) to Async(default) with arguments: #<GlobalID:0x00005561aa219628 @uri=#<URI::GID gid://ihungry/ActiveStorage::Blob/2>>
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT  "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [b9fd0e42-4dae-43e6-a57a-f0ee1db615a1] Performing ActiveStorage::AnalyzeJob (Job ID: b9fd0e42-4dae-43e6-a57a-f0ee1db615a1) from Async(default) with arguments: #<GlobalID:0x00007f2b78103d80 @uri=#<URI::GID gid://ihungry/ActiveStorage::Blob/2>>
Started GET "/restaurants/search" for 127.0.0.1 at 2020-04-05 12:20:19 -0300
[ActiveJob] [ActiveStorage::AnalyzeJob] [b9fd0e42-4dae-43e6-a57a-f0ee1db615a1] [36m  Disk Storage (12.9ms) [0m[34mDownloaded file from key: nyEex855NFQQFG8jAddNN5tQ[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [b9fd0e42-4dae-43e6-a57a-f0ee1db615a1] Skipping image analysis because the mini_magick gem isn't installed
[ActiveJob] [ActiveStorage::AnalyzeJob] [b9fd0e42-4dae-43e6-a57a-f0ee1db615a1]   [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [b9fd0e42-4dae-43e6-a57a-f0ee1db615a1]   [1m[36mActiveStorage::Blob Update (0.1ms)[0m  [1m[33mUPDATE "active_storage_blobs" SET "metadata" = ? WHERE "active_storage_blobs"."id" = ?[0m  [["metadata", "{\"identified\":true,\"analyzed\":true}"], ["id", 2]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [b9fd0e42-4dae-43e6-a57a-f0ee1db615a1]   [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [b9fd0e42-4dae-43e6-a57a-f0ee1db615a1] Performed ActiveStorage::AnalyzeJob (Job ID: b9fd0e42-4dae-43e6-a57a-f0ee1db615a1) from Async(default) in 16.69ms
Processing by RestaurantsController#search as HTML
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
[active_model_serializers]   [1m[35m (0.1ms)[0m  [1m[34mSELECT AVG("reviews"."value") FROM "reviews" WHERE "reviews"."restaurant_id" = ?[0m  [["restaurant_id", 298486374]]
[active_model_serializers]   [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT  "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 298486374], ["record_type", "Restaurant"], ["name", "image"], ["LIMIT", 1]]
[active_model_serializers]   [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT  "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
[active_model_serializers]   [1m[36mCategory Load (0.1ms)[0m  [1m[34mSELECT  "categories".* FROM "categories" WHERE "categories"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
[active_model_serializers]   [1m[35m (0.1ms)[0m  [1m[34mSELECT AVG("reviews"."value") FROM "reviews" WHERE "reviews"."restaurant_id" = ?[0m  [["restaurant_id", 980190962]]
[active_model_serializers]   [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT  "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 980190962], ["record_type", "Restaurant"], ["name", "image"], ["LIMIT", 1]]
[active_model_serializers]   [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT  "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
[active_model_serializers]   [1m[36mCategory Load (0.0ms)[0m  [1m[34mSELECT  "categories".* FROM "categories" WHERE "categories"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Json (11.58ms)
Completed 200 OK in 21ms (Views: 19.5ms | ActiveRecord: 0.6ms)
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
RestaurantsControllerTest: test_should_get_index
------------------------------------------------
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT  "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 298486374], ["record_type", "Restaurant"], ["name", "image"], ["LIMIT", 1]]
[36m  Disk Storage (1.0ms) [0m[32mUploaded file to key: 9uoS3pGDYJ4mnpZ8F6xSMEKN (checksum: 7r/DK32Mv5bcP+oY3ZoSew==)[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mActiveStorage::Blob Create (0.2ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["key", "9uoS3pGDYJ4mnpZ8F6xSMEKN"], ["filename", "restaurant.jpg"], ["content_type", "image/jpeg"], ["metadata", "{\"identified\":true}"], ["byte_size", 284707], ["checksum", "7r/DK32Mv5bcP+oY3ZoSew=="], ["created_at", "2020-04-05 15:20:19.556285"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mActiveStorage::Attachment Create (0.1ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "image"], ["record_type", "Restaurant"], ["record_id", 298486374], ["blob_id", 1], ["created_at", "2020-04-05 15:20:19.557820"]]
  [1m[36mRestaurant Update (0.1ms)[0m  [1m[33mUPDATE "restaurants" SET "updated_at" = ? WHERE "restaurants"."id" = ?[0m  [["updated_at", "2020-04-05 15:20:19.558473"], ["id", 298486374]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: f74f357c-5d39-42b8-be43-1ff852a16da8) to Async(default) with arguments: #<GlobalID:0x00005561a8caf6e8 @uri=#<URI::GID gid://ihungry/ActiveStorage::Blob/1>>
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT  "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 980190962], ["record_type", "Restaurant"], ["name", "image"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Blob Load (0.9ms)[0m  [1m[34mSELECT  "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [f74f357c-5d39-42b8-be43-1ff852a16da8] Performing ActiveStorage::AnalyzeJob (Job ID: f74f357c-5d39-42b8-be43-1ff852a16da8) from Async(default) with arguments: #<GlobalID:0x00005561a8ccda58 @uri=#<URI::GID gid://ihungry/ActiveStorage::Blob/1>>
[ActiveJob] [ActiveStorage::AnalyzeJob] [f74f357c-5d39-42b8-be43-1ff852a16da8] [36m  Disk Storage (0.5ms) [0m[34mDownloaded file from key: 9uoS3pGDYJ4mnpZ8F6xSMEKN[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [f74f357c-5d39-42b8-be43-1ff852a16da8] Skipping image analysis because the mini_magick gem isn't installed
[ActiveJob] [ActiveStorage::AnalyzeJob] [f74f357c-5d39-42b8-be43-1ff852a16da8]   [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [f74f357c-5d39-42b8-be43-1ff852a16da8]   [1m[36mActiveStorage::Blob Update (0.1ms)[0m  [1m[33mUPDATE "active_storage_blobs" SET "metadata" = ? WHERE "active_storage_blobs"."id" = ?[0m  [["metadata", "{\"identified\":true,\"analyzed\":true}"], ["id", 1]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [f74f357c-5d39-42b8-be43-1ff852a16da8]   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [f74f357c-5d39-42b8-be43-1ff852a16da8] Performed ActiveStorage::AnalyzeJob (Job ID: f74f357c-5d39-42b8-be43-1ff852a16da8) from Async(default) in 3.58ms
[36m  Disk Storage (3.0ms) [0m[32mUploaded file to key: dnLKg4fvB2srgErVywGgUWPz (checksum: 7r/DK32Mv5bcP+oY3ZoSew==)[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mActiveStorage::Blob Create (0.1ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["key", "dnLKg4fvB2srgErVywGgUWPz"], ["filename", "restaurant.jpg"], ["content_type", "image/jpeg"], ["metadata", "{\"identified\":true}"], ["byte_size", 284707], ["checksum", "7r/DK32Mv5bcP+oY3ZoSew=="], ["created_at", "2020-04-05 15:20:19.566223"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mActiveStorage::Attachment Create (0.1ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "image"], ["record_type", "Restaurant"], ["record_id", 980190962], ["blob_id", 2], ["created_at", "2020-04-05 15:20:19.567419"]]
  [1m[36mRestaurant Update (0.1ms)[0m  [1m[33mUPDATE "restaurants" SET "updated_at" = ? WHERE "restaurants"."id" = ?[0m  [["updated_at", "2020-04-05 15:20:19.567913"], ["id", 980190962]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: d6c383f6-650b-4382-b3d5-4100e75ecce9) to Async(default) with arguments: #<GlobalID:0x00007f2b741458b0 @uri=#<URI::GID gid://ihungry/ActiveStorage::Blob/2>>
  [1m[36mActiveStorage::Blob Load (1.6ms)[0m  [1m[34mSELECT  "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [d6c383f6-650b-4382-b3d5-4100e75ecce9] Performing ActiveStorage::AnalyzeJob (Job ID: d6c383f6-650b-4382-b3d5-4100e75ecce9) from Async(default) with arguments: #<GlobalID:0x00007f2b7415e248 @uri=#<URI::GID gid://ihungry/ActiveStorage::Blob/2>>
Started GET "/restaurants" for 127.0.0.1 at 2020-04-05 12:20:19 -0300
Processing by RestaurantsController#index as HTML
[ActiveJob] [ActiveStorage::AnalyzeJob] [d6c383f6-650b-4382-b3d5-4100e75ecce9] [36m  Disk Storage (0.5ms) [0m[34mDownloaded file from key: dnLKg4fvB2srgErVywGgUWPz[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [d6c383f6-650b-4382-b3d5-4100e75ecce9] Skipping image analysis because the mini_magick gem isn't installed
[ActiveJob] [ActiveStorage::AnalyzeJob] [d6c383f6-650b-4382-b3d5-4100e75ecce9]   [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [d6c383f6-650b-4382-b3d5-4100e75ecce9]   [1m[36mActiveStorage::Blob Update (0.1ms)[0m  [1m[33mUPDATE "active_storage_blobs" SET "metadata" = ? WHERE "active_storage_blobs"."id" = ?[0m  [["metadata", "{\"identified\":true,\"analyzed\":true}"], ["id", 2]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [d6c383f6-650b-4382-b3d5-4100e75ecce9]   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [d6c383f6-650b-4382-b3d5-4100e75ecce9] Performed ActiveStorage::AnalyzeJob (Job ID: d6c383f6-650b-4382-b3d5-4100e75ecce9) from Async(default) in 4.97ms
  [1m[36mRestaurant Load (0.7ms)[0m  [1m[34mSELECT restaurants.*, (69.09332411348201 * ABS(restaurants.latitude - -23.5506507) * 0.7071067811865475) + (59.836573914187355 * ABS(restaurants.longitude - -46.6333824) * 0.7071067811865475) AS distance, CASE WHEN (restaurants.latitude >= -23.5506507 AND restaurants.longitude >= -46.6333824) THEN  45.0 WHEN (restaurants.latitude <  -23.5506507 AND restaurants.longitude >= -46.6333824) THEN 135.0 WHEN (restaurants.latitude <  -23.5506507 AND restaurants.longitude <  -46.6333824) THEN 225.0 WHEN (restaurants.latitude >= -23.5506507 AND restaurants.longitude <  -46.6333824) THEN 315.0 END AS bearing FROM "restaurants" WHERE (restaurants.latitude BETWEEN -23.840114266221693 AND -23.261187133778304 AND restaurants.longitude BETWEEN -46.94914686874913 AND -46.31761793125087) ORDER BY distance ASC[0m
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Json (0.94ms)
Completed 200 OK in 1193ms (Views: 2.9ms | ActiveRecord: 0.7ms)
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------
RestaurantsControllerTest: test_should_get_show
-----------------------------------------------
  [1m[36mRestaurant Load (0.6ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" ORDER BY "restaurants"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT  "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 980190962], ["record_type", "Restaurant"], ["name", "image"], ["LIMIT", 1]]
[36m  Disk Storage (3.2ms) [0m[32mUploaded file to key: NUBiFfvrpRiq8nt6Hc9fcqRU (checksum: 7r/DK32Mv5bcP+oY3ZoSew==)[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mActiveStorage::Blob Create (0.7ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["key", "NUBiFfvrpRiq8nt6Hc9fcqRU"], ["filename", "restaurant.jpg"], ["content_type", "image/jpeg"], ["metadata", "{\"identified\":true}"], ["byte_size", 284707], ["checksum", "7r/DK32Mv5bcP+oY3ZoSew=="], ["created_at", "2020-04-05 15:20:20.780651"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mActiveStorage::Attachment Create (0.3ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "image"], ["record_type", "Restaurant"], ["record_id", 980190962], ["blob_id", 1], ["created_at", "2020-04-05 15:20:20.785467"]]
  [1m[36mRestaurant Update (0.2ms)[0m  [1m[33mUPDATE "restaurants" SET "updated_at" = ? WHERE "restaurants"."id" = ?[0m  [["updated_at", "2020-04-05 15:20:20.787016"], ["id", 980190962]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: 19ff7d88-a7bb-42c6-8cad-8c330541758d) to Async(default) with arguments: #<GlobalID:0x00007f2b74298d98 @uri=#<URI::GID gid://ihungry/ActiveStorage::Blob/1>>
  [1m[36mActiveStorage::Blob Load (0.6ms)[0m  [1m[34mSELECT  "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [19ff7d88-a7bb-42c6-8cad-8c330541758d] Performing ActiveStorage::AnalyzeJob (Job ID: 19ff7d88-a7bb-42c6-8cad-8c330541758d) from Async(default) with arguments: #<GlobalID:0x00007f2b742c1518 @uri=#<URI::GID gid://ihungry/ActiveStorage::Blob/1>>
Started GET "/restaurants/980190962" for 127.0.0.1 at 2020-04-05 12:20:20 -0300
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
[active_model_serializers]   [1m[35m (0.1ms)[0m  [1m[34mSELECT AVG("reviews"."value") FROM "reviews" WHERE "reviews"."restaurant_id" = ?[0m  [["restaurant_id", 980190962]]
[active_model_serializers]   [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT  "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 980190962], ["record_type", "Restaurant"], ["name", "image"], ["LIMIT", 1]]
[active_model_serializers]   [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT  "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
[active_model_serializers]   [1m[36mCategory Load (0.1ms)[0m  [1m[34mSELECT  "categories".* FROM "categories" WHERE "categories"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
[active_model_serializers]   [1m[36mProductCategory Load (0.1ms)[0m  [1m[34mSELECT "product_categories".* FROM "product_categories" WHERE "product_categories"."restaurant_id" = ?[0m  [["restaurant_id", 980190962]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [19ff7d88-a7bb-42c6-8cad-8c330541758d] [36m  Disk Storage (4.6ms) [0m[34mDownloaded file from key: NUBiFfvrpRiq8nt6Hc9fcqRU[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [19ff7d88-a7bb-42c6-8cad-8c330541758d] Skipping image analysis because the mini_magick gem isn't installed
[ActiveJob] [ActiveStorage::AnalyzeJob] [19ff7d88-a7bb-42c6-8cad-8c330541758d]   [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [19ff7d88-a7bb-42c6-8cad-8c330541758d]   [1m[36mActiveStorage::Blob Update (0.1ms)[0m  [1m[33mUPDATE "active_storage_blobs" SET "metadata" = ? WHERE "active_storage_blobs"."id" = ?[0m  [["metadata", "{\"identified\":true,\"analyzed\":true}"], ["id", 1]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [19ff7d88-a7bb-42c6-8cad-8c330541758d]   [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [19ff7d88-a7bb-42c6-8cad-8c330541758d] Performed ActiveStorage::AnalyzeJob (Job ID: 19ff7d88-a7bb-42c6-8cad-8c330541758d) from Async(default) in 15.72ms
[active_model_serializers] Rendered RestaurantSerializer with ActiveModelSerializers::Adapter::Json (13.66ms)
Completed 200 OK in 16ms (Views: 13.7ms | ActiveRecord: 0.6ms)
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Creating scope :open. Overwriting existing method Restaurant.open.
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "product_categories"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "order_products"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "orders"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "reviews"[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "restaurants"[0m
  [1m[36mFixture Delete (0.0ms)[0m  [1m[31mDELETE FROM "categories"[0m
  [1m[36mFixture Delete (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "product_categories" ("title", "created_at", "updated_at", "id", "restaurant_id") VALUES ('MyString', '2020-04-05 15:20:43.076434', '2020-04-05 15:20:43.076434', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.0ms)[0m  [1m[32mINSERT INTO "product_categories" ("title", "created_at", "updated_at", "id", "restaurant_id") VALUES ('MyString', '2020-04-05 15:20:43.076434', '2020-04-05 15:20:43.076434', 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "order_products" ("quantity", "comment", "created_at", "updated_at", "id", "order_id", "product_id") VALUES (1, 'MyText', '2020-04-05 15:20:43.077707', '2020-04-05 15:20:43.077707', 980190962, 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.0ms)[0m  [1m[32mINSERT INTO "order_products" ("quantity", "comment", "created_at", "updated_at", "id", "order_id", "product_id") VALUES (1, 'MyText', '2020-04-05 15:20:43.077707', '2020-04-05 15:20:43.077707', 298486374, 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "orders" ("name", "phone_number", "total_value", "address", "status", "created_at", "updated_at", "id", "restaurant_id") VALUES ('MyString', 'MyString', 1.5, 'MyString', 1, '2020-04-05 15:20:43.078706', '2020-04-05 15:20:43.078706', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.0ms)[0m  [1m[32mINSERT INTO "orders" ("name", "phone_number", "total_value", "address", "status", "created_at", "updated_at", "id", "restaurant_id") VALUES ('MyString', 'MyString', 1.5, 'MyString', 1, '2020-04-05 15:20:43.078706', '2020-04-05 15:20:43.078706', 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.0ms)[0m  [1m[32mINSERT INTO "reviews" ("value", "created_at", "updated_at", "id", "restaurant_id") VALUES (1, '2020-04-05 15:20:43.079793', '2020-04-05 15:20:43.079793', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.0ms)[0m  [1m[32mINSERT INTO "reviews" ("value", "created_at", "updated_at", "id", "restaurant_id") VALUES (1, '2020-04-05 15:20:43.079793', '2020-04-05 15:20:43.079793', 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "restaurants" ("name", "description", "status", "delivery_tax", "state", "city", "street", "neighborhood", "number", "complement", "reference", "cep", "latitude", "longitude", "created_at", "updated_at", "id", "category_id") VALUES ('MyString', 'MyText', 1, 1.5, 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 1.5, 1.5, '2020-04-05 15:20:43.080690', '2020-04-05 15:20:43.080690', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "restaurants" ("name", "description", "status", "delivery_tax", "state", "city", "street", "neighborhood", "number", "complement", "reference", "cep", "latitude", "longitude", "created_at", "updated_at", "id", "category_id") VALUES ('MyString', 'MyText', 1, 1.5, 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 'MyString', 1.5, 1.5, '2020-04-05 15:20:43.080690', '2020-04-05 15:20:43.080690', 298486374, 298486374)[0m
  [1m[36mFixture Insert (0.0ms)[0m  [1m[32mINSERT INTO "categories" ("title", "created_at", "updated_at", "id") VALUES ('MyString', '2020-04-05 15:20:43.082007', '2020-04-05 15:20:43.082007', 980190962)[0m
  [1m[36mFixture Insert (0.0ms)[0m  [1m[32mINSERT INTO "categories" ("title", "created_at", "updated_at", "id") VALUES ('MyString', '2020-04-05 15:20:43.082007', '2020-04-05 15:20:43.082007', 298486374)[0m
  [1m[36mFixture Insert (0.0ms)[0m  [1m[32mINSERT INTO "products" ("name", "description", "price", "created_at", "updated_at", "id", "product_category_id") VALUES ('MyString', 'MyText', 1.5, '2020-04-05 15:20:43.082794', '2020-04-05 15:20:43.082794', 980190962, 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "products" ("name", "description", "price", "created_at", "updated_at", "id", "product_category_id") VALUES ('MyString', 'MyText', 1.5, '2020-04-05 15:20:43.082794', '2020-04-05 15:20:43.082794', 298486374, 298486374)[0m
  [1m[35m (13.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
RestaurantsControllerTest: test_should_get_index
------------------------------------------------
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT  "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 298486374], ["record_type", "Restaurant"], ["name", "image"], ["LIMIT", 1]]
[36m  Disk Storage (1.0ms) [0m[32mUploaded file to key: QUNuitTSjRHwvxUzPfRP9yaK (checksum: 7r/DK32Mv5bcP+oY3ZoSew==)[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mActiveStorage::Blob Create (0.2ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["key", "QUNuitTSjRHwvxUzPfRP9yaK"], ["filename", "restaurant.jpg"], ["content_type", "image/jpeg"], ["metadata", "{\"identified\":true}"], ["byte_size", 284707], ["checksum", "7r/DK32Mv5bcP+oY3ZoSew=="], ["created_at", "2020-04-05 15:20:43.200727"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mActiveStorage::Attachment Create (0.1ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "image"], ["record_type", "Restaurant"], ["record_id", 298486374], ["blob_id", 1], ["created_at", "2020-04-05 15:20:43.207084"]]
  [1m[36mRestaurant Update (0.1ms)[0m  [1m[33mUPDATE "restaurants" SET "updated_at" = ? WHERE "restaurants"."id" = ?[0m  [["updated_at", "2020-04-05 15:20:43.207719"], ["id", 298486374]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: 7416270d-52f3-4d12-a8e8-995064b932de) to Async(default) with arguments: #<GlobalID:0x00005561a9add710 @uri=#<URI::GID gid://ihungry/ActiveStorage::Blob/1>>
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT  "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 980190962], ["record_type", "Restaurant"], ["name", "image"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Blob Load (0.9ms)[0m  [1m[34mSELECT  "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [7416270d-52f3-4d12-a8e8-995064b932de] Performing ActiveStorage::AnalyzeJob (Job ID: 7416270d-52f3-4d12-a8e8-995064b932de) from Async(default) with arguments: #<GlobalID:0x00005561a9ae1180 @uri=#<URI::GID gid://ihungry/ActiveStorage::Blob/1>>
[ActiveJob] [ActiveStorage::AnalyzeJob] [7416270d-52f3-4d12-a8e8-995064b932de] [36m  Disk Storage (0.5ms) [0m[34mDownloaded file from key: QUNuitTSjRHwvxUzPfRP9yaK[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [7416270d-52f3-4d12-a8e8-995064b932de] Skipping image analysis because the mini_magick gem isn't installed
[ActiveJob] [ActiveStorage::AnalyzeJob] [7416270d-52f3-4d12-a8e8-995064b932de]   [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [7416270d-52f3-4d12-a8e8-995064b932de]   [1m[36mActiveStorage::Blob Update (0.1ms)[0m  [1m[33mUPDATE "active_storage_blobs" SET "metadata" = ? WHERE "active_storage_blobs"."id" = ?[0m  [["metadata", "{\"identified\":true,\"analyzed\":true}"], ["id", 1]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [7416270d-52f3-4d12-a8e8-995064b932de]   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [7416270d-52f3-4d12-a8e8-995064b932de] Performed ActiveStorage::AnalyzeJob (Job ID: 7416270d-52f3-4d12-a8e8-995064b932de) from Async(default) in 5.67ms
[36m  Disk Storage (2.7ms) [0m[32mUploaded file to key: mUYvDNWLDt5MzHFaiXUMNRUT (checksum: 7r/DK32Mv5bcP+oY3ZoSew==)[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mActiveStorage::Blob Create (0.1ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["key", "mUYvDNWLDt5MzHFaiXUMNRUT"], ["filename", "restaurant.jpg"], ["content_type", "image/jpeg"], ["metadata", "{\"identified\":true}"], ["byte_size", 284707], ["checksum", "7r/DK32Mv5bcP+oY3ZoSew=="], ["created_at", "2020-04-05 15:20:43.218311"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mActiveStorage::Attachment Create (0.1ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "image"], ["record_type", "Restaurant"], ["record_id", 980190962], ["blob_id", 2], ["created_at", "2020-04-05 15:20:43.219473"]]
  [1m[36mRestaurant Update (0.1ms)[0m  [1m[33mUPDATE "restaurants" SET "updated_at" = ? WHERE "restaurants"."id" = ?[0m  [["updated_at", "2020-04-05 15:20:43.219952"], ["id", 980190962]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: d1159bd5-81a5-48eb-a7e9-8d5a450abdcc) to Async(default) with arguments: #<GlobalID:0x00005561a9c54c10 @uri=#<URI::GID gid://ihungry/ActiveStorage::Blob/2>>
Started GET "/restaurants" for 127.0.0.1 at 2020-04-05 12:20:43 -0300
  [1m[36mActiveStorage::Blob Load (10.0ms)[0m  [1m[34mSELECT  "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [d1159bd5-81a5-48eb-a7e9-8d5a450abdcc] Performing ActiveStorage::AnalyzeJob (Job ID: d1159bd5-81a5-48eb-a7e9-8d5a450abdcc) from Async(default) with arguments: #<GlobalID:0x00005561a9d89860 @uri=#<URI::GID gid://ihungry/ActiveStorage::Blob/2>>
[ActiveJob] [ActiveStorage::AnalyzeJob] [d1159bd5-81a5-48eb-a7e9-8d5a450abdcc] [36m  Disk Storage (0.3ms) [0m[34mDownloaded file from key: mUYvDNWLDt5MzHFaiXUMNRUT[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [d1159bd5-81a5-48eb-a7e9-8d5a450abdcc] Skipping image analysis because the mini_magick gem isn't installed
[ActiveJob] [ActiveStorage::AnalyzeJob] [d1159bd5-81a5-48eb-a7e9-8d5a450abdcc]   [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [d1159bd5-81a5-48eb-a7e9-8d5a450abdcc]   [1m[36mActiveStorage::Blob Update (0.1ms)[0m  [1m[33mUPDATE "active_storage_blobs" SET "metadata" = ? WHERE "active_storage_blobs"."id" = ?[0m  [["metadata", "{\"identified\":true,\"analyzed\":true}"], ["id", 2]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [d1159bd5-81a5-48eb-a7e9-8d5a450abdcc]   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [d1159bd5-81a5-48eb-a7e9-8d5a450abdcc] Performed ActiveStorage::AnalyzeJob (Job ID: d1159bd5-81a5-48eb-a7e9-8d5a450abdcc) from Async(default) in 2.16ms
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Load (0.3ms)[0m  [1m[34mSELECT restaurants.*, (69.09332411348201 * ABS(restaurants.latitude - -23.5506507) * 0.7071067811865475) + (59.836573914187355 * ABS(restaurants.longitude - -46.6333824) * 0.7071067811865475) AS distance, CASE WHEN (restaurants.latitude >= -23.5506507 AND restaurants.longitude >= -46.6333824) THEN  45.0 WHEN (restaurants.latitude <  -23.5506507 AND restaurants.longitude >= -46.6333824) THEN 135.0 WHEN (restaurants.latitude <  -23.5506507 AND restaurants.longitude <  -46.6333824) THEN 225.0 WHEN (restaurants.latitude >= -23.5506507 AND restaurants.longitude <  -46.6333824) THEN 315.0 END AS bearing FROM "restaurants" WHERE (restaurants.latitude BETWEEN -23.840114266221693 AND -23.261187133778304 AND restaurants.longitude BETWEEN -46.94914686874913 AND -46.31761793125087) ORDER BY distance ASC[0m
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Json (0.64ms)
Completed 200 OK in 744ms (Views: 3.5ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------
RestaurantsControllerTest: test_should_get_show
-----------------------------------------------
  [1m[36mRestaurant Load (0.3ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" ORDER BY "restaurants"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT  "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 980190962], ["record_type", "Restaurant"], ["name", "image"], ["LIMIT", 1]]
[36m  Disk Storage (1.2ms) [0m[32mUploaded file to key: yam3FUbYULmYeLLiqHyCxAdQ (checksum: 7r/DK32Mv5bcP+oY3ZoSew==)[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mActiveStorage::Blob Create (0.2ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["key", "yam3FUbYULmYeLLiqHyCxAdQ"], ["filename", "restaurant.jpg"], ["content_type", "image/jpeg"], ["metadata", "{\"identified\":true}"], ["byte_size", 284707], ["checksum", "7r/DK32Mv5bcP+oY3ZoSew=="], ["created_at", "2020-04-05 15:20:43.987834"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mActiveStorage::Attachment Create (0.1ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "image"], ["record_type", "Restaurant"], ["record_id", 980190962], ["blob_id", 1], ["created_at", "2020-04-05 15:20:43.989542"]]
  [1m[36mRestaurant Update (0.1ms)[0m  [1m[33mUPDATE "restaurants" SET "updated_at" = ? WHERE "restaurants"."id" = ?[0m  [["updated_at", "2020-04-05 15:20:43.990216"], ["id", 980190962]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: 8d693ccc-545a-4e36-b4f8-1e886e07162e) to Async(default) with arguments: #<GlobalID:0x00005561a9fc5a48 @uri=#<URI::GID gid://ihungry/ActiveStorage::Blob/1>>
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT  "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [8d693ccc-545a-4e36-b4f8-1e886e07162e] Performing ActiveStorage::AnalyzeJob (Job ID: 8d693ccc-545a-4e36-b4f8-1e886e07162e) from Async(default) with arguments: #<GlobalID:0x00007f2b7814c5a8 @uri=#<URI::GID gid://ihungry/ActiveStorage::Blob/1>>
Started GET "/restaurants/980190962" for 127.0.0.1 at 2020-04-05 12:20:43 -0300
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [8d693ccc-545a-4e36-b4f8-1e886e07162e] [36m  Disk Storage (1.7ms) [0m[34mDownloaded file from key: yam3FUbYULmYeLLiqHyCxAdQ[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [8d693ccc-545a-4e36-b4f8-1e886e07162e] Skipping image analysis because the mini_magick gem isn't installed
[ActiveJob] [ActiveStorage::AnalyzeJob] [8d693ccc-545a-4e36-b4f8-1e886e07162e]   [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [8d693ccc-545a-4e36-b4f8-1e886e07162e]   [1m[36mActiveStorage::Blob Update (0.1ms)[0m  [1m[33mUPDATE "active_storage_blobs" SET "metadata" = ? WHERE "active_storage_blobs"."id" = ?[0m  [["metadata", "{\"identified\":true,\"analyzed\":true}"], ["id", 1]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [8d693ccc-545a-4e36-b4f8-1e886e07162e]   [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [8d693ccc-545a-4e36-b4f8-1e886e07162e] Performed ActiveStorage::AnalyzeJob (Job ID: 8d693ccc-545a-4e36-b4f8-1e886e07162e) from Async(default) in 4.75ms
[active_model_serializers]   [1m[35m (0.1ms)[0m  [1m[34mSELECT AVG("reviews"."value") FROM "reviews" WHERE "reviews"."restaurant_id" = ?[0m  [["restaurant_id", 980190962]]
[active_model_serializers]   [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT  "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 980190962], ["record_type", "Restaurant"], ["name", "image"], ["LIMIT", 1]]
[active_model_serializers]   [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT  "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
[active_model_serializers]   [1m[36mCategory Load (0.1ms)[0m  [1m[34mSELECT  "categories".* FROM "categories" WHERE "categories"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
[active_model_serializers]   [1m[36mProductCategory Load (0.1ms)[0m  [1m[34mSELECT "product_categories".* FROM "product_categories" WHERE "product_categories"."restaurant_id" = ?[0m  [["restaurant_id", 980190962]]
[active_model_serializers] Rendered RestaurantSerializer with ActiveModelSerializers::Adapter::Json (16.03ms)
Completed 200 OK in 27ms (Views: 25.7ms | ActiveRecord: 0.6ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------
RestaurantsControllerTest: test_should_get_search
-------------------------------------------------
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT  "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 298486374], ["record_type", "Restaurant"], ["name", "image"], ["LIMIT", 1]]
[36m  Disk Storage (1.1ms) [0m[32mUploaded file to key: qysXfT5GxCfW9cJwGeduFmX3 (checksum: 7r/DK32Mv5bcP+oY3ZoSew==)[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mActiveStorage::Blob Create (0.2ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["key", "qysXfT5GxCfW9cJwGeduFmX3"], ["filename", "restaurant.jpg"], ["content_type", "image/jpeg"], ["metadata", "{\"identified\":true}"], ["byte_size", 284707], ["checksum", "7r/DK32Mv5bcP+oY3ZoSew=="], ["created_at", "2020-04-05 15:20:44.025911"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mActiveStorage::Attachment Create (0.1ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "image"], ["record_type", "Restaurant"], ["record_id", 298486374], ["blob_id", 1], ["created_at", "2020-04-05 15:20:44.027527"]]
  [1m[36mRestaurant Update (0.1ms)[0m  [1m[33mUPDATE "restaurants" SET "updated_at" = ? WHERE "restaurants"."id" = ?[0m  [["updated_at", "2020-04-05 15:20:44.028206"], ["id", 298486374]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: a781fabb-60be-425c-9f0c-22e3c6556162) to Async(default) with arguments: #<GlobalID:0x00005561aa19ea18 @uri=#<URI::GID gid://ihungry/ActiveStorage::Blob/1>>
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT  "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [a781fabb-60be-425c-9f0c-22e3c6556162] Performing ActiveStorage::AnalyzeJob (Job ID: a781fabb-60be-425c-9f0c-22e3c6556162) from Async(default) with arguments: #<GlobalID:0x00007f2b781b7060 @uri=#<URI::GID gid://ihungry/ActiveStorage::Blob/1>>
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT  "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 980190962], ["record_type", "Restaurant"], ["name", "image"], ["LIMIT", 1]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [a781fabb-60be-425c-9f0c-22e3c6556162] [36m  Disk Storage (13.8ms) [0m[34mDownloaded file from key: qysXfT5GxCfW9cJwGeduFmX3[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [a781fabb-60be-425c-9f0c-22e3c6556162] Skipping image analysis because the mini_magick gem isn't installed
[ActiveJob] [ActiveStorage::AnalyzeJob] [a781fabb-60be-425c-9f0c-22e3c6556162]   [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [a781fabb-60be-425c-9f0c-22e3c6556162]   [1m[36mActiveStorage::Blob Update (0.1ms)[0m  [1m[33mUPDATE "active_storage_blobs" SET "metadata" = ? WHERE "active_storage_blobs"."id" = ?[0m  [["metadata", "{\"identified\":true,\"analyzed\":true}"], ["id", 1]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [a781fabb-60be-425c-9f0c-22e3c6556162]   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [a781fabb-60be-425c-9f0c-22e3c6556162] Performed ActiveStorage::AnalyzeJob (Job ID: a781fabb-60be-425c-9f0c-22e3c6556162) from Async(default) in 16.25ms
[36m  Disk Storage (3.4ms) [0m[32mUploaded file to key: 2Nf7rio4P6zFScYBZqfk9vn8 (checksum: 7r/DK32Mv5bcP+oY3ZoSew==)[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mActiveStorage::Blob Create (0.1ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["key", "2Nf7rio4P6zFScYBZqfk9vn8"], ["filename", "restaurant.jpg"], ["content_type", "image/jpeg"], ["metadata", "{\"identified\":true}"], ["byte_size", 284707], ["checksum", "7r/DK32Mv5bcP+oY3ZoSew=="], ["created_at", "2020-04-05 15:20:44.048677"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mActiveStorage::Attachment Create (0.1ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "image"], ["record_type", "Restaurant"], ["record_id", 980190962], ["blob_id", 2], ["created_at", "2020-04-05 15:20:44.050068"]]
  [1m[36mRestaurant Update (0.1ms)[0m  [1m[33mUPDATE "restaurants" SET "updated_at" = ? WHERE "restaurants"."id" = ?[0m  [["updated_at", "2020-04-05 15:20:44.050652"], ["id", 980190962]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: 9dd4f241-41b6-49ef-b5a3-8e677d12f6af) to Async(default) with arguments: #<GlobalID:0x00005561a6d2aa70 @uri=#<URI::GID gid://ihungry/ActiveStorage::Blob/2>>
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT  "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [9dd4f241-41b6-49ef-b5a3-8e677d12f6af] Performing ActiveStorage::AnalyzeJob (Job ID: 9dd4f241-41b6-49ef-b5a3-8e677d12f6af) from Async(default) with arguments: #<GlobalID:0x00005561a76f0730 @uri=#<URI::GID gid://ihungry/ActiveStorage::Blob/2>>
Started GET "/restaurants/search" for 127.0.0.1 at 2020-04-05 12:20:44 -0300
Processing by RestaurantsController#search as HTML
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
[active_model_serializers]   [1m[35m (0.1ms)[0m  [1m[34mSELECT AVG("reviews"."value") FROM "reviews" WHERE "reviews"."restaurant_id" = ?[0m  [["restaurant_id", 298486374]]
[active_model_serializers]   [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT  "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 298486374], ["record_type", "Restaurant"], ["name", "image"], ["LIMIT", 1]]
[active_model_serializers]   [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT  "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
[active_model_serializers]   [1m[36mCategory Load (0.0ms)[0m  [1m[34mSELECT  "categories".* FROM "categories" WHERE "categories"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
[active_model_serializers]   [1m[35m (0.0ms)[0m  [1m[34mSELECT AVG("reviews"."value") FROM "reviews" WHERE "reviews"."restaurant_id" = ?[0m  [["restaurant_id", 980190962]]
[active_model_serializers]   [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT  "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 980190962], ["record_type", "Restaurant"], ["name", "image"], ["LIMIT", 1]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [9dd4f241-41b6-49ef-b5a3-8e677d12f6af] [36m  Disk Storage (3.6ms) [0m[34mDownloaded file from key: 2Nf7rio4P6zFScYBZqfk9vn8[0m
[active_model_serializers]   [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT  "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
[active_model_serializers]   [1m[36mCategory Load (0.0ms)[0m  [1m[34mSELECT  "categories".* FROM "categories" WHERE "categories"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [9dd4f241-41b6-49ef-b5a3-8e677d12f6af] Skipping image analysis because the mini_magick gem isn't installed
[ActiveJob] [ActiveStorage::AnalyzeJob] [9dd4f241-41b6-49ef-b5a3-8e677d12f6af]   [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [9dd4f241-41b6-49ef-b5a3-8e677d12f6af]   [1m[36mActiveStorage::Blob Update (0.1ms)[0m  [1m[33mUPDATE "active_storage_blobs" SET "metadata" = ? WHERE "active_storage_blobs"."id" = ?[0m  [["metadata", "{\"identified\":true,\"analyzed\":true}"], ["id", 2]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [9dd4f241-41b6-49ef-b5a3-8e677d12f6af]   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [9dd4f241-41b6-49ef-b5a3-8e677d12f6af] Performed ActiveStorage::AnalyzeJob (Job ID: 9dd4f241-41b6-49ef-b5a3-8e677d12f6af) from Async(default) in 10.59ms
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Json (6.95ms)
Completed 200 OK in 10ms (Views: 8.7ms | ActiveRecord: 0.5ms)
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------
CategoriesControllerTest: test_should_get_index
-----------------------------------------------
  [1m[36mCategory Load (0.1ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT  "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 298486374], ["record_type", "Category"], ["name", "image"], ["LIMIT", 1]]
[36m  Disk Storage (0.7ms) [0m[32mUploaded file to key: G4jLBBvaEB6A4nyDAdd7vHFQ (checksum: GQF9otxCszErHnwhJPtaXQ==)[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mActiveStorage::Blob Create (0.2ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["key", "G4jLBBvaEB6A4nyDAdd7vHFQ"], ["filename", "mexican.jpg"], ["content_type", "image/jpeg"], ["metadata", "{\"identified\":true}"], ["byte_size", 164392], ["checksum", "GQF9otxCszErHnwhJPtaXQ=="], ["created_at", "2020-04-05 15:20:44.068234"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mActiveStorage::Attachment Create (0.1ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "image"], ["record_type", "Category"], ["record_id", 298486374], ["blob_id", 1], ["created_at", "2020-04-05 15:20:44.069683"]]
  [1m[36mCategory Update (0.1ms)[0m  [1m[33mUPDATE "categories" SET "updated_at" = ? WHERE "categories"."id" = ?[0m  [["updated_at", "2020-04-05 15:20:44.070285"], ["id", 298486374]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: 582a801f-73a6-4280-bfb2-f6d69f42577a) to Async(default) with arguments: #<GlobalID:0x00007f2b740e9560 @uri=#<URI::GID gid://ihungry/ActiveStorage::Blob/1>>
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT  "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 980190962], ["record_type", "Category"], ["name", "image"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Blob Load (1.0ms)[0m  [1m[34mSELECT  "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [582a801f-73a6-4280-bfb2-f6d69f42577a] Performing ActiveStorage::AnalyzeJob (Job ID: 582a801f-73a6-4280-bfb2-f6d69f42577a) from Async(default) with arguments: #<GlobalID:0x00007f2b7410d0f0 @uri=#<URI::GID gid://ihungry/ActiveStorage::Blob/1>>
[ActiveJob] [ActiveStorage::AnalyzeJob] [582a801f-73a6-4280-bfb2-f6d69f42577a] [36m  Disk Storage (0.6ms) [0m[34mDownloaded file from key: G4jLBBvaEB6A4nyDAdd7vHFQ[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [582a801f-73a6-4280-bfb2-f6d69f42577a] Skipping image analysis because the mini_magick gem isn't installed
[ActiveJob] [ActiveStorage::AnalyzeJob] [582a801f-73a6-4280-bfb2-f6d69f42577a]   [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [582a801f-73a6-4280-bfb2-f6d69f42577a]   [1m[36mActiveStorage::Blob Update (0.1ms)[0m  [1m[33mUPDATE "active_storage_blobs" SET "metadata" = ? WHERE "active_storage_blobs"."id" = ?[0m  [["metadata", "{\"identified\":true,\"analyzed\":true}"], ["id", 1]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [582a801f-73a6-4280-bfb2-f6d69f42577a]   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [582a801f-73a6-4280-bfb2-f6d69f42577a] Performed ActiveStorage::AnalyzeJob (Job ID: 582a801f-73a6-4280-bfb2-f6d69f42577a) from Async(default) in 3.51ms
[36m  Disk Storage (2.7ms) [0m[32mUploaded file to key: JR5nKMaqkjCW9PBto1FS91Uo (checksum: GQF9otxCszErHnwhJPtaXQ==)[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mActiveStorage::Blob Create (0.1ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["key", "JR5nKMaqkjCW9PBto1FS91Uo"], ["filename", "mexican.jpg"], ["content_type", "image/jpeg"], ["metadata", "{\"identified\":true}"], ["byte_size", 164392], ["checksum", "GQF9otxCszErHnwhJPtaXQ=="], ["created_at", "2020-04-05 15:20:44.077761"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mActiveStorage::Attachment Create (0.1ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "image"], ["record_type", "Category"], ["record_id", 980190962], ["blob_id", 2], ["created_at", "2020-04-05 15:20:44.079016"]]
  [1m[36mCategory Update (0.1ms)[0m  [1m[33mUPDATE "categories" SET "updated_at" = ? WHERE "categories"."id" = ?[0m  [["updated_at", "2020-04-05 15:20:44.079540"], ["id", 980190962]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: e6d33e53-4cd0-49cd-b11d-22c248ad083e) to Async(default) with arguments: #<GlobalID:0x00007f2b74140748 @uri=#<URI::GID gid://ihungry/ActiveStorage::Blob/2>>
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT  "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [e6d33e53-4cd0-49cd-b11d-22c248ad083e] Performing ActiveStorage::AnalyzeJob (Job ID: e6d33e53-4cd0-49cd-b11d-22c248ad083e) from Async(default) with arguments: #<GlobalID:0x00007f2b74156390 @uri=#<URI::GID gid://ihungry/ActiveStorage::Blob/2>>
Started GET "/categories" for 127.0.0.1 at 2020-04-05 12:20:44 -0300
[ActiveJob] [ActiveStorage::AnalyzeJob] [e6d33e53-4cd0-49cd-b11d-22c248ad083e] [36m  Disk Storage (0.3ms) [0m[34mDownloaded file from key: JR5nKMaqkjCW9PBto1FS91Uo[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [e6d33e53-4cd0-49cd-b11d-22c248ad083e] Skipping image analysis because the mini_magick gem isn't installed
[ActiveJob] [ActiveStorage::AnalyzeJob] [e6d33e53-4cd0-49cd-b11d-22c248ad083e]   [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [e6d33e53-4cd0-49cd-b11d-22c248ad083e]   [1m[36mActiveStorage::Blob Update (0.1ms)[0m  [1m[33mUPDATE "active_storage_blobs" SET "metadata" = ? WHERE "active_storage_blobs"."id" = ?[0m  [["metadata", "{\"identified\":true,\"analyzed\":true}"], ["id", 2]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [e6d33e53-4cd0-49cd-b11d-22c248ad083e]   [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [e6d33e53-4cd0-49cd-b11d-22c248ad083e] Performed ActiveStorage::AnalyzeJob (Job ID: e6d33e53-4cd0-49cd-b11d-22c248ad083e) from Async(default) in 2.74ms
Processing by CategoriesController#index as HTML
  [1m[36mCategory Load (0.1ms)[0m  [1m[34mSELECT "categories".* FROM "categories" ORDER BY "categories"."title" ASC[0m
[active_model_serializers]   [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT  "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 298486374], ["record_type", "Category"], ["name", "image"], ["LIMIT", 1]]
[active_model_serializers]   [1m[36mActiveStorage::Blob Load (0.0ms)[0m  [1m[34mSELECT  "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
[active_model_serializers]   [1m[36mActiveStorage::Attachment Load (0.0ms)[0m  [1m[34mSELECT  "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 980190962], ["record_type", "Category"], ["name", "image"], ["LIMIT", 1]]
[active_model_serializers]   [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT  "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Json (3.33ms)
Completed 200 OK in 5ms (Views: 4.3ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
OrdersControllerTest: test_should_get_create
--------------------------------------------
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" ORDER BY "restaurants"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
Started POST "/orders" for 127.0.0.1 at 2020-04-05 12:20:44 -0300
Processing by OrdersController#create as HTML
  Parameters: {"order"=>{"restaurant_id"=>"980190962", "name"=>"Funny Triangle", "phone_number"=>"123123123"}}
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mOrder Create (0.3ms)[0m  [1m[32mINSERT INTO "orders" ("name", "phone_number", "total_value", "restaurant_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["name", "Funny Triangle"], ["phone_number", "123123123"], ["total_value", 0.0], ["restaurant_id", 980190962], ["created_at", "2020-04-05 15:20:44.104480"], ["updated_at", "2020-04-05 15:20:44.104480"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Class (0.05ms)
Completed 201 Created in 13ms (Views: 3.5ms | ActiveRecord: 0.5ms)
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
OrdersControllerTest: test_should_get_show
------------------------------------------
  [1m[36mOrder Load (0.1ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" ORDER BY "orders"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
Started GET "/orders/980190962" for 127.0.0.1 at 2020-04-05 12:20:44 -0300
Processing by OrdersController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mOrder Load (0.1ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
[active_model_serializers] Rendered OrderSerializer with ActiveModelSerializers::Adapter::Json (0.27ms)
Completed 200 OK in 2ms (Views: 1.1ms | ActiveRecord: 0.1ms)
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
